"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[620],{3190(e,c,d){d.r(c),d.d(c,{assets:()=>t,contentTitle:()=>s,default:()=>l,frontMatter:()=>r,metadata:()=>a,toc:()=>f});const a=JSON.parse('{"id":"SealCLI","title":"Seal CLI","description":"Learn how to use the Seal CLI to generate keys, encrypt and decrypt data, inspect encrypted objects, and interact with key servers.","source":"@site/../content/SealCLI.mdx","sourceDirName":".","slug":"/SealCLI","permalink":"/SealCLI","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Seal CLI","description":"Learn how to use the Seal CLI to generate keys, encrypt and decrypt data, inspect encrypted objects, and interact with key servers.","keywords":["Seal CLI","seal-cli","encryption","decryption","key generation","threshold encryption","symmetric key","AES encryption","IBE"]},"sidebar":"docsSidebar","previous":{"title":"Aggregator Server","permalink":"/Aggregator"},"next":{"title":"Seal Pricing","permalink":"/Pricing"}}');var n=d(4848),b=d(8453);const r={title:"Seal CLI",description:"Learn how to use the Seal CLI to generate keys, encrypt and decrypt data, inspect encrypted objects, and interact with key servers.",keywords:["Seal CLI","seal-cli","encryption","decryption","key generation","threshold encryption","symmetric key","AES encryption","IBE"]},s="Seal CLI",t={},f=[{value:"1. Generate demo key pairs",id:"1-generate-demo-key-pairs",level:2},{value:"2. Encrypt (using AES)",id:"2-encrypt-using-aes",level:2},{value:"3. (Optional) Decrypt with the symmetric key",id:"3-optional-decrypt-with-the-symmetric-key",level:2},{value:"4. Extract user secret keys (for threshold decrypt)",id:"4-extract-user-secret-keys-for-threshold-decrypt",level:2},{value:"5. Decrypt with a threshold of user keys",id:"5-decrypt-with-a-threshold-of-user-keys",level:2},{value:"6. Inspect an encrypted object",id:"6-inspect-an-encrypted-object",level:2},{value:"7. Encrypt and fetch keys using service providers",id:"7-encrypt-and-fetch-keys-using-service-providers",level:2}];function i(e){const c={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,b.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.header,{children:(0,n.jsx)(c.h1,{id:"seal-cli",children:"Seal CLI"})}),"\n",(0,n.jsxs)(c.p,{children:["Use ",(0,n.jsx)(c.code,{children:"seal-cli"})," to generate keys, encrypt data, decrypt data, and inspect encrypted objects. The following is a demonstration of how to use the CLI to encrypt and decrypt messages."]}),"\n",(0,n.jsx)(c.h2,{id:"1-generate-demo-key-pairs",children:"1. Generate demo key pairs"}),"\n",(0,n.jsx)(c.p,{children:"Generate key pairs (one per key server in a threshold committee). Run the following command (for this example, run it three times):"}),"\n",(0,n.jsx)(c.pre,{children:(0,n.jsx)(c.code,{className:"language-shell",children:"cargo run --bin seal-cli genkey\n"})}),"\n",(0,n.jsx)(c.p,{children:"Example outputs (yours will differ):"}),"\n",(0,n.jsx)(c.pre,{children:(0,n.jsx)(c.code,{className:"language-shell",children:"Masterkey: 6b2eb410ad729f5b2ffa54ca5a2186ef95a1e31df3cccdd346b24f2262279440\nPublickey: aeb258b9fb9a2f29f74eb0a1a895860bb1c6ba3f9ea7075366de159e4764413e9ec0597ac9c0dad409723935440a45f40eee4728630ae3ea40a68a819375bba1d78d7810f901d8a469d785d00cfed6bd28f01d41e49c5652d924e9d19fddcf62\n\nMasterkey: 54152de3b08708b18ce5cd69b0c4d732f093cba2ba5c102c4f26e0f210daab75\nPublickey: b1076a26f4f82f39d0e767fcd2118659362afe40bce4e8d553258c86756bb74f888bca79f2d6b71edf6e25af89efa83713a223b48a19d2e551897ac92ac7458336cd489be3be025e348ca93f4c94d22594f96f0e08990e51a7de9da8ff29c98f\n\nMasterkey: 2ea9ccdaa224e9fc34ef1458fced17562b2d3757c1ebb223c627173ac6f93806\nPublickey: 95fcb465af3791f31d53d80db6c8dcf9f83a419b2570614ecfbb068f47613da17cb9ffc66bb052b9546f17196929538f0bd2d38e1f515d9916e2db13dc43e0ccbd4cb3d7cbb13ffecc0b68b37481ebaaaa17cad18096a9c2c27a797f17d78623\n"})}),"\n",(0,n.jsx)(c.p,{children:"Assumptions for the walkthrough ahead:"}),"\n",(0,n.jsxs)(c.ul,{children:["\n",(0,n.jsxs)(c.li,{children:["Key server object IDs: ",(0,n.jsx)(c.code,{children:"0x1"}),", ",(0,n.jsx)(c.code,{children:"0x2"}),", ",(0,n.jsx)(c.code,{children:"0x3"})]}),"\n",(0,n.jsxs)(c.li,{children:["Seal package ID: ",(0,n.jsx)(c.code,{children:"0x0"})]}),"\n",(0,n.jsxs)(c.li,{children:["Threshold: ",(0,n.jsx)(c.code,{children:"2"})]}),"\n",(0,n.jsxs)(c.li,{children:["Example message (hex) and ID:","\n",(0,n.jsxs)(c.ul,{children:["\n",(0,n.jsxs)(c.li,{children:["Message: ",(0,n.jsx)(c.code,{children:"54686520646966666572656e6365206265747765656e2061204d697261636c6520616e64206120466163742069732065786163746c792074686520646966666572656e6365206265747765656e2061206d65726d61696420616e642061207365616c"})]}),"\n",(0,n.jsxs)(c.li,{children:["ID: ",(0,n.jsx)(c.code,{children:"53e66d756e6472206672f3f069"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(c.h2,{id:"2-encrypt-using-aes",children:"2. Encrypt (using AES)"}),"\n",(0,n.jsxs)(c.p,{children:["Encrypt the message with the three key server public keys, threshold 2, and the example key server object IDs, using the ",(0,n.jsx)(c.code,{children:"encrypt-aes"})," command:"]}),"\n",(0,n.jsx)(c.pre,{children:(0,n.jsx)(c.code,{className:"language-shell",children:"cargo run --bin seal-cli encrypt-aes --message 54686520646966666572656e6365206265747765656e2061204d697261636c6520616e64206120466163742069732065786163746c792074686520646966666572656e6365206265747765656e2061206d65726d61696420616e642061207365616c --package-id 0x0 --id 53e66d756e6472206672f3f069 --threshold 2 aeb258b9fb9a2f29f74eb0a1a895860bb1c6ba3f9ea7075366de159e4764413e9ec0597ac9c0dad409723935440a45f40eee4728630ae3ea40a68a819375bba1d78d7810f901d8a469d785d00cfed6bd28f01d41e49c5652d924e9d19fddcf62 b1076a26f4f82f39d0e767fcd2118659362afe40bce4e8d553258c86756bb74f888bca79f2d6b71edf6e25af89efa83713a223b48a19d2e551897ac92ac7458336cd489be3be025e348ca93f4c94d22594f96f0e08990e51a7de9da8ff29c98f 95fcb465af3791f31d53d80db6c8dcf9f83a419b2570614ecfbb068f47613da17cb9ffc66bb052b9546f17196929538f0bd2d38e1f515d9916e2db13dc43e0ccbd4cb3d7cbb13ffecc0b68b37481ebaaaa17cad18096a9c2c27a797f17d78623 -- 0x1 0x2 0x3\n"})}),"\n",(0,n.jsx)(c.p,{children:"Example output:"}),"\n",(0,n.jsx)(c.pre,{children:(0,n.jsx)(c.code,{className:"language-shell",children:"Encrypted object (bcs): 0000000000000000000000000000000000000000000000000000000000000000000d53e66d756e6472206672f3f069030000000000000000000000000000000000000000000000000000000000000001010000000000000000000000000000000000000000000000000000000000000002020000000000000000000000000000000000000000000000000000000000000003030200841b3a59241e099e8b8d9cec1d531b1e8fe4b4170433e30d9aaa9fc764201f69e589a0b2a0e65bfb279d4b25ee1ce8141812bfb785abdb05134c3958f53c2e81e7bc06e5c1f1ebd7e489b5cf652216b13e6b7c2b13da70a4a7c05c3544a1ddf703b627cb3268d74c74ead83fb827c60fa23c1d192fb8a7db50ea8721bf7c95bd1748b5ed7da6873f4a5b539cb16085e5cd174206db776c04902c7d8c02d6fa47aada89c2fa0692973a83a7a900f2b0dd7f7475e55095d0df7b0483ae1192761d368985e51d72597df02764c654536130c905a8de4a6c9169643e9dd01efab17a9200723b7d7b2ede8924cfb3687a0c41599b87bebc9d913d8eb81a2027ba8286a7b2cd9f5303b6b551fa545189e2f13cb65642b66595ca4256f42cdda2ac78af39abde06184da29131437e1417ebb35c7136d2c74b8ab9fa4147077bbcdbfafc2b05458792eefe0424fedef10247b8b3c787e7772800\nSymmetric key: e39651e5aa01949ba5174c67a2c37f58ee8217392ba2275a5789f0ac2c3540d8\n"})}),"\n",(0,n.jsx)(c.admonition,{type:"info",children:(0,n.jsx)(c.p,{children:"The encryption is randomized, so the output will be different each time you run the command, even with the same input message and keys."})}),"\n",(0,n.jsx)(c.admonition,{type:"info",children:(0,n.jsx)(c.p,{children:"The output includes the hex-encoded, BCS serialized encrypted object and the symmetric key used to encrypt the message. You can share the encrypted object (for example, on-chain or through Walrus), but keep the symmetric key secret - anyone with access to it can decrypt the message."})}),"\n",(0,n.jsx)(c.h2,{id:"3-optional-decrypt-with-the-symmetric-key",children:"3. (Optional) Decrypt with the symmetric key"}),"\n",(0,n.jsxs)(c.p,{children:["You can decrypt locally with the symmetric key, using the ",(0,n.jsx)(c.code,{children:"symmetric-decrypt"})," command:"]}),"\n",(0,n.jsx)(c.pre,{children:(0,n.jsx)(c.code,{className:"language-shell",children:"cargo run --bin seal-cli symmetric-decrypt --key e39651e5aa01949ba5174c67a2c37f58ee8217392ba2275a5789f0ac2c3540d8 0000000000000000000000000000000000000000000000000000000000000000000d53e66d756e6472206672f3f069030000000000000000000000000000000000000000000000000000000000000001010000000000000000000000000000000000000000000000000000000000000002020000000000000000000000000000000000000000000000000000000000000003030200841b3a59241e099e8b8d9cec1d531b1e8fe4b4170433e30d9aaa9fc764201f69e589a0b2a0e65bfb279d4b25ee1ce8141812bfb785abdb05134c3958f53c2e81e7bc06e5c1f1ebd7e489b5cf652216b13e6b7c2b13da70a4a7c05c3544a1ddf703b627cb3268d74c74ead83fb827c60fa23c1d192fb8a7db50ea8721bf7c95bd1748b5ed7da6873f4a5b539cb16085e5cd174206db776c04902c7d8c02d6fa47aada89c2fa0692973a83a7a900f2b0dd7f7475e55095d0df7b0483ae1192761d368985e51d72597df02764c654536130c905a8de4a6c9169643e9dd01efab17a9200723b7d7b2ede8924cfb3687a0c41599b87bebc9d913d8eb81a2027ba8286a7b2cd9f5303b6b551fa545189e2f13cb65642b66595ca4256f42cdda2ac78af39abde06184da29131437e1417ebb35c7136d2c74b8ab9fa4147077bbcdbfafc2b05458792eefe0424fedef10247b8b3c787e7772800\n"})}),"\n",(0,n.jsx)(c.p,{children:"This command returns the original message:"}),"\n",(0,n.jsx)(c.pre,{children:(0,n.jsx)(c.code,{className:"language-shell",children:"Decrypted message: 54686520646966666572656e6365206265747765656e2061204d697261636c6520616e64206120466163742069732065786163746c792074686520646966666572656e6365206265747765656e2061206d65726d61696420616e642061207365616c\n"})}),"\n",(0,n.jsx)(c.h2,{id:"4-extract-user-secret-keys-for-threshold-decrypt",children:"4. Extract user secret keys (for threshold decrypt)"}),"\n",(0,n.jsxs)(c.p,{children:["In normal practice, key servers provide user-specific secret material. For the demo, derive user secrets from each master key, using the ",(0,n.jsx)(c.code,{children:"extract"})," command:"]}),"\n",(0,n.jsx)(c.pre,{children:(0,n.jsx)(c.code,{className:"language-shell",children:"cargo run --bin seal-cli extract --package-id 0x0 --id 53e66d756e6472206672f3f069 --master-key 6b2eb410ad729f5b2ffa54ca5a2186ef95a1e31df3cccdd346b24f2262279440\n"})}),"\n",(0,n.jsx)(c.p,{children:"Repeat for all three master keys. Example outputs:"}),"\n",(0,n.jsx)(c.pre,{children:(0,n.jsx)(c.code,{className:"language-shell",children:"User secret key: b882fccc1f021c3b995e63a1f7329fcf71f750844195125e6a6b319dde9a7afc24b0c1a29d5a55f5908cf440dd7b3da3\n\nUser secret key: 97c30ec9dd6dafa187b732004a4d33414446115af35a1b1c0eb78af094f6e0d4d06830d5d7be9140cbcb05c63aaf7e28\n\nUser secret key: 8547bf7a70f7c1f3ad4070af8bc969f4afb82eddfcdca129fcedd6b7df1c91527ccd8d35dd33d0552cd95ba302ee6166\n"})}),"\n",(0,n.jsx)(c.h2,{id:"5-decrypt-with-a-threshold-of-user-keys",children:"5. Decrypt with a threshold of user keys"}),"\n",(0,n.jsxs)(c.p,{children:["Because the threshold is 2, provide any two user secret keys to decrypt, using the ",(0,n.jsx)(c.code,{children:"decrypt"})," command:"]}),"\n",(0,n.jsx)(c.pre,{children:(0,n.jsx)(c.code,{className:"language-shell",children:"cargo run --bin seal-cli decrypt 0000000000000000000000000000000000000000000000000000000000000000000d53e66d756e6472206672f3f069030000000000000000000000000000000000000000000000000000000000000001010000000000000000000000000000000000000000000000000000000000000002020000000000000000000000000000000000000000000000000000000000000003030200841b3a59241e099e8b8d9cec1d531b1e8fe4b4170433e30d9aaa9fc764201f69e589a0b2a0e65bfb279d4b25ee1ce8141812bfb785abdb05134c3958f53c2e81e7bc06e5c1f1ebd7e489b5cf652216b13e6b7c2b13da70a4a7c05c3544a1ddf703b627cb3268d74c74ead83fb827c60fa23c1d192fb8a7db50ea8721bf7c95bd1748b5ed7da6873f4a5b539cb16085e5cd174206db776c04902c7d8c02d6fa47aada89c2fa0692973a83a7a900f2b0dd7f7475e55095d0df7b0483ae1192761d368985e51d72597df02764c654536130c905a8de4a6c9169643e9dd01efab17a9200723b7d7b2ede8924cfb3687a0c41599b87bebc9d913d8eb81a2027ba8286a7b2cd9f5303b6b551fa545189e2f13cb65642b66595ca4256f42cdda2ac78af39abde06184da29131437e1417ebb35c7136d2c74b8ab9fa4147077bbcdbfafc2b05458792eefe0424fedef10247b8b3c787e7772800 b882fccc1f021c3b995e63a1f7329fcf71f750844195125e6a6b319dde9a7afc24b0c1a29d5a55f5908cf440dd7b3da3 97c30ec9dd6dafa187b732004a4d33414446115af35a1b1c0eb78af094f6e0d4d06830d5d7be9140cbcb05c63aaf7e28 -- 0x1 0x2\n"})}),"\n",(0,n.jsx)(c.p,{children:"This command returns the original message:"}),"\n",(0,n.jsx)(c.pre,{children:(0,n.jsx)(c.code,{className:"language-shell",children:"Decrypted message: 54686520646966666572656e6365206265747765656e2061204d697261636c6520616e64206120466163742069732065786163746c792074686520646966666572656e6365206265747765656e2061206d65726d61696420616e642061207365616c\n"})}),"\n",(0,n.jsx)(c.h2,{id:"6-inspect-an-encrypted-object",children:"6. Inspect an encrypted object"}),"\n",(0,n.jsxs)(c.p,{children:["Use the ",(0,n.jsx)(c.code,{children:"parse"})," command to view the encrypted object in a human-readable form:"]}),"\n",(0,n.jsx)(c.pre,{children:(0,n.jsx)(c.code,{className:"language-shell",children:"cargo run --bin seal-cli parse 0000000000000000000000000000000000000000000000000000000000000000000d53e66d756e6472206672f3f069030000000000000000000000000000000000000000000000000000000000000001010000000000000000000000000000000000000000000000000000000000000002020000000000000000000000000000000000000000000000000000000000000003030200841b3a59241e099e8b8d9cec1d531b1e8fe4b4170433e30d9aaa9fc764201f69e589a0b2a0e65bfb279d4b25ee1ce8141812bfb785abdb05134c3958f53c2e81e7bc06e5c1f1ebd7e489b5cf652216b13e6b7c2b13da70a4a7c05c3544a1ddf703b627cb3268d74c74ead83fb827c60fa23c1d192fb8a7db50ea8721bf7c95bd1748b5ed7da6873f4a5b539cb16085e5cd174206db776c04902c7d8c02d6fa47aada89c2fa0692973a83a7a900f2b0dd7f7475e55095d0df7b0483ae1192761d368985e51d72597df02764c654536130c905a8de4a6c9169643e9dd01efab17a9200723b7d7b2ede8924cfb3687a0c41599b87bebc9d913d8eb81a2027ba8286a7b2cd9f5303b6b551fa545189e2f13cb65642b66595ca4256f42cdda2ac78af39abde06184da29131437e1417ebb35c7136d2c74b8ab9fa4147077bbcdbfafc2b05458792eefe0424fedef10247b8b3c787e7772800\n"})}),"\n",(0,n.jsx)(c.p,{children:"Example output in a human-readable format:"}),"\n",(0,n.jsx)(c.pre,{children:(0,n.jsx)(c.code,{className:"language-shell",children:"Version: 0\nPackage ID: 0x0000000000000000000000000000000000000000000000000000000000000000\nID: 53e66d756e6472206672f3f069\nServices: share index:\n  0x0000000000000000000000000000000000000000000000000000000000000001: 1\n  0x0000000000000000000000000000000000000000000000000000000000000002: 2\n  0x0000000000000000000000000000000000000000000000000000000000000003: 3\nThreshold: 2\nCiphertext:\n  Type: AES-256-GCM\n  Blob: 3b7d7b2ede8924cfb3687a0c41599b87bebc9d913d8eb81a2027ba8286a7b2cd9f5303b6b551fa545189e2f13cb65642b66595ca4256f42cdda2ac78af39abde06184da29131437e1417ebb35c7136d2c74b8ab9fa4147077bbcdbfafc2b05458792eefe0424fedef10247b8b3c787e77728\n  AAD: None\n\nEncrypted shares:\n  Type: Boneh-Franklin BLS12-381\n  Shares:\n    b627cb3268d74c74ead83fb827c60fa23c1d192fb8a7db50ea8721bf7c95bd17\n    48b5ed7da6873f4a5b539cb16085e5cd174206db776c04902c7d8c02d6fa47aa\n    da89c2fa0692973a83a7a900f2b0dd7f7475e55095d0df7b0483ae1192761d36\n  Encapsulation: 841b3a59241e099e8b8d9cec1d531b1e8fe4b4170433e30d9aaa9fc764201f69e589a0b2a0e65bfb279d4b25ee1ce8141812bfb785abdb05134c3958f53c2e81e7bc06e5c1f1ebd7e489b5cf652216b13e6b7c2b13da70a4a7c05c3544a1ddf7\n"})}),"\n",(0,n.jsx)(c.h2,{id:"7-encrypt-and-fetch-keys-using-service-providers",children:"7. Encrypt and fetch keys using service providers"}),"\n",(0,n.jsx)(c.p,{children:(0,n.jsx)(c.strong,{children:"Encrypt"})}),"\n",(0,n.jsx)(c.p,{children:"Encrypt a secret in hex-encoded bytes using a hex-encoded identity and a Seal policy package ID. Provide the key server object IDs and the network. The CLI retrieves the key server's public keys from a public full node and returns a hex-encoded, BCS-serialized encrypted object."}),"\n",(0,n.jsx)(c.pre,{children:(0,n.jsx)(c.code,{className:"language-shell",children:"cargo run --bin seal-cli encrypt --secret 68656c6c6f \\\n    --id 0000 \\\n    -p 0xfaeabd7f317dd7ae40d83b73cfa68b92795f48540d03f1232b33207e22d0a62f \\\n    -t 2 \\\n    -k 0x73d05d62c18d9374e3ea529e8e0ed6161da1a141a94d3f76ae3fe4e99356db75,0xf5d14a81a982144ae441cd7d64b09027f116a468bd36e7eca494f750591623c8 \\\n    -n testnet\n\nEncrypted object:\n<ENCODED_ENCRYPTED_OBJECT>\n"})}),"\n",(0,n.jsxs)(c.p,{children:["Note: ",(0,n.jsx)(c.code,{children:"68656c6c6f"}),' is the hex encoding for UTF-8 string "hello".']}),"\n",(0,n.jsx)(c.p,{children:(0,n.jsx)(c.strong,{children:"Fetch keys for the encoded request"})}),"\n",(0,n.jsxs)(c.p,{children:["Fetch keys for a hex-encoded request. Provide the threshold, key server object IDs, and the network. The CLI retrieves the key server's public keys from a public full node and returns a hex-encoded, BCS-serialized vector of ",(0,n.jsx)(c.code,{children:"(key server object ID, FetchKeyResponse)"})," tuples."]}),"\n",(0,n.jsx)(c.pre,{children:(0,n.jsx)(c.code,{className:"language-shell",children:"cargo run --bin seal-cli fetch-keys --request <ENCODED_REQUEST> \\\n    -k 0x73d05d62c18d9374e3ea529e8e0ed6161da1a141a94d3f76ae3fe4e99356db75,0xf5d14a81a982144ae441cd7d64b09027f116a468bd36e7eca494f750591623c8 \\\n    -t 2 \\\n    -n testnet\n\nEncoded seal responses:\n<ENCODED_SEAL_RESPONSES>\n"})})]})}function l(e={}){const{wrapper:c}={...(0,b.R)(),...e.components};return c?(0,n.jsx)(c,{...e,children:(0,n.jsx)(i,{...e})}):i(e)}},8453(e,c,d){d.d(c,{R:()=>r,x:()=>s});var a=d(6540);const n={},b=a.createContext(n);function r(e){const c=a.useContext(b);return a.useMemo(function(){return"function"==typeof e?e(c):{...c,...e}},[c,e])}function s(e){let c;return c=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),a.createElement(b.Provider,{value:c},e.children)}}}]);