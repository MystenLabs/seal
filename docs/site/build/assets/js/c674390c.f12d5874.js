"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[534],{4182(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"KeyServerCommitteeOps","title":"Key Server Operations for Committee Mode","description":"Learn how to set up and operate a key server in committee mode, including DKG ceremonies, key rotation, and aggregator configuration.","source":"@site/../content/KeyServerCommitteeOps.mdx","sourceDirName":".","slug":"/KeyServerCommitteeOps","permalink":"/KeyServerCommitteeOps","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Key Server Operations for Committee Mode","description":"Learn how to set up and operate a key server in committee mode, including DKG ceremonies, key rotation, and aggregator configuration.","keywords":["key server operations","committee mode","DKG","distributed key generation","key rotation","aggregator server","MPC committee","coordinator","committee members"]},"sidebar":"docsSidebar","previous":{"title":"Key Server Operations","permalink":"/KeyServerOps"},"next":{"title":"Aggregator Server","permalink":"/Aggregator"}}');var i=r(4848),t=r(8453);const o={title:"Key Server Operations for Committee Mode",description:"Learn how to set up and operate a key server in committee mode, including DKG ceremonies, key rotation, and aggregator configuration.",keywords:["key server operations","committee mode","DKG","distributed key generation","key rotation","aggregator server","MPC committee","coordinator","committee members"]},a="Key server operations for committee mode",c={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Fresh DKG process",id:"fresh-dkg-process",level:2},{value:"Coordinator runbook",id:"coordinator-runbook",level:3},{value:"Member runbook",id:"member-runbook",level:3},{value:"Key rotation process",id:"key-rotation-process",level:2},{value:"Coordinator runbook",id:"coordinator-runbook-1",level:3},{value:"Member runbook",id:"member-runbook-1",level:3},{value:"Quick reference: Fresh DKG vs Key rotation",id:"quick-reference-fresh-dkg-vs-key-rotation",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"key-server-operations-for-committee-mode",children:"Key server operations for committee mode"})}),"\n",(0,i.jsx)(n.p,{children:"This guide explains how to set up and operate a key server in committee mode. It walks you through participating in a Distributed Key Generation (DKG) ceremony to generate cryptographic key shares, and then shows you how to configure and run a key server using those shares. If the committee later needs to change membership, the guide also covers key rotation and how to update a running key server accordingly."}),"\n",(0,i.jsxs)(n.p,{children:["In addition to the committee and individual key servers, committee mode requires an ",(0,i.jsx)(n.strong,{children:"aggregator server"}),". The aggregator collects partial key shares from committee members and combines them into a usable decryption key for clients. For details on configuring and running the aggregator, see ",(0,i.jsx)(n.a,{href:"/Aggregator",children:"Aggregator Server"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["A DKG process involves two roles: a ",(0,i.jsx)(n.strong,{children:"coordinator"}),", which orchestrates the workflow, and a set of ",(0,i.jsx)(n.strong,{children:"committee members"}),", which participate in key generation and key rotation."]}),"\n",(0,i.jsx)(n.p,{children:"This document covers the following tasks:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Running a fresh DKG to initialize a new committee and generate an initial key share (",(0,i.jsx)(n.code,{children:"MASTER_SHARE_V0"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"Configuring and starting a key server using the key share produced by the DKG"}),"\n",(0,i.jsxs)(n.li,{children:["Performing key rotation to update committee membership or keys and generate a new key share (",(0,i.jsx)(n.code,{children:"MASTER_SHARE_VX+1"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"Updating a running key server to transition to the new key share after rotation"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Both fresh DKG and key rotation follow the same three-phase process. The coordinator signals members when to move from one phase to the next:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Phase A \u2014 Registration:"})," Members generate encryption keys and register them on-chain."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Phase B \u2014 Message creation:"})," Members create and exchange DKG messages off-chain."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Phase C \u2014 Finalization:"})," Members process messages and propose the committee configuration on-chain."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The guide is organized into four sections:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Fresh DKG coordinator runbook"}),"\n",(0,i.jsx)(n.li,{children:"Fresh DKG member runbook (includes key server setup)"}),"\n",(0,i.jsx)(n.li,{children:"Key rotation coordinator runbook"}),"\n",(0,i.jsx)(n.li,{children:"Key rotation member runbook (includes key server configuration updates)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(n.p,{children:"Before running the DKG or key rotation workflows, both the coordinator and all committee members must complete the following steps."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Install Sui by following the ",(0,i.jsx)(n.a,{href:"https://docs.sui.io/guides/developer/getting-started/sui-install",children:"official installation guide"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sui --version\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Make sure you have a CLI wallet ready on the expected network with gas."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sui client active-env\nsui client active-address\nsui client gas\n\n# to create new wallet\nsui client new-address ed25519\n\n# switch if needed\nsui client switch --env testnet\nsui client switch --address 0x...\n\n# to fund wallet gas: faucet.sui.io\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["Clone the ",(0,i.jsx)(n.a,{href:"https://github.com/MystenLabs/seal",children:"Seal repository"})," and set it as your working directory."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/MystenLabs/seal.git\ncd seal\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"Build the dkg-cli tool."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo run --bin seal-committee-cli -- --help\n"})}),"\n",(0,i.jsx)(n.h2,{id:"fresh-dkg-process",children:"Fresh DKG process"}),"\n",(0,i.jsx)(n.h3,{id:"coordinator-runbook",children:"Coordinator runbook"}),"\n",(0,i.jsx)(n.p,{children:"Follow these steps to initialize a new MPC committee using a fresh DKG."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Prepare DKG configuration"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["a. Create a clean working directory named ",(0,i.jsx)(n.code,{children:"dkg-state"})," and copy the example configuration file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# in seal/\nrm -rf dkg-state && mkdir dkg-state\ncp crates/dkg-cli/dkg.example.yaml dkg-state/dkg.yaml\n"})}),"\n",(0,i.jsxs)(n.p,{children:["b. Collect the on-chain addresses of all participating members. Then open ",(0,i.jsx)(n.code,{children:"dkg-state/dkg.yaml"})," and update the following fields:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"init-params:\n  NETWORK: Testnet # Target network\n  THRESHOLD: 2 # Committee threshold (t of n)\n  MEMBERS: # Addresses of all participating members\n    - 0x...\n    - 0x...\n    - 0x...\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Publish and initialize the committee"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Run the publish-and-init command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo run --bin seal-committee-cli -- publish-and-init\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This script publishes the ",(0,i.jsx)(n.code,{children:"seal_committee"})," package on-chain and initializes the committee state. It also appends the committee identifiers to ",(0,i.jsx)(n.code,{children:"dkg.yaml"}),", for example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"publish-and-init:\n  COMMITTEE_PKG: 0x5b788ac96879a752afbd3608a202207d75cf0f03387bcb744bfb4930cc544a70\n  COMMITTEE_ID: 0x55241859c52f51dd149763769b8aa1e54de39b55acacda3f3a67629691247985\n  COORDINATOR_ADDRESS: 0xef91ea73b4423e3a6176b0a1c9c6e4619de45c9c4e7c0b4aae358e292707d8c2\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Distribute configuration and notify Phase A (Registration)"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Share the updated ",(0,i.jsx)(n.code,{children:"dkg.yaml"})," file with all committee members. Notify members to begin ",(0,i.jsx)(n.strong,{children:"Phase A (Registration)"}),"."]}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Monitor member registration"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Check on-chain registration status:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo run --bin seal-committee-cli -- check-committee -c dkg-state/dkg.yaml\n"})}),"\n",(0,i.jsx)(n.p,{children:"The output shows which members have registered and which are still pending. Wait until all are registered."}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Notify Phase B (Message creation)"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Once all members are registered:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Notify members to begin ",(0,i.jsx)(n.strong,{children:"Phase B (Message creation)"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Monitor the off-chain storage location until all members upload their DKG message files."}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Collect and share DKG messages and notify Phase C (Finalization)"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Collect message files into a single directory and share it with members. The number of messages must equal exactly the threshold of the current committee."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"rm -rf dkg-messages && mkdir dkg-messages\nmv path/to/message_0.json dkg-messages/\nmv path/to/message_1.json dkg-messages/\nmv path/to/message_2.json dkg-messages/\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Notify members to begin ",(0,i.jsx)(n.strong,{children:"Phase C (Finalization)"}),"."]}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Confirm committee finalization"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Monitor on-chain state until all members have proposed and the committee is finalized:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo run --bin seal-committee-cli -- check-committee -c dkg-state/dkg.yaml\n"})}),"\n",(0,i.jsxs)(n.p,{children:["When finalization completes, the output includes the ",(0,i.jsx)(n.code,{children:"KEY_SERVER_OBJ_ID"}),". Share this object ID with all members so they can configure their key servers."]}),"\n",(0,i.jsxs)(n.ol,{start:"8",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Set up the aggregator server"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"After all committee members have their key servers running, complete the aggregator setup."}),"\n",(0,i.jsx)(n.p,{children:"The coordinator shares the following information with the aggregator operator:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["API credentials for each committee member, including:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The on-chain server name (the ",(0,i.jsx)(n.code,{children:"PartialKeyServer.name"})," field)"]}),"\n",(0,i.jsx)(n.li,{children:"The API key name"}),"\n",(0,i.jsx)(n.li,{children:"The API key"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["The committee's ",(0,i.jsx)(n.code,{children:"KEY_SERVER_OBJ_ID"})," from the previous step."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["With this information, the aggregator operator can deploy and run the aggregator server. For configuration and startup instructions, see ",(0,i.jsx)(n.a,{href:"/Aggregator",children:"Aggregator Server"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"member-runbook",children:"Member runbook"}),"\n",(0,i.jsx)(n.p,{children:"Follow these steps to participate as a member in a fresh DKG."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Share your address with the coordinator"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Share your wallet address (",(0,i.jsx)(n.code,{children:"MY_ADDRESS"}),") with the coordinator. This address is used for all on-chain actions during the DKG."]}),"\n",(0,i.jsx)(n.p,{children:"Make sure:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Your wallet is connected to the correct network."}),"\n",(0,i.jsx)(n.li,{children:"You have enough gas to submit transactions."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# check values\nsui client active-address\nsui client active-env\nsui client gas\n\n# switch values if needed\nsui client switch --address <MY_ADDRESS>\nsui client switch --env testnet\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Generate keys and register (Phase A: Registration)"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Wait for the coordinator to announce ",(0,i.jsx)(n.strong,{children:"Phase A (Registration)"})," and send you the ",(0,i.jsx)(n.code,{children:"dkg.yaml"})," file containing ",(0,i.jsx)(n.code,{children:"COMMITTEE_PKG"})," and ",(0,i.jsx)(n.code,{children:"COMMITTEE_ID"}),". Create a local working directory named ",(0,i.jsx)(n.code,{children:"dkg-state"})," and move the file there:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# in seal/\nrm -rf dkg-state && mkdir dkg-state\nmv path/to/dkg.yaml dkg-state/\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Open ",(0,i.jsx)(n.code,{children:"dkg.yaml"})," and verify the committee configuration (member addresses, threshold, committee ID) using a Sui Explorer."]}),"\n",(0,i.jsx)(n.p,{children:"Then run the command to generate your keys and register them on-chain by providing your server URL and name:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo run --bin seal-committee-cli -- genkey-and-register \\\n  -u <YOUR_SERVER_URL> \\\n  -n <YOUR_SERVER_NAME>\n"})}),"\n",(0,i.jsx)(n.p,{children:"This command:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Generates DKG key material and stores it in ",(0,i.jsx)(n.code,{children:"dkg-state/"}),". Keep this directory secure."]}),"\n",(0,i.jsxs)(n.li,{children:["Appends ",(0,i.jsx)(n.code,{children:"DKG_ENC_PK"}),", ",(0,i.jsx)(n.code,{children:"DKG_SIGNING_PK"}),", ",(0,i.jsx)(n.code,{children:"MY_SERVER_URL"}),", ",(0,i.jsx)(n.code,{children:"MY_SERVER_NAME"}),", and ",(0,i.jsx)(n.code,{children:"MY_ADDRESS"})," (from ",(0,i.jsx)(n.code,{children:"sui client active-address"}),") to ",(0,i.jsx)(n.code,{children:"dkg.yaml"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Registers your public keys on-chain."}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Create and share your DKG message (Phase B: Message creation)"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Wait for the coordinator to announce ",(0,i.jsx)(n.strong,{children:"Phase B (Message creation)"}),". Then initialize your local DKG state and generate your message file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo run --bin seal-committee-cli -- create-message\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This command outputs a file named ",(0,i.jsx)(n.code,{children:"dkg-state/message_P.json"}),", where ",(0,i.jsx)(n.code,{children:"P"})," is your party ID. Share this file with the coordinator."]}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Process messages and propose the committee (Phase C: Finalization)"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Wait for the coordinator to announce ",(0,i.jsx)(n.strong,{children:"Phase C (Finalization)"})," and provide a directory containing messages (for example, ",(0,i.jsx)(n.code,{children:"path/to/dkg-messages"}),")."]}),"\n",(0,i.jsxs)(n.p,{children:["Move the directory into ",(0,i.jsx)(n.code,{children:"dkg-state"})," and process the messages:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mv path/to/dkg-messages dkg-state/\n\ncargo run --bin seal-committee-cli -- process-all-and-propose\n"})}),"\n",(0,i.jsx)(n.p,{children:"This command:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Processes all DKG messages from the directory."}),"\n",(0,i.jsxs)(n.li,{children:["Appends the following fields to ",(0,i.jsx)(n.code,{children:"dkg.yaml"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"KEY_SERVER_PK"}),": New key server public key."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"PARTIAL_PKS_V0"}),": Partial public keys for all members."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"MASTER_SHARE_V0"}),": Your master share, used to start the key server. Back it up securely and do not share it with anyone."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Proposes the committee on-chain by calling the ",(0,i.jsx)(n.code,{children:"propose"})," function."]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Configure and start your key server"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Wait for the coordinator to confirm that the DKG is complete and share the ",(0,i.jsx)(n.code,{children:"KEY_SERVER_OBJ_ID"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Create a ",(0,i.jsx)(n.code,{children:"key-server-config.yaml"})," file with your address (",(0,i.jsx)(n.code,{children:"MY_ADDRESS"}),") and the key server object ID (",(0,i.jsx)(n.code,{children:"KEY_SERVER_OBJ_ID"}),"), and set the committee state to active:"]}),"\n",(0,i.jsx)(n.p,{children:"Example config file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"server_mode: !Committee\n  member_address: '<MY_ADDRESS>'\n  key_server_obj_id: '<KEY_SERVER_OBJ_ID>'\n  committee_state: !Active\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Start the key server, setting the config path and your master key share from ",(0,i.jsx)(n.code,{children:"dkg.yaml"})," (use ",(0,i.jsx)(n.code,{children:"MASTER_SHARE_V0"})," for a fresh DKG):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"CONFIG_PATH=crates/key-server/key-server-config.yaml MASTER_SHARE_V0=0x... cargo run --bin key-server\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Generate API credentials for the aggregator"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"After your key server is running successfully, generate API credentials for aggregator access and share them with the coordinator."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Generate an ",(0,i.jsx)(n.strong,{children:"API key name"})," and ",(0,i.jsx)(n.strong,{children:"API key"})," for your key server."]}),"\n",(0,i.jsxs)(n.li,{children:["Share the following details with the coordinator:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Your server name (",(0,i.jsx)(n.code,{children:"MY_SERVER_NAME"})," from ",(0,i.jsx)(n.code,{children:"dkg.yaml"}),", corresponding to the on-chain ",(0,i.jsx)(n.code,{children:"PartialKeyServer.name"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"API key name"}),"\n",(0,i.jsx)(n.li,{children:"API key"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The coordinator passes these credentials to the aggregator operator, who uses them to authenticate requests to your key server."}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Backup and clean up local DKG state"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Once your key server is running successfully, back up the ",(0,i.jsx)(n.code,{children:"MASTER_SHARE_V0"})," value. Then you can safely delete the local DKG state directory:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"rm -rf dkg-state\n"})}),"\n",(0,i.jsx)(n.h2,{id:"key-rotation-process",children:"Key rotation process"}),"\n",(0,i.jsx)(n.p,{children:"Use key rotation to update the committee membership. When rotating a committee, the set of continuing members, including those present in both the current and next committee, must be large enough to meet the threshold of the current committee."}),"\n",(0,i.jsx)(n.p,{children:"This guide assumes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The current on-chain committee version is X, and"}),"\n",(0,i.jsx)(n.li,{children:"The rotation produces the next committee version X + 1."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"coordinator-runbook-1",children:"Coordinator runbook"}),"\n",(0,i.jsx)(n.p,{children:"Key rotation follows the same three-phase flow as a fresh DKG, with a few important differences outlined in the following sections."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Prepare DKG configuration"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["a. Create a clean working directory named ",(0,i.jsx)(n.code,{children:"dkg-state"})," and copy the rotation example configuration:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# in seal/\nrm -rf dkg-state && mkdir dkg-state\ncp crates/dkg-cli/dkg-rotation.example.yaml dkg-state/dkg.yaml\n"})}),"\n",(0,i.jsx)(n.p,{children:"b. Make sure your CLI has the expected network and active address with gas."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sui client active-env\nsui client active-address\n\n# switch if needed\nsui client switch --env testnet\nsui client switch --address 0x...\n"})}),"\n",(0,i.jsxs)(n.p,{children:["c. Collect the addresses of all members in the ",(0,i.jsx)(n.strong,{children:"new committee"})," (including continuing members). Open ",(0,i.jsx)(n.code,{children:"dkg-state/dkg.yaml"})," and update the following fields."]}),"\n",(0,i.jsxs)(n.p,{children:["You can obtain ",(0,i.jsx)(n.code,{children:"KEY_SERVER_OBJ_ID"})," from the key server configuration of any continuing member in the current committee."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"init-params:\n  NETWORK: Testnet # Target network\n  THRESHOLD: 3  # Threshold for the new committee (t of n)\n  MEMBERS:  # New committee members (may include continuing members)\n    - 0x...\n    - 0x...\n    - 0x...\n    - 0x...\n\n# Rotation only params\ninit-rotation-params:\n  KEY_SERVER_OBJ_ID: 0x...  # Key server object ID from the current committee\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Initialize the rotation"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Instead of running ",(0,i.jsx)(n.code,{children:"publish-and-init"}),", initialize the key rotation:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo run --bin seal-committee-cli -- init-rotation\n"})}),"\n",(0,i.jsx)(n.p,{children:"This command:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Fetches the current key server object to determine the existing committee ID and package ID."}),"\n",(0,i.jsx)(n.li,{children:"Initializes the new committee object on-chain."}),"\n",(0,i.jsxs)(n.li,{children:["Appends the following fields to the ",(0,i.jsx)(n.code,{children:"init-rotation"})," section in ",(0,i.jsx)(n.code,{children:"dkg.yaml"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"COORDINATOR_ADDRESS"}),": Address executing the rotation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"COMMITTEE_PKG"}),": Package ID of the committee contract"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CURRENT_COMMITTEE_ID"}),": Current committee object ID"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"COMMITTEE_ID"}),": New committee object ID"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["After the command completes, share the updated ",(0,i.jsx)(n.code,{children:"dkg.yaml"})," file with all members."]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Run Phases A\u2013C"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Proceed through ",(0,i.jsx)(n.strong,{children:"Phase A (Registration)"}),", ",(0,i.jsx)(n.strong,{children:"Phase B (Message creation)"}),", and ",(0,i.jsx)(n.strong,{children:"Phase C (Finalization)"})," using the ",(0,i.jsx)(n.strong,{children:"same steps as a fresh DKG"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"As the coordinator:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Announce the start of each phase to all members."}),"\n",(0,i.jsx)(n.li,{children:"Monitor progress during each phase."}),"\n",(0,i.jsx)(n.li,{children:"Announce completion once the key rotation finalizes on-chain."}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Update the aggregator configuration"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If new members join the committee during rotation, update the aggregator configuration to include them."}),"\n",(0,i.jsx)(n.p,{children:"The coordinator shares the following information with the aggregator operator for each new committee member:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The on-chain server name (the ",(0,i.jsx)(n.code,{children:"PartialKeyServer.name"})," field)"]}),"\n",(0,i.jsx)(n.li,{children:"The API key name"}),"\n",(0,i.jsx)(n.li,{children:"The API key"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The aggregator operator updates the configuration with the new member entries and restarts the aggregator server. For details on updating and restarting the aggregator, see ",(0,i.jsx)(n.a,{href:"/Aggregator",children:"Aggregator Server"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"member-runbook-1",children:"Member runbook"}),"\n",(0,i.jsx)(n.p,{children:"Follow these steps to participate as a member in a key rotation."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Share your address with the coordinator"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Share your wallet address (",(0,i.jsx)(n.code,{children:"MY_ADDRESS"}),") with the coordinator. This address is used for all on-chain actions during the rotation."]}),"\n",(0,i.jsx)(n.p,{children:"Make sure:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Your wallet is connected to the correct network."}),"\n",(0,i.jsx)(n.li,{children:"You have enough gas to submit transactions."}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Generate keys and register (Phase A: Registration)"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Wait for the coordinator to announce ",(0,i.jsx)(n.strong,{children:"Phase A (Registration)"})," and send you the ",(0,i.jsx)(n.code,{children:"dkg.yaml"})," file. The file includes ",(0,i.jsx)(n.code,{children:"COMMITTEE_PKG"}),", ",(0,i.jsx)(n.code,{children:"CURRENT_COMMITTEE_ID"}),", and ",(0,i.jsx)(n.code,{children:"COMMITTEE_ID"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Create a local working directory named ",(0,i.jsx)(n.code,{children:"dkg-state"})," and move the file there:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# in seal/\nrm -rf dkg-state && mkdir dkg-state\nmv path/to/dkg.yaml dkg-state/\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Open ",(0,i.jsx)(n.code,{children:"dkg.yaml"})," and verify the committee configuration (member addresses, threshold, committee ID) using a Sui Explorer."]}),"\n",(0,i.jsx)(n.p,{children:"Then run the command to generate your keys and register them on-chain by providing your server URL and name:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo run --bin seal-committee-cli -- genkey-and-register \\\n  -u <YOUR_SERVER_URL> \\\n  -n <YOUR_SERVER_NAME>\n"})}),"\n",(0,i.jsx)(n.p,{children:"This command:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Generates sensitive key material and stores it in ",(0,i.jsx)(n.code,{children:"dkg-state/"}),". Keep this directory secure."]}),"\n",(0,i.jsxs)(n.li,{children:["Appends ",(0,i.jsx)(n.code,{children:"DKG_ENC_PK"}),", ",(0,i.jsx)(n.code,{children:"DKG_SIGNING_PK"}),", ",(0,i.jsx)(n.code,{children:"MY_SERVER_URL"}),", ",(0,i.jsx)(n.code,{children:"MY_SERVER_NAME"}),", and ",(0,i.jsx)(n.code,{children:"MY_ADDRESS"})," (from ",(0,i.jsx)(n.code,{children:"sui client active-address"}),") to ",(0,i.jsx)(n.code,{children:"dkg.yaml"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Registers your public keys on-chain."}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Create and share your DKG message (Phase B: Message creation)"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Wait for the coordinator to announce ",(0,i.jsx)(n.strong,{children:"Phase B (Message creation)"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"For continuing members"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:["Initialize your DKG state and generate your message file. You must pass your current master share (",(0,i.jsx)(n.code,{children:"MASTER_SHARE_VX"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo run --bin seal-committee-cli -- create-message -o <MASTER_SHARE_VX>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This command outputs ",(0,i.jsx)(n.code,{children:"dkg-state/message_P.json"}),", where ",(0,i.jsx)(n.code,{children:"P"})," is your party ID. Share this file with the coordinator."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"For new members"}),":"]}),"\n",(0,i.jsx)(n.p,{children:"Initialize your DKG state. No message file is generated (new members don't create messages during rotation)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo run --bin seal-committee-cli -- init-state\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Process messages and propose the rotation (Phase C: Finalization)"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Wait for the coordinator to announce ",(0,i.jsx)(n.strong,{children:"Phase C (Finalization)"})," and provide a directory containing all DKG messages (for example, ",(0,i.jsx)(n.code,{children:"path/to/dkg-messages"}),")."]}),"\n",(0,i.jsxs)(n.p,{children:["Move the directory into ",(0,i.jsx)(n.code,{children:"dkg-state"})," and process the messages:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mv path/to/dkg-messages dkg-state/\n\ncargo run --bin seal-committee-cli -- process-all-and-propose\n"})}),"\n",(0,i.jsx)(n.p,{children:"This command:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Processes all messages from the directory."}),"\n",(0,i.jsxs)(n.li,{children:["Appends the following fields to ",(0,i.jsx)(n.code,{children:"dkg.yaml"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"PARTIAL_PKS_VX+1"}),": New partial public keys for all members."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"MASTER_SHARE_VX+1"}),": Your new master share, used to start the key server. Back it up securely and do not share it with anyone."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Proposes the rotation on-chain by calling ",(0,i.jsx)(n.code,{children:"propose_for_rotation"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Start or update your key server"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Update ",(0,i.jsx)(n.code,{children:"key-server-config.yaml"})," to ",(0,i.jsx)(n.strong,{children:"Rotation"})," mode and set the target committee version to ",(0,i.jsx)(n.code,{children:"X + 1"}),". Leave other settings unchanged."]}),"\n",(0,i.jsx)(n.p,{children:"Example config file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"server_mode: !Committee\n  member_address: '<MY_ADDRESS>'\n  key_server_obj_id: '<KEY_SERVER_OBJ_ID>'\n  committee_state: !Rotation\n    target_version: <X+1> # Increment this\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"For continuing members:"})}),"\n",(0,i.jsx)(n.p,{children:"a. Restart the key server with both the old and new master shares. The server monitors on-chain state and selects the correct share automatically."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"CONFIG_PATH=crates/key-server/key-server-config.yaml \\\n  MASTER_SHARE_VX=<MASTER_SHARE_VX> \\\n  MASTER_SHARE_VX+1=<MASTER_SHARE_VX+1> \\\n  cargo run --bin key-server\n"})}),"\n",(0,i.jsxs)(n.p,{children:["b. Wait for the coordinator to confirm that rotation is complete. Then update the config to ",(0,i.jsx)(n.strong,{children:"Active"})," mode and restart the server with only the new master share:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"server_mode: !Committee\n  member_address: '<MY_ADDRESS>'\n  key_server_obj_id: '<KEY_SERVER_OBJ_ID>'\n  committee_state: !Active\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"CONFIG_PATH=crates/key-server/key-server-config.yaml \\\n  MASTER_SHARE_VX+1=<MASTER_SHARE_VX+1> \\\n  cargo run --bin key-server\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"For new members:"})}),"\n",(0,i.jsxs)(n.p,{children:["Since ",(0,i.jsx)(n.code,{children:"X + 1"})," is your first committee version, start the key server directly in ",(0,i.jsx)(n.strong,{children:"Active"})," mode using only ",(0,i.jsx)(n.code,{children:"MASTER_SHARE_VX+1"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"server_mode: !Committee\n  member_address: '<MY_ADDRESS>'\n  key_server_obj_id: '<KEY_SERVER_OBJ_ID>'\n  committee_state: !Active\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"CONFIG_PATH=crates/key-server/key-server-config.yaml \\\n  MASTER_SHARE_VX+1=<MASTER_SHARE_VX+1> \\\n  cargo run --bin key-server\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Generate API credentials for the aggregator (new members only)"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If you are joining the committee as a new member during rotation, generate API credentials after your key server is up and running and share them with the coordinator."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Generate an ",(0,i.jsx)(n.strong,{children:"API key name"})," and ",(0,i.jsx)(n.strong,{children:"API key"})," for your key server."]}),"\n",(0,i.jsxs)(n.li,{children:["Share the following with the coordinator:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Your server name (",(0,i.jsx)(n.code,{children:"MY_SERVER_NAME"})," from ",(0,i.jsx)(n.code,{children:"dkg.yaml"}),", corresponding to the on-chain ",(0,i.jsx)(n.code,{children:"PartialKeyServer.name"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"API key name"}),"\n",(0,i.jsx)(n.li,{children:"API key"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The coordinator forwards these credentials to the aggregator operator to update the aggregator configuration."}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"Continuing members typically do not need to share new credentials, since their existing API keys should already be configured in the aggregator. Share new credentials only if you are rotating your API keys."})}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Backup and clean up local DKG state"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Once your key server is running successfully, back up the ",(0,i.jsx)(n.code,{children:"MASTER_SHARE_VX+1"})," value. Then you can safely delete the local DKG state directory:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"rm -rf dkg-state\n"})}),"\n",(0,i.jsx)(n.h2,{id:"quick-reference-fresh-dkg-vs-key-rotation",children:"Quick reference: Fresh DKG vs Key rotation"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Aspect"}),(0,i.jsx)(n.th,{children:"Fresh DKG"}),(0,i.jsx)(n.th,{children:"Key rotation"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Purpose"}),(0,i.jsx)(n.td,{children:"Create a brand-new committee and keys"}),(0,i.jsx)(n.td,{children:"Update committee membership or threshold"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Committee version"}),(0,i.jsxs)(n.td,{children:["Starts at ",(0,i.jsx)(n.code,{children:"V0"})]}),(0,i.jsxs)(n.td,{children:["Rotates from ",(0,i.jsx)(n.code,{children:"VX"})," to ",(0,i.jsx)(n.code,{children:"VX+1"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Coordinator init command"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"publish-and-init"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"init-rotation"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Continuing members required"}),(0,i.jsx)(n.td,{children:"N/A"}),(0,i.jsx)(n.td,{children:"Must meet current threshold"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Member Phase B command"}),(0,i.jsxs)(n.td,{children:["All members: ",(0,i.jsx)(n.code,{children:"create-message"})]}),(0,i.jsxs)(n.td,{children:["Continuing members: ",(0,i.jsx)(n.code,{children:"create-message -o <OLD_SHARE>"}),(0,i.jsx)("br",{}),"New members: ",(0,i.jsx)(n.code,{children:"init-state"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Old master share needed"}),(0,i.jsx)(n.td,{children:"N/A"}),(0,i.jsxs)(n.td,{children:["Yes (continuing members must provide via ",(0,i.jsx)(n.code,{children:"-o"})," flag)"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Message creation"}),(0,i.jsx)(n.td,{children:"All members create messages"}),(0,i.jsx)(n.td,{children:"Only continuing members create messages"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Key server startup"}),(0,i.jsxs)(n.td,{children:["Start with ",(0,i.jsx)(n.code,{children:"MASTER_SHARE_V0"})]}),(0,i.jsxs)(n.td,{children:["Transition from ",(0,i.jsx)(n.code,{children:"MASTER_SHARE_VX"})," to ",(0,i.jsx)(n.code,{children:"MASTER_SHARE_VX+1"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"on-chain proposal function"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"propose"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"propose_for_rotation"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Result"}),(0,i.jsx)(n.td,{children:"New key server object"}),(0,i.jsx)(n.td,{children:"Updated key server object's version"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453(e,n,r){r.d(n,{R:()=>o,x:()=>a});var s=r(6540);const i={},t=s.createContext(i);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);