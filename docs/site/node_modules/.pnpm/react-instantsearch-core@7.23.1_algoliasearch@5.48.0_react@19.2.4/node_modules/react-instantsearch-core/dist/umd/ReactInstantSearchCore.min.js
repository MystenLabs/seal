/*! React InstantSearchCore UNRELEASED | Â© Algolia, inc. | https://github.com/algolia/instantsearch */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactInstantSearchCore={},e.React)}(this,function(e,b){"use strict";var c="default"in b?b.default:b,N="7.23.1";function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function W(e,t,r){(t=function(e){e=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function H(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function $(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?H(Object(r),!0).forEach(function(e){W(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function L(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?M(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var q=r;function B(e){return"function"==typeof e}function V(e){return"object"==typeof e&&null!==e}function J(e){return void 0===e}r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,n,i,a,o,s;if((this._events||(this._events={}),"error"===e)&&(!this._events.error||V(this._events.error)&&!this._events.error.length))throw(s=arguments[1])instanceof Error?s:((o=new Error('Uncaught, unspecified "error" event. ('+s+")")).context=s,o);if(J(t=this._events[e]))return!1;if(B(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),t.apply(this,n)}else if(V(t))for(n=Array.prototype.slice.call(arguments,1),r=(a=t.slice()).length,i=0;i<r;i++)a[i].apply(this,n);return!0},r.prototype.on=r.prototype.addListener=function(e,t){if(B(t))return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,B(t.listener)?t.listener:t),this._events[e]?V(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,V(this._events[e])&&!this._events[e].warned&&(t=J(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<t&&this._events[e].length>t&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace)&&console.trace(),this;throw TypeError("listener must be a function")},r.prototype.once=function(e,t){var r;if(B(t))return r=!1,n.listener=t,this.on(e,n),this;throw TypeError("listener must be a function");function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}},r.prototype.removeListener=function(e,t){var r,n,i,a;if(!B(t))throw TypeError("listener must be a function");if(this._events&&this._events[e])if(i=(r=this._events[e]).length,n=-1,r===t||B(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(V(r)){for(a=i;0<a--;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(this._events)if(this._events.removeListener)if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);this.removeAllListeners("removeListener"),this._events={}}else{if(B(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);delete this._events[e]}else 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e];return this},r.prototype.listeners=function(e){e=this._events&&this._events[e]?B(this._events[e])?[this._events[e]]:this._events[e].slice():[];return e},r.prototype.listenerCount=function(e){if(this._events){e=this._events[e];if(B(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)};var z=function(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})};function K(e,t,r){this.main=e,this.fn=t,this.recommendFn=r,this.lastResults=null,this.lastRecommendResults=null}z(K,q),K.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},K.prototype.getModifiedState=function(e){return this.fn(e)},K.prototype.getModifiedRecommendState=function(e){return this.recommendFn(e)};var X=K;var G=function(e){return"string"!=typeof e?e:String(e).replace(/^-/,"\\-")},Y=function(e){return"string"!=typeof e?e:e.replace(/^\\-/,"-")};function Z(e){return"function"==typeof e||Array.isArray(e)||"[object Object]"===Object.prototype.toString.call(e)}function ee(e,t){var r,n;if(e!==t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&"__proto__"!==i&&"constructor"!==i&&(r=t[i],void 0!==(n=e[i])&&void 0===r||(Z(n)&&Z(r)?e[i]=ee(n,r):e[i]="object"==typeof(n=r)&&null!==n?ee(Array.isArray(n)?[]:{},n):n));return e}var te=function(e){Z(e)||(e={});for(var t=1,r=arguments.length;t<r;t++){var n=arguments[t];Z(n)&&ee(e,n)}return e};var re=function(e){return e&&0<Object.keys(e).length};var ne=function(e,t){if(null===e)return{};for(var r,n={},i=Object.keys(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||(n[r]=e[r]);return n};function ie(e){this.params=(e=e||{}).params||[]}ie.prototype={constructor:ie,addParams:function(e){var t=this.params.slice();return t.push(e),new ie({params:t})},removeParams:function(t){return new ie({params:this.params.filter(function(e){return e.$$id!==t})})},addFrequentlyBoughtTogether:function(e){return this.addParams(Object.assign({},e,{model:"bought-together"}))},addRelatedProducts:function(e){return this.addParams(Object.assign({},e,{model:"related-products"}))},addTrendingItems:function(e){return this.addParams(Object.assign({},e,{model:"trending-items"}))},addTrendingFacets:function(e){return this.addParams(Object.assign({},e,{model:"trending-facets"}))},addLookingSimilar:function(e){return this.addParams(Object.assign({},e,{model:"looking-similar"}))},_buildQueries:function(t,r){return this.params.filter(function(e){return void 0===r[e.$$id]}).map(function(e){e=Object.assign({},e,{indexName:t,threshold:e.threshold||0});return delete e.$$id,e})}};var ae=ie;function oe(e,t){this._state=e,this._rawResults={};var r=this;e.params.forEach(function(e){e=e.$$id;r[e]=t[e],r._rawResults[e]=t[e]})}oe.prototype={constructor:oe};var se=oe;function ce(r){return Object.keys(r).sort().reduce(function(e,t){return e[t]=r[t],e},{})}function ue(){return Array.prototype.slice.call(arguments).reduceRight(function(t,r){return Object.keys(Object(r)).forEach(function(e){void 0!==r[e]&&(void 0!==t[e]&&delete t[e],t[e]=r[e])}),t},{})}var l={_getQueries:function(s,c){var u=[];return u.push({indexName:s,params:l._getHitsSearchParams(c)}),c.getRefinedDisjunctiveFacets().forEach(function(e){u.push({indexName:s,params:l._getDisjunctiveFacetSearchParams(c,e)})}),c.getRefinedHierarchicalFacets().forEach(function(e){var a,o=c.getHierarchicalFacetByName(e),e=c.getHierarchicalRefinement(e),n=c._getHierarchicalFacetSeparator(o);0<e.length&&1<e[0].split(n).length&&(a=e[0].split(n).slice(0,-1).reduce(function(e,t,r){return e.concat({attribute:o.attributes[r],value:0===r?t:[e[e.length-1].value,t].join(n)})},[])).forEach(function(e,t){e=l._getDisjunctiveFacetSearchParams(c,e.attribute,0===t);function n(t){return o.attributes.some(function(e){return e===t.split(":")[0]})}var r=(e.facetFilters||[]).reduce(function(e,t){var r;return Array.isArray(t)&&0<(r=t.filter(function(e){return!n(e)})).length&&e.push(r),"string"!=typeof t||n(t)||e.push(t),e},[]),i=a[t-1];0<t?e.facetFilters=r.concat(i.attribute+":"+i.value):0<r.length?e.facetFilters=r:delete e.facetFilters,u.push({indexName:s,params:e})})}),u},_getCompositionQueries:function(e){return[{compositionID:e.index,requestBody:{params:l._getCompositionHitsSearchParams(e)}}]},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(l._getHitsHierarchicalFacetsAttributes(e)).sort(),r=l._getFacetFilters(e),n=l._getNumericFilters(e),i=l._getTagFilters(e),a={};return 0<t.length&&(a.facets=-1<t.indexOf("*")?["*"]:t),0<i.length&&(a.tagFilters=i),0<r.length&&(a.facetFilters=r),0<n.length&&(a.numericFilters=n),ce(te({},e.getQueryParams(),a))},_getCompositionHitsSearchParams:function(t){var e=t.facets.concat(t.disjunctiveFacets.map(function(e){return t.disjunctiveFacetsRefinements&&t.disjunctiveFacetsRefinements[e]&&0<t.disjunctiveFacetsRefinements[e].length?"disjunctive("+e+")":e})).concat(l._getHitsHierarchicalFacetsAttributes(t)).sort(),r=l._getFacetFilters(t),n=l._getNumericFilters(t),i=l._getTagFilters(t),a={},e=(0<e.length&&(a.facets=-1<e.indexOf("*")?["*"]:e),0<i.length&&(a.tagFilters=i),0<r.length&&(a.facetFilters=r),0<n.length&&(a.numericFilters=n),t.getQueryParams());return delete e.highlightPreTag,delete e.highlightPostTag,delete e.index,ce(te({},e,a))},_getDisjunctiveFacetSearchParams:function(e,t,r){var n=l._getFacetFilters(e,t,r),i=l._getNumericFilters(e,t),a=l._getTagFilters(e),o={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1},a=(0<a.length&&(o.tagFilters=a),e.getHierarchicalFacetByName(t));return o.facets=a?l._getDisjunctiveHierarchicalFacetAttribute(e,a,r):t,0<i.length&&(o.numericFilters=i),0<n.length&&(o.facetFilters=n),ce(te({},e.getQueryParams(),o))},_getNumericFilters:function(e,i){var a;return e.numericFilters||(a=[],Object.keys(e.numericRefinements).forEach(function(n){var t=e.numericRefinements[n]||{};Object.keys(t).forEach(function(r){var e=t[r]||[];i!==n&&e.forEach(function(e){var t;Array.isArray(e)?(t=e.map(function(e){return n+r+e}),a.push(t)):a.push(n+r+e)})})}),a)},_getTagFilters:function(e){return e.tagFilters||e.tagRefinements.join(",")},_getFacetFilters:function(o,s,c){var u=[],e=o.facetsRefinements||{},r=(Object.keys(e).sort().forEach(function(t){(e[t]||[]).slice().sort().forEach(function(e){u.push(t+":"+e)})}),o.facetsExcludes||{}),n=(Object.keys(r).sort().forEach(function(t){(r[t]||[]).sort().forEach(function(e){u.push(t+":-"+e)})}),o.disjunctiveFacetsRefinements||{}),l=(Object.keys(n).sort().forEach(function(t){var r,e=n[t]||[];t!==s&&e&&0!==e.length&&(r=[],e.slice().sort().forEach(function(e){r.push(t+":"+e)}),u.push(r))}),o.hierarchicalFacetsRefinements||{});return Object.keys(l).sort().forEach(function(e){var t=(l[e]||[])[0];if(void 0!==t){var r,n=o.getHierarchicalFacetByName(e),i=o._getHierarchicalFacetSeparator(n),a=o._getHierarchicalRootPath(n);if(s===e){if(-1===t.indexOf(i)||!a&&!0===c||a&&a.split(i).length===t.split(i).length)return;t=a?(r=a.split(i).length-1,a):(r=t.split(i).length-2,t.slice(0,t.lastIndexOf(i)))}else r=t.split(i).length-1;(e=n.attributes[r])&&u.push([e+":"+t])}}),u},_getHitsHierarchicalFacetsAttributes:function(i){return i.hierarchicalFacets.reduce(function(e,t){var r,n=i.getHierarchicalRefinement(t.name)[0];return n?(r=i._getHierarchicalFacetSeparator(t),n=n.split(r).length,r=t.attributes.slice(0,n+1),e.concat(r)):(e.push(t.attributes[0]),e)},[])},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,r){var n,i=e._getHierarchicalFacetSeparator(t);return!0===r?(r=0,(n=e._getHierarchicalRootPath(t))&&(r=n.split(i).length),[t.attributes[r]]):(n=(e.getHierarchicalRefinement(t.name)[0]||"").split(i).length-1,t.attributes.slice(0,1+n))},getSearchForFacetQuery:function(e,t,r,n){n=n.isDisjunctiveFacet(e)?n.clearRefinements(e):n,t={facetQuery:t,facetName:e};return"number"==typeof r&&(t.maxFacetHits=r),ce(te({},l._getHitsSearchParams(n),t))}},le=l,p=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)if(t(e[r]))return e[r]};var fe=function(r,n){return r.filter(function(e,t){return-1<n.indexOf(e)&&r.indexOf(e)===t})};var de=function e(t){if("number"==typeof t)return t;if("string"==typeof t)return parseFloat(t);if(Array.isArray(t))return t.map(e);throw new Error("The value should be a number, a parsable string or an array of those.")},he={addRefinement:function(e,t,r){var n;return he.isRefined(e,t,r)?e:(r=""+r,r=e[t]?e[t].concat(r):[r],(n={})[t]=r,ue(n,e))},removeRefinement:function(e,r,t){var n;return void 0===t?he.clearRefinement(e,function(e,t){return r===t}):(n=""+t,he.clearRefinement(e,function(e,t){return r===t&&n===e}))},toggleRefinement:function(e,t,r){if(void 0===r)throw new Error("toggleRefinement should be used with a value");return he.isRefined(e,t,r)?he.removeRefinement(e,t,r):he.addRefinement(e,t,r)},clearRefinement:function(i,a,o){var s,e;return void 0===a?re(i)?{}:i:"string"==typeof a?ne(i,[a]):"function"==typeof a?(s=!1,e=Object.keys(i).reduce(function(e,t){var r=i[t]||[],n=r.filter(function(e){return!a(e,t,o)});return n.length!==r.length&&(s=!0),e[t]=n,e},{}),s?e:i):void 0},isRefined:function(e,t,r){var n=Boolean(e[t])&&0<e[t].length;return void 0!==r&&n?-1!==e[t].indexOf(""+r):n}},n=he;function me(e,r){return Array.isArray(e)&&Array.isArray(r)?e.length===r.length&&e.every(function(e,t){return me(r[t],e)}):e===r}function o(e){var n=e?o._parseNumbers(e):{},i=(void 0===n.userToken||null!==(e=n.userToken)&&/^[a-zA-Z0-9_-]{1,64}$/.test(e)||console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=n.facets||[],this.disjunctiveFacets=n.disjunctiveFacets||[],this.hierarchicalFacets=n.hierarchicalFacets||[],this.facetsRefinements=n.facetsRefinements||{},this.facetsExcludes=n.facetsExcludes||{},this.disjunctiveFacetsRefinements=n.disjunctiveFacetsRefinements||{},this.numericRefinements=n.numericRefinements||{},this.tagRefinements=n.tagRefinements||[],this.hierarchicalFacetsRefinements=n.hierarchicalFacetsRefinements||{},this);Object.keys(n).forEach(function(e){var t=-1!==o.PARAMETERS.indexOf(e),r=void 0!==n[e];!t&&r&&(i[e]=n[e])})}o.PARAMETERS=Object.keys(new o),o._parseNumbers=function(i){var n,a;return i instanceof o?i:(n={},["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"].forEach(function(e){var t,r=i[e];"string"==typeof r&&(t=parseFloat(r),n[e]=isNaN(t)?r:t)}),Array.isArray(i.insideBoundingBox)&&(n.insideBoundingBox=i.insideBoundingBox.map(function(e){return Array.isArray(e)?e.map(function(e){return parseFloat(e)}):e})),i.numericRefinements&&(a={},Object.keys(i.numericRefinements).forEach(function(r){var n=i.numericRefinements[r]||{};a[r]={},Object.keys(n).forEach(function(e){var t=n[e].map(function(e){return Array.isArray(e)?e.map(function(e){return"string"==typeof e?parseFloat(e):e}):"string"==typeof e?parseFloat(e):e});a[r][e]=t})}),n.numericRefinements=a),te(i,n))},o.make=function(e){var r=new o(e);return(e.hierarchicalFacets||[]).forEach(function(e){var t;e.rootPath&&0===(t=(r=0<(t=r.getHierarchicalRefinement(e.name)).length&&0!==t[0].indexOf(e.rootPath)?r.clearRefinements(e.name):r).getHierarchicalRefinement(e.name)).length&&(r=r.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}),r},o.validate=function(e,t){t=t||{};return e.tagFilters&&t.tagRefinements&&0<t.tagRefinements.length?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):0<e.tagRefinements.length&&t.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&t.numericRefinements&&re(t.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):re(e.numericRefinements)&&t.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},o.prototype={constructor:o,clearRefinements:function(e){e={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:n.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:n.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:n.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:n.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return e.numericRefinements===this.numericRefinements&&e.facetsRefinements===this.facetsRefinements&&e.facetsExcludes===this.facetsExcludes&&e.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&e.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(e)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,r){var n,r=de(r);return this.isNumericRefined(e,t,r)?this:((n=te({},this.numericRefinements))[e]=te({},n[e]),n[e][t]?(n[e][t]=n[e][t].slice(),n[e][t].push(r)):n[e][t]=[r],this.setQueryParameters({numericRefinements:n}))},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)&&this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsExcludes[e]||[]},removeNumericRefinement:function(r,n,e){var i=e;return void 0!==i?this.isNumericRefined(r,n,i)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r&&e.op===n&&me(e.val,de(i))})}):this:void 0!==n?this.isNumericRefined(r,n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r&&e.op===n})}):this:this.isNumericRefined(r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(o){var s,t,e;return void 0===o?re(this.numericRefinements)?{}:this.numericRefinements:"string"==typeof o?ne(this.numericRefinements,[o]):"function"==typeof o?(s=!1,t=this.numericRefinements,e=Object.keys(t).reduce(function(e,n){var i=t[n],a={},i=i||{};return Object.keys(i).forEach(function(t){var e=i[t]||[],r=[];e.forEach(function(e){o({val:e,op:t},n,"numeric")||r.push(e)}),r.length!==e.length&&(s=!0),a[t]=r}),e[n]=a,e},{}),s?e:this.numericRefinements):void 0},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:n.addRefinement(this.facetsRefinements,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},addExcludeRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:n.addRefinement(this.facetsExcludes,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},addDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return n.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:n.addRefinement(this.disjunctiveFacetsRefinements,e,t)});throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},addTagRefinement:function(e){return this.isTagRefined(e)?this:(e={tagRefinements:this.tagRefinements.concat(e)},this.setQueryParameters(e))},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:this.facets.filter(function(e){return e!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(e){return e!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(e){return e.name!==t})}):this},removeFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:n.removeRefinement(this.facetsRefinements,e,t)}):this;throw new Error(e+" is not defined in the facets attribute of the helper configuration")},removeExcludeRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:n.removeRefinement(this.facetsExcludes,e,t)}):this;throw new Error(e+" is not defined in the facets attribute of the helper configuration")},removeDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return n.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:n.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this;throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},removeTagRefinement:function(t){var e;return this.isTagRefined(t)?(e={tagRefinements:this.tagRefinements.filter(function(e){return e!==t})},this.setQueryParameters(e)):this},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return this.setQueryParameters({facetsRefinements:n.toggleRefinement(this.facetsRefinements,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},toggleExcludeFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return this.setQueryParameters({facetsExcludes:n.toggleRefinement(this.facetsExcludes,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},toggleDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return this.setQueryParameters({disjunctiveFacetsRefinements:n.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)});throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},toggleHierarchicalFacetRefinement:function(e,t){var r,n;if(this.isHierarchicalFacet(e))return r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),n={},void 0!==this.hierarchicalFacetsRefinements[e]&&0<this.hierarchicalFacetsRefinements[e].length&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+r))?-1===t.indexOf(r)?n[e]=[]:n[e]=[t.slice(0,t.lastIndexOf(r))]:n[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:ue(n,this.hierarchicalFacetsRefinements)});throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration")},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");var r;if(this.isHierarchicalFacet(e))return(r={})[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:ue(r,this.hierarchicalFacetsRefinements)});throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.")},removeHierarchicalFacetRefinement:function(e){var t;return this.isHierarchicalFacetRefined(e)?((t={})[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:ue(t,this.hierarchicalFacetsRefinements)})):this},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return-1<this.disjunctiveFacets.indexOf(e)},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return-1<this.facets.indexOf(e)},isFacetRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&n.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&n.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){return!!this.isDisjunctiveFacet(e)&&n.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){return!!this.isHierarchicalFacet(e)&&(e=this.getHierarchicalRefinement(e),t?-1!==e.indexOf(t):0<e.length)},isNumericRefined:function(e,t,r){var n,i;return void 0===r&&void 0===t?Boolean(this.numericRefinements[e]):(n=this.numericRefinements[e]&&void 0!==this.numericRefinements[e][t],void 0!==r&&n?(r=de(r),t=void 0!==(e=this.numericRefinements[e][t],i=r,p(e,function(e){return me(e,i)})),n&&t):n)},isTagRefined:function(e){return-1!==this.tagRefinements.indexOf(e)},getRefinedDisjunctiveFacets:function(){var t=this,e=fe(Object.keys(this.numericRefinements).filter(function(e){return 0<Object.keys(t.numericRefinements[e]).length}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(e){return 0<t.disjunctiveFacetsRefinements[e].length}).concat(e).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var t=this;return fe(this.hierarchicalFacets.map(function(e){return e.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(e){return 0<t.hierarchicalFacetsRefinements[e].length})).sort()},getUnrefinedDisjunctiveFacets:function(){var t=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(e){return-1===t.indexOf(e)})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var r=this.managedParameters,n={},i=this;return Object.keys(this).forEach(function(e){var t=i[e];-1===r.indexOf(e)&&void 0!==t&&(n[e]=t)}),n},setQueryParameter:function(e,t){var r;return this[e]===t?this:((r={})[e]=t,this.setQueryParameters(r))},setQueryParameters:function(e){if(!e)return this;var t=o.validate(this,e);if(t)throw t;var r=this,i=o._parseNumbers(e),t=Object.keys(this).reduce(function(e,t){return e[t]=r[t],e},{}),e=Object.keys(i).reduce(function(e,t){var r=void 0!==e[t],n=void 0!==i[t];return r&&!n?ne(e,[t]):(n&&(e[t]=i[t]),e)},t);return new this.constructor(e)},resetPage:function(){return void 0===this.page?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(t){return p(this.hierarchicalFacets,function(e){return e.name===t})},getHierarchicalFacetBreadcrumb:function(e){var t;return this.isHierarchicalFacet(e)&&(t=this.getHierarchicalRefinement(e)[0])?(e=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),t.split(e).map(function(e){return e.trim()})):[]},toString:function(){return JSON.stringify(this,null,2)}};function pe(e){return Array.isArray(e)?e.filter(Boolean):[]}function ye(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function ge(e,t){var n=(t||[]).map(function(e){return e.split(":")});return e.reduce(function(e,t){var r=t.split(":"),t=p(n,function(e){return e[0]===r[0]});return 1<r.length||!t?(e[0].push(r[0]),e[1].push(r[1])):(e[0].push(t[0]),e[1].push(t[1])),e},[[],[]])}var ve=o;var be=function(){return Array.prototype.slice.call(arguments).reduceRight(function(n,i){return Object.keys(Object(i)).forEach(function(e){var t="number"==typeof n[e]?n[e]:0,r=i[e];void 0!==r&&t<=r&&(void 0!==n[e]&&delete n[e],n[e]=r)}),n},{})};var Se=function(e,r,i){return Array.isArray(e)?(Array.isArray(i)||(i=[]),(e=e.map(function(t,e){return{criteria:r.map(function(e){return t[e]}),index:e,value:t}})).sort(function(e,t){for(var r=-1;++r<e.criteria.length;){var n=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=void 0!==t,a=null===t;if(!a&&t<e||n&&i||!r)return 1;if(!n&&e<t||a&&r||!i)return-1}return 0}(e.criteria[r],t.criteria[r]);if(n)return!(r>=i.length)&&"desc"===i[r]?-n:n}return e.index-t.index}),e.map(function(e){return e.value})):[]},Oe=function(m){return function(e,t){function r(e,o,t){var r,s=e;if(0<t){var n=0;for(s=e;n<t;){var i=s&&Array.isArray(s.data)?s.data:[],s=p(i,function(e){return e.isRefined});n++}}return s&&(r=Object.keys(o.data).map(function(e){return[e,o.data[e]]}).filter(function(e){var t,r,n,i,a,e=e[0];return e=e,t=s.path||u,r=f,n=c,a=l,(!(i=u)||0===e.indexOf(i)&&i!==e)&&(!i&&-1===e.indexOf(n)||i&&e.split(n).length-i.split(n).length==1||-1===e.indexOf(n)&&-1===r.indexOf(n)||0===r.indexOf(e)||0===e.indexOf(t+n)&&(a||0===e.indexOf(r)))}),s.data=Se(r.map(function(e){var t,r,n,i,a=e[0],e=e[1];return e=e,a=a,t=c,r=we(f),n=o.exhaustive,{name:(i=a.split(t))[i.length-1].trim(),path:a,escapedValue:je(a),count:e,isRefined:r===a||0===r.indexOf(a+t),exhaustive:n,data:null}}),a[0],a[1])),e}var a,c,u,l,f,n=m.hierarchicalFacets[t],i=m.hierarchicalFacetsRefinements[n.name]&&m.hierarchicalFacetsRefinements[n.name][0]||"",o=m._getHierarchicalFacetSeparator(n),s=m._getHierarchicalRootPath(n),d=m._getHierarchicalShowParentLevel(n),n=ge(m._getHierarchicalFacetSortBy(n)),h=e.every(function(e){return e.exhaustive}),n=(a=n,c=o,l=d,f=i,e);return(n=(u=s)?e.slice(s.split(o).length):n).reduce(r,{name:m.hierarchicalFacets[t].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:h,data:null})}},je=G,we=Y;var Pe=G,Re=Y;function Ee(e){var r={};return e.forEach(function(e,t){r[e]=t}),r}function xe(e,t,r){t&&t[r]&&(e.stats=t[r])}function Ie(l,t,e){var s=t[0]||{},f=(this._rawResults=t,this),r=(Object.keys(s).forEach(function(e){f[e]=s[e]}),ue(e,{persistHierarchicalRootCount:!1})),e=(Object.keys(r).forEach(function(e){f[e]=r[e]}),this.processingTimeMS=t.reduce(function(e,t){return void 0===t.processingTimeMS?e:e+t.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=l.hierarchicalFacets.map(function(){return[]}),this.facets=[],l.getRefinedDisjunctiveFacets()),c=Ee(l.facets),u=Ee(l.disjunctiveFacets),n=1,d=s.facets||{};Object.keys(d).forEach(function(e){var t,r,n,i,a=d[e],o=(n=l.hierarchicalFacets,t=e,p(n,function(e){return-1<(e.attributes||[]).indexOf(t)}));o?(n=o.attributes.indexOf(e),r=ye(l.hierarchicalFacets,function(e){return e.name===o.name}),f.hierarchicalFacets[r][n]={attribute:e,data:a,exhaustive:s.exhaustiveFacetsCount}):(r=-1!==l.disjunctiveFacets.indexOf(e),n=-1!==l.facets.indexOf(e),r&&(i=u[e],f.disjunctiveFacets[i]={name:e,data:a,exhaustive:s.exhaustiveFacetsCount},xe(f.disjunctiveFacets[i],s.facets_stats,e)),n&&(i=c[e],f.facets[i]={name:e,data:a,exhaustive:s.exhaustiveFacetsCount},xe(f.facets[i],s.facets_stats,e)))}),this.hierarchicalFacets=pe(this.hierarchicalFacets),e.forEach(function(e){var i=t[n],a=i&&i.facets?i.facets:{},o=l.getHierarchicalFacetByName(e);Object.keys(a).forEach(function(t){var r,e,n=a[t];o?(r=ye(l.hierarchicalFacets,function(e){return e.name===o.name}),-1!==(e=ye(f.hierarchicalFacets[r],function(e){return e.attribute===t}))&&(f.hierarchicalFacets[r][e].data=f.persistHierarchicalRootCount?be(f.hierarchicalFacets[r][e].data,n):ue(n,f.hierarchicalFacets[r][e].data))):(r=u[t],e=s.facets&&s.facets[t]||{},f.disjunctiveFacets[r]={name:t,data:be(e,n),exhaustive:i.exhaustiveFacetsCount},xe(f.disjunctiveFacets[r],i.facets_stats,t),l.disjunctiveFacetsRefinements[t]&&l.disjunctiveFacetsRefinements[t].forEach(function(e){!f.disjunctiveFacets[r].data[e]&&-1<l.disjunctiveFacetsRefinements[t].indexOf(Re(e))&&(f.disjunctiveFacets[r].data[e]=0)}))}),n++}),l.getRefinedHierarchicalFacets().forEach(function(e){var s=l.getHierarchicalFacetByName(e),c=l._getHierarchicalFacetSeparator(s),u=l.getHierarchicalRefinement(e);0===u.length||u[0].split(c).length<2||t.slice(n).forEach(function(e){var o=e&&e.facets?e.facets:{};Object.keys(o).forEach(function(t){var e,r,n=o[t],i=ye(l.hierarchicalFacets,function(e){return e.name===s.name}),a=ye(f.hierarchicalFacets[i],function(e){return e.attribute===t});-1!==a&&(e={},0<u.length&&!f.persistHierarchicalRootCount&&(e[r=u[0].split(c)[0]]=f.hierarchicalFacets[i][a].data[r]),f.hierarchicalFacets[i][a].data=ue(e,n,f.hierarchicalFacets[i][a].data))}),n++})}),Object.keys(l.facetsExcludes).forEach(function(t){var e=l.facetsExcludes[t],r=c[t];f.facets[r]={name:t,data:d[t],exhaustive:s.exhaustiveFacetsCount},e.forEach(function(e){f.facets[r]=f.facets[r]||{name:t},f.facets[r].data=f.facets[r].data||{},f.facets[r].data[e]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(Oe(l)),this.facets=pe(this.facets),this.disjunctiveFacets=pe(this.disjunctiveFacets),this._state=l}function Fe(r,n){function e(e){return e.name===n}var i,a,t,o,s,c;return r._state.isConjunctiveFacet(n)?(i=p(r.facets,e))?Object.keys(i.data).map(function(e){var t=Pe(e);return{name:e,escapedValue:t,count:i.data[e],isRefined:r._state.isFacetRefined(n,t),isExcluded:r._state.isExcludeRefined(n,e)}}):[]:r._state.isDisjunctiveFacet(n)?(a=p(r.disjunctiveFacets,e))?Object.keys(a.data).map(function(e){var t=Pe(e);return{name:e,escapedValue:t,count:a.data[e],isRefined:r._state.isDisjunctiveFacetRefined(n,t)}}):[]:r._state.isHierarchicalFacet(n)?((t=p(r.hierarchicalFacets,e))&&(c=r._state.getHierarchicalFacetByName(n),o=r._state._getHierarchicalFacetSeparator(c),(c=(s=0===(s=Re(r._state.getHierarchicalRefinement(n)[0]||"")).indexOf(c.rootPath)?s.replace(c.rootPath+o,""):s).split(o)).unshift(n),function t(e,r,n){e.isRefined=e.name===(r[n]&&r[n].trim());e.data&&e.data.forEach(function(e){t(e,r,n+1)})}(t,c,0)),t):void 0}function _e(e,t){e=p(e,function(e){return e.name===t});return e&&e.stats}function Te(e,t,r,n,i){var i=p(i,function(e){return e.name===r}),a=i&&i.data&&i.data[n]?i.data[n]:0,i=i&&i.exhaustive||!1;return{type:t,attributeName:r,name:n,count:a,exhaustive:i}}Ie.prototype.getFacetByName=function(t){function e(e){return e.name===t}return p(this.facets,e)||p(this.disjunctiveFacets,e)||p(this.hierarchicalFacets,e)},Ie.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],Ie.prototype.getFacetValues=function(e,t){var l,f,r=Fe(this,e);if(r)return l=ue(t,{sortBy:Ie.DEFAULT_SORT,facetOrdering:!(t&&t.sortBy)}),f=this,function t(r,e,n,i){var a;return i=i||0,Array.isArray(e)?r(e,n[i]):e.data&&0!==e.data.length?(a=e.data.map(function(e){return t(r,e,n,i+1)}),a=r(a,n[i]),ue({data:a},e)):e}(function(e,t){t=t;var n,i,a,o,r,s,c,u=(u=f).renderingContent&&u.renderingContent.facetOrdering&&u.renderingContent.facetOrdering.values&&u.renderingContent.facetOrdering.values[t];if(l.facetOrdering&&u)return t=e,n=[],i=[],a=(r=u).hide||[],o=(r.order||[]).reduce(function(e,t,r){return e[t]=r,e},{}),t.forEach(function(e){var t=e.path||e.name,r=-1<a.indexOf(t);r||void 0===o[t]?r||i.push(e):n[o[t]]=e}),n=n.filter(function(e){return e}),"hidden"===(t=r.sortRemainingBy)?n:n.concat(Se(i,(r="alpha"===t?[["path","name"],["asc","asc"]]:[["count"],["desc"]])[0],r[1]));if(Array.isArray(l.sortBy))return t=ge(l.sortBy,Ie.DEFAULT_SORT),r=Se(e,t[0],t[1]),0<(s=u&&u.hide?u.hide:[]).length?(c=[],r.forEach(function(e){var t=e.path||e.name;-1===s.indexOf(t)&&c.push(e)}),c):r;if("function"==typeof l.sortBy)return t=l.sortBy,e.sort(t);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},r,Array.isArray(r)?[e]:f._state.getHierarchicalFacetByName(r.name).attributes)},Ie.prototype.getFacetStats=function(e){return this._state.isConjunctiveFacet(e)?_e(this.facets,e):this._state.isDisjunctiveFacet(e)?_e(this.disjunctiveFacets,e):void 0},Ie.prototype.getRefinements=function(){var o=this._state,s=this,c=[];return Object.keys(o.facetsRefinements).forEach(function(t){o.facetsRefinements[t].forEach(function(e){c.push(Te(0,"facet",t,e,s.facets))})}),Object.keys(o.facetsExcludes).forEach(function(t){o.facetsExcludes[t].forEach(function(e){c.push(Te(0,"exclude",t,e,s.facets))})}),Object.keys(o.disjunctiveFacetsRefinements).forEach(function(t){o.disjunctiveFacetsRefinements[t].forEach(function(e){c.push(Te(0,"disjunctive",t,e,s.disjunctiveFacets))})}),Object.keys(o.hierarchicalFacetsRefinements).forEach(function(a){o.hierarchicalFacetsRefinements[a].forEach(function(e){var t,r,n,i;c.push((t=o,r=a,e=e,n=s.hierarchicalFacets,i=t.getHierarchicalFacetByName(r),t=t._getHierarchicalFacetSeparator(i),i=e.split(t),e=p(n,function(e){return e.name===r}),t=i.reduce(function(e,t){var r=e&&p(e.data,function(e){return e.name===t});return void 0!==r?r:e},e),n=t&&t.count||0,i=t&&t.exhaustive||!1,e=t&&t.path||"",{type:"hierarchical",attributeName:r,name:e,count:n,exhaustive:i}))})}),Object.keys(o.numericRefinements).forEach(function(r){var e=o.numericRefinements[r];Object.keys(e).forEach(function(t){e[t].forEach(function(e){c.push({type:"numeric",attributeName:r,name:e,numericValue:e,operator:t})})})}),o.tagRefinements.forEach(function(e){c.push({type:"tag",attributeName:"_tags",name:e})}),c};var Ae=Ie;var De=function(r,n){var t,i,a,o={};return n.forEach(function(e){e.forEach(function(e,t){r.includes(e.objectID)||(o[e.objectID]?o[e.objectID]={indexSum:o[e.objectID].indexSum+t,count:o[e.objectID].count+1}:o[e.objectID]={indexSum:t,count:1})})}),t=o,i=n.length,a=[],Object.keys(t).forEach(function(e){t[e].count<2&&(t[e].indexSum+=100),a.push({objectID:e,avgOfIndices:t[e].indexSum/i})}),a.sort(function(e,t){return e.avgOfIndices>t.avgOfIndices?1:-1}).reduce(function(e,t){var r=p(n.reduce(function(e,t){return e.concat(t)},[]),function(e){return e.objectID===t.objectID});return r?e.concat(r):e},[])},Y="3.27.0",ke=G;function t(e,t,r,n){"function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.27.0)"),this.setClient(e);e=r||{};e.index=t,this.state=ve.make(e),this.recommendState=new ae({params:e.recommendState}),this.lastResults=null,this.lastRecommendResults=null,this._queryId=0,this._recommendQueryId=0,this._lastQueryIdReceived=-1,this._lastRecommendQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0,this._currentNbRecommendQueries=0,this._searchResultsOptions=n,this._recommendCache={}}function Ce(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}function Ne(){return this.state.page}z(t,q),t.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this},t.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this},t.prototype.searchWithComposition=function(){return this._runComposition({onlyWithDerivedHelpers:!0}),this},t.prototype.recommend=function(){return this._recommend(),this},t.prototype.getQuery=function(){var e=this.state;return le._getHitsSearchParams(e)},t.prototype.searchOnce=function(e,t){var r=e?this.state.setQueryParameters(e):this.state,e=le._getQueries(r.index,r),n=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:r}),!t)return this.client.search(e).then(function(e){return n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),{content:new Ae(r,e.results),state:r,_originalResponse:e}},function(e){throw n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),e});this.client.search(e).then(function(e){n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),t(null,new Ae(r,e.results),r)}).catch(function(e){n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),t(e,null,r)})},t.prototype.findAnswers=function(e){console.warn("[algoliasearch-helper] answers is no longer supported");var t=this.state,r=this.derivedHelpers[0];if(!r)return Promise.resolve([]);var r=r.getModifiedState(t),t=te({attributesForPrediction:e.attributesForPrediction,nbHits:e.nbHits},{params:ne(le._getHitsSearchParams(r),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),n="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if("function"!=typeof this.client.initIndex)throw new Error(n);var i=this.client.initIndex(r.index);if("function"!=typeof i.findAnswers)throw new Error(n);return i.findAnswers(r.query,e.queryLanguages,t)},t.prototype.searchForFacetValues=function(r,e,t,n){var i,a,o,s,c="function"==typeof this.client.searchForFacetValues&&"function"!=typeof this.client.searchForFacets,u="function"==typeof this.client.initIndex;if(c||u||"function"==typeof this.client.search)return i=this.state.setQueryParameters(n||{}),a=i.isDisjunctiveFacet(r),n=le.getSearchForFacetQuery(r,e,t,i),this._currentNbQueries++,o=this,t=c?this.client.searchForFacetValues([{indexName:i.index,params:n}]):u?this.client.initIndex(i.index).searchForFacetValues(n):(delete n.facetName,this.client.search([{type:"facet",facet:r,indexName:i.index,params:n}]).then(function(e){return e.results[0]})),this.emit("searchForFacetValues",{state:i,facet:r,query:e}),s=this.lastResults&&this.lastResults.index===i.index&&this.lastResults.renderingContent&&this.lastResults.renderingContent.facetOrdering&&this.lastResults.renderingContent.facetOrdering.values&&this.lastResults.renderingContent.facetOrdering.values[r]&&this.lastResults.renderingContent.facetOrdering.values[r].hide||[],t.then(function(e){return o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),(e=Array.isArray(e)?e[0]:e).facetHits=e.facetHits.reduce(function(e,t){return-1<s.indexOf(t.value)||(t.escapedValue=ke(t.value),t.isRefined=a?i.isDisjunctiveFacetRefined(r,t.escapedValue):i.isFacetRefined(r,t.escapedValue),e.push(t)),e},[]),e},function(e){throw o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),e});throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues")},t.prototype.searchForCompositionFacetValues=function(t,e,r,n){if("function"!=typeof this.client.searchForFacetValues)throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues");var i=this.state.setQueryParameters(n||{}),a=i.isDisjunctiveFacet(t),o=(this._currentNbQueries++,this),n=this.client.searchForFacetValues({compositionID:i.index,facetName:t,searchForFacetValuesRequest:{params:{query:e,maxFacetHits:r,searchQuery:le._getCompositionHitsSearchParams(i)}}});return this.emit("searchForFacetValues",{state:i,facet:t,query:e}),n.then(function(e){return o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),(e=e.results[0]).facetHits.forEach(function(e){e.escapedValue=ke(e.value),e.isRefined=a?i.isDisjunctiveFacetRefined(t,e.escapedValue):i.isFacetRefined(t,e.escapedValue)}),e},function(e){throw o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),e})},t.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this},t.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this},t.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this},t.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},t.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.addNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,r),isPageReset:!0}),this},t.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},t.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this},t.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},t.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this},t.prototype.addFrequentlyBoughtTogether=function(e){return this._recommendChange({state:this.recommendState.addFrequentlyBoughtTogether(e)}),this},t.prototype.addRelatedProducts=function(e){return this._recommendChange({state:this.recommendState.addRelatedProducts(e)}),this},t.prototype.addTrendingItems=function(e){return this._recommendChange({state:this.recommendState.addTrendingItems(e)}),this},t.prototype.addTrendingFacets=function(e){return this._recommendChange({state:this.recommendState.addTrendingFacets(e)}),this},t.prototype.addLookingSimilar=function(e){return this._recommendChange({state:this.recommendState.addLookingSimilar(e)}),this},t.prototype.removeNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,r),isPageReset:!0}),this},t.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},t.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this},t.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},t.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this},t.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},t.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this},t.prototype.removeFrequentlyBoughtTogether=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},t.prototype.removeRelatedProducts=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},t.prototype.removeTrendingItems=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},t.prototype.removeTrendingFacets=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},t.prototype.removeLookingSimilar=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},t.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},t.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)},t.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},t.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this},t.prototype.nextPage=function(){var e=this.state.page||0;return this.setPage(e+1)},t.prototype.previousPage=function(){var e=this.state.page||0;return this.setPage(e-1)},t.prototype.setCurrentPage=Ce,t.prototype.setPage=Ce,t.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this},t.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this},t.prototype.setState=function(e){return this._change({state:ve.make(e),isPageReset:!1}),this},t.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new ve(e),this},t.prototype.hasRefinements=function(e){return!!re(this.state.getNumericRefinements(e))||(this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):!!this.state.isHierarchicalFacet(e)&&this.state.isHierarchicalFacetRefined(e))},t.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},t.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},t.prototype.hasTag=function(e){return this.state.isTagRefined(e)},t.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},t.prototype.getIndex=function(){return this.state.index},t.prototype.getCurrentPage=Ne,t.prototype.getPage=Ne,t.prototype.getTags=function(){return this.state.tagRefinements},t.prototype.getRefinements=function(e){var r=[],n=(this.state.isConjunctiveFacet(e)?(this.state.getConjunctiveRefinements(e).forEach(function(e){r.push({value:e,type:"conjunctive"})}),this.state.getExcludeRefinements(e).forEach(function(e){r.push({value:e,type:"exclude"})})):this.state.isDisjunctiveFacet(e)&&this.state.getDisjunctiveRefinements(e).forEach(function(e){r.push({value:e,type:"disjunctive"})}),this.state.getNumericRefinements(e));return Object.keys(n).forEach(function(e){var t=n[e];r.push({value:t,operator:e,type:"numeric"})}),r},t.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)},t.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)},t.prototype._search=function(e){var n=this.state,i=[],t=[],e=(e.onlyWithDerivedHelpers||(t=le._getQueries(n.index,n),i.push({state:n,queriesCount:t.length,helper:this}),this.emit("search",{state:n,results:this.lastResults})),this.derivedHelpers.map(function(e){var t=e.getModifiedState(n),r=t.index?le._getQueries(t.index,t):[];return i.push({state:t,queriesCount:r.length,helper:e}),e.emit("search",{state:t,results:e.lastResults}),r})),t=Array.prototype.concat.apply(t,e),e=this._queryId++;if(this._currentNbQueries++,!t.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,i,e));try{this.client.search(t).then(this._dispatchAlgoliaResponse.bind(this,i,e)).catch(this._dispatchAlgoliaError.bind(this,e))}catch(e){this.emit("error",{error:e})}},t.prototype._runComposition=function(){var n=this.state,i=[],e=this.derivedHelpers.map(function(e){var t=e.getModifiedState(n),r=le._getCompositionQueries(t);return i.push({state:t,queriesCount:r.length,helper:e}),e.emit("search",{state:t,results:e.lastResults}),r}),e=Array.prototype.concat.apply([],e),t=this._queryId++;if(this._currentNbQueries++,!e.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,i,t));if(1<e.length)throw new Error("Only one query is allowed when using a composition.");e=e[0];try{this.client.search(e).then(this._dispatchAlgoliaResponse.bind(this,i,t)).catch(this._dispatchAlgoliaError.bind(this,t))}catch(e){this.emit("error",{error:e})}},t.prototype._recommend=function(){var n=this.state,e=this.recommendState,t=this.getIndex(),i=[{state:e,index:t,helper:this}],a=e.params.map(function(e){return e.$$id}),o=(this.emit("fetch",{recommend:{state:e,results:this.lastRecommendResults}}),this._recommendCache),e=this.derivedHelpers.map(function(e){var t,r=e.getModifiedState(n).index;return r?(t=e.getModifiedRecommendState(new ae),i.push({state:t,index:r,helper:e}),a=Array.prototype.concat.apply(a,t.params.map(function(e){return e.$$id})),e.emit("fetch",{recommend:{state:t,results:e.lastRecommendResults}}),t._buildQueries(r,o)):[]}),t=Array.prototype.concat.apply(this.recommendState._buildQueries(t,o),e);if(0!==t.length)if(0<t.length&&void 0===this.client.getRecommendations)console.warn("Please update algoliasearch/lite to the latest version in order to use recommend widgets.");else{e=this._recommendQueryId++;this._currentNbRecommendQueries++;try{this.client.getRecommendations(t).then(this._dispatchRecommendResponse.bind(this,e,i,a)).catch(this._dispatchRecommendError.bind(this,e))}catch(e){this.emit("error",{error:e})}}},t.prototype._dispatchAlgoliaResponse=function(e,t,r){var n,i,a=this;t<this._lastQueryIdReceived||(this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,0===this._currentNbQueries&&this.emit("searchQueueEmpty"),n=r.results.slice(),i=Object.keys(r).reduce(function(e,t){return"results"!==t&&(e[t]=r[t]),e},{}),Object.keys(i).length<=0&&(i=void 0),e.forEach(function(e){var t=e.state,r=e.queriesCount,e=e.helper,r=n.splice(0,r);t.index?(e.lastResults=new Ae(t,r,a._searchResultsOptions),void 0!==i&&(e.lastResults._rawContent=i),e.emit("result",{results:e.lastResults,state:t})):e.emit("result",{results:null,state:t})}))},t.prototype._dispatchRecommendResponse=function(e,t,n,i){var a,o,s;e<this._lastRecommendQueryIdReceived||(this._currentNbRecommendQueries-=e-this._lastRecommendQueryIdReceived,this._lastRecommendQueryIdReceived=e,0===this._currentNbRecommendQueries&&this.emit("recommendQueueEmpty"),a=this._recommendCache,o={},n.filter(function(e){return void 0===a[e]}).forEach(function(e,t){o[e]||(o[e]=[]),o[e].push(t)}),Object.keys(o).forEach(function(e){var t=o[e],r=i.results[t[0]];1===t.length?a[e]=r:a[e]=Object.assign({},r,{hits:De(n,t.map(function(e){return i.results[e].hits}))})}),s={},n.forEach(function(e){s[e]=a[e]}),t.forEach(function(e){var t=e.state,r=e.helper;e.index?(r.lastRecommendResults=new se(t,s),r.emit("recommend:result",{recommend:{results:r.lastRecommendResults,state:t}})):r.emit("recommend:result",{results:null,state:t})}))},t.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},t.prototype._dispatchRecommendError=function(e,t){e<this._lastRecommendQueryIdReceived||(this._currentNbRecommendQueries-=e-this._lastRecommendQueryIdReceived,this._lastRecommendQueryIdReceived=e,this.emit("error",{error:t}),0===this._currentNbRecommendQueries&&this.emit("recommendQueueEmpty"))},t.prototype.containsRefinement=function(e,t,r,n){return e||0!==t.length||0!==r.length||0!==n.length},t.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&0<this.state.disjunctiveRefinements[e].length},t.prototype._change=function(e){var t=e.state,e=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:e}))},t.prototype._recommendChange=function(e){e=e.state;e!==this.recommendState&&(this.recommendState=e,this.emit("recommend:change",{search:{results:this.lastResults,state:this.state},recommend:{results:this.lastRecommendResults,state:this.recommendState}}))},t.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},t.prototype.setClient=function(e){return this.client!==e&&("function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.27.0)"),this.client=e),this},t.prototype.getClient=function(){return this.client},t.prototype.derive=function(e,t){e=new X(this,e,t);return this.derivedHelpers.push(e),e},t.prototype.detachDerivedHelper=function(e){e=this.derivedHelpers.indexOf(e);if(-1===e)throw new Error("Derived helper already detached");this.derivedHelpers.splice(e,1)},t.prototype.hasPendingRequests=function(){return 0<this._currentNbQueries};var Me=t;function We(e,t,r,n){return new Me(e,t,r,n)}We.version=Y,We.AlgoliaSearchHelper=Me,We.SearchParameters=ve,We.RecommendParameters=ae,We.SearchResults=Ae,We.RecommendResults=se;var S=We,He=0;function $e(){He=0}G=("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}).performance||{};G.now||G.mozNow||G.msNow||G.oNow||G.webkitNow;function j(){}function Le(e){return Object.prototype.toString.call(e).slice(8,-1)}function m(e,t){if(void 0===e||"function"!=typeof e)throw new Error("The render function is not valid (received type ".concat(Le(e),").\n\n").concat(t))}function Ue(e){var t=e.helper,e=e.attributesToClear,e=void 0===e?[]:e,r=t.state.setPage(0),r=e.reduce(function(e,t){return r.isNumericRefined(t)?e.removeNumericRefinement(t):r.isHierarchicalFacet(t)?e.removeHierarchicalFacetRefinement(t):r.isDisjunctiveFacet(t)?e.removeDisjunctiveFacetRefinement(t):r.isConjunctiveFacet(t)?e.removeFacetRefinement(t):e},r);return r=-1!==e.indexOf("query")?r.setQuery(""):r}var Qe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qe=/[&<>"']/g,Be=RegExp(qe.source);var Ve={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Je=/&(amp|quot|lt|gt|#39);/g,ze=RegExp(Je.source);function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e){if("object"===Ke(t=e)&&null!==t&&"[object Object]"===(null===(t=e)?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t))){var t;if(null===Object.getPrototypeOf(e))return 1;for(var r=e;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}}function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(){return(Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)!{}.hasOwnProperty.call(n,r)||(e[r]=n[r])}return e}).apply(null,arguments)}function Ze(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function et(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ze(Object(r),!0).forEach(function(e){tt(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function tt(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Ge(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ge(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"},u={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function rt(e){return((e=e)&&Be.test(e)?e.replace(qe,function(e){return Qe[e]}):e).replace(new RegExp(_.highlightPreTag,"g"),u.highlightPreTag).replace(new RegExp(_.highlightPostTag,"g"),u.highlightPostTag)}function nt(r){return Xe(r)&&"string"!=typeof r.value?Object.keys(r).reduce(function(e,t){return et(et({},e),{},tt({},t,nt(r[t])))},{}):Array.isArray(r)?r.map(nt):et(et({},r),{},{value:rt(r.value)})}function it(e){return void 0===e.__escaped&&((e=e.map(function(e){e=Ye({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return e._highlightResult&&(e._highlightResult=nt(e._highlightResult)),e._snippetResult&&(e._snippetResult=nt(e._snippetResult)),e})).__escaped=!0),e}function at(e){var t=u.highlightPreTag,r=u.highlightPostTag;return e.map(function(e){return e.isHighlighted?t+e.value+r:e.value}).join("")}function ot(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function st(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=ct(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ct(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ot(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?lt(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ft(e){var d=e.instantSearchInstance,h=e.helper,m=e.attribute,p=e.widgetType;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i,a,o=t[1],s=t[2],s=void 0===s?"Filter Applied":s,c=t[3],c=void 0===c?{}:c,u=ut(t[0].split(":"),2),l=u[0],u=u[1],f="string"==typeof m?m:m(o);1===t.length&&"object"===ct(t[0])?d.sendEventToInsights(t[0]):"click"===l&&2<=t.length&&t.length<=4&&(i=f,a=o,((n=h).state.isHierarchicalFacet(i)?n.state.isHierarchicalFacetRefined(i,a):n.state.isConjunctiveFacet(i)?n.state.isFacetRefined(i,a):n.state.isDisjunctiveFacetRefined(i,a))||d.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:p,eventType:l,eventModifier:u,payload:st({eventName:s,index:(null==(n=h.lastResults)?void 0:n.index)||h.state.index,filters:["".concat(f,":").concat(o)]},c),attribute:f}))}}function dt(e){return btoa(encodeURIComponent(JSON.stringify(e)))}function ht(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function mt(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=gt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==gt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ht(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?yt(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e){var n,i,a,o,s,t,c,u,l=e.helper,f=e.widgetType,r=(e.methodName,e.args),e=e.instantSearchInstance;return 1===r.length&&"object"===gt(r[0])?[r[0]]:(t=pt(r[0].split(":"),2),n=t[0],i=t[1],t=r[1],a=r[2],o=r[3]||{},!t||!("click"!==n&&"conversion"!==n||a)||0===(r=Array.isArray(t)?t:[t]).length?[]:(s=r[0].__queryID,t=function(e,t){for(var r=1<arguments.length&&void 0!==t?t:20,n=[],i=0;i<Math.ceil(e.length/r);i++)n.push(e.slice(i*r,(i+1)*r));return n}(r),c=t.map(function(e){return e.map(function(e){return e.objectID})}),u=t.map(function(e){return e.map(function(e){return e.__position})}),"view"===n?"idle"!==e.status?[]:t.map(function(e,t){var r;return{insightsMethod:"viewedObjectIDs",widgetType:f,eventType:n,payload:mt({eventName:a||"Hits Viewed",index:(null==(r=l.lastResults)?void 0:r.index)||l.state.index,objectIDs:c[t]},o),hits:e,eventModifier:i}}):"click"===n?t.map(function(e,t){var r;return{insightsMethod:"clickedObjectIDsAfterSearch",widgetType:f,eventType:n,payload:mt({eventName:a||"Hit Clicked",index:(null==(r=l.lastResults)?void 0:r.index)||l.state.index,queryID:s,objectIDs:c[t],positions:u[t]},o),hits:e,eventModifier:i}}):"conversion"===n?t.map(function(e,t){var r;return{insightsMethod:"convertedObjectIDsAfterSearch",widgetType:f,eventType:n,payload:mt({eventName:a||"Hit Converted",index:(null==(r=l.lastResults)?void 0:r.index)||l.state.index,queryID:s,objectIDs:c[t]},o),hits:e,eventModifier:i}}):[]))}function bt(e){var n=e.instantSearchInstance,i=e.helper,a=e.widgetType,o={},s=void 0;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];vt({widgetType:a,helper:i,methodName:"sendEvent",args:t,instantSearchInstance:n}).forEach(function(e){"click"===e.eventType&&"internal"===e.eventModifier&&o[e.eventType]||(o[e.eventType]=!0,n.sendEventToInsights(e))}),clearTimeout(s),s=setTimeout(function(){o={}},0)}}function St(e){var i=e.helper,a=e.widgetType,o=e.instantSearchInstance;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=vt({widgetType:a,helper:i,methodName:"bindEvent",args:t,instantSearchInstance:o});return n.length?"data-insights-event=".concat(dt(n)):""}}function Ot(e){return"ais.index"===e.$$type}function jt(t,e){var r=t[e.getIndexId()]||{};e.getHelper().setState(e.getWidgetSearchParameters(e.getHelper().state,{uiState:r})),e.getWidgets().filter(Ot).forEach(function(e){return jt(t,e)})}var wt=Promise.resolve();function Pt(n){function e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];null===i&&(i=wt.then(function(){i=null,a?a=!1:n.apply(void 0,t)}))}var i=null,a=!1;return e.wait=function(){if(null===i)throw new Error("The deferred function should be called before calling `wait()`");return i},e.cancel=function(){null!==i&&(a=!0)},e}function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.map(function(e){return t=(e=e).name,e=e.connector,["https://www.algolia.com/doc/api-reference/widgets/",t,"/js/",void 0!==e&&e?"#connector":""].join("");var t}).join(", ");return function(e){return[e,"See documentation: ".concat(n)].filter(Boolean).join("\n\n")}}function Rt(e){return"number"==typeof e&&e<0||"string"==typeof e?String(e).replace(/^-/,"\\-"):e}function Et(e,t){for(var r,n=0;n<e.length;n++)if(t(r=e[n],n,e))return r}function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?It(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?It(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ft=/^(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)$/;function _t(e){if(Array.isArray(e)){var t=e,r=xt(t,1)[0],n=(r=xt(void 0===r?[void 0,void 0,void 0,void 0]:r,4))[0],i=r[1],a=r[2],r=r[3];if(n&&i&&a&&r)return{northEast:{lat:n,lng:i},southWest:{lat:a,lng:r}};throw new Error('Invalid value for "insideBoundingBox" parameter: ['.concat(t,"]"))}n=e,a=(i=xt(n.split(",").map(parseFloat),4))[0],r=i[1],t=i[2],i=i[3];if(a&&r&&t&&i)return{northEast:{lat:a,lng:r},southWest:{lat:t,lng:i}};throw new Error('Invalid value for "insideBoundingBox" parameter: "'.concat(n,'"'))}function Tt(e){return e.transporter&&e.transporter.userAgent?e.transporter.userAgent.value:e._ua}function At(e){var t,r,n;return e.appId&&e.apiKey?[e.appId,e.apiKey]:e.transporter?(t=(r=e.transporter).headers||r.baseHeaders,r=r.queryParameters||r.baseQueryParameters,[t[n="x-algolia-application-id"]||r[n],t[n="x-algolia-api-key"]||r[n]]):[e.applicationID,e.apiKey]}function Dt(e){var t=u.highlightPostTag,r=u.highlightPreTag,e=e.split(r),r=e.shift(),n=r?[{value:r,isHighlighted:!1}]:[];return e.forEach(function(e){e=e.split(t);n.push({value:e[0],isHighlighted:!0}),""!==e[1]&&n.push({value:e[1],isHighlighted:!1})}),n}var kt=new RegExp(/\w/i);function Ct(e,t){var r=e[t],n=(null==(n=e[t+1])?void 0:n.isHighlighted)||!0,t=(null==(e=e[t-1])?void 0:e.isHighlighted)||!0;return kt.test((e=r.value)&&ze.test(e)?e.replace(Je,function(e){return Ve[e]}):e)||t!==n?r.isHighlighted:t}function Nt(e,t){return(Array.isArray(t)?t:t.split(".")).reduce(function(e,t){return e&&e[t]},e)}function Mt(e,t,r,n,i){var a,i=4<arguments.length&&void 0!==i?i:[],o={type:t,attribute:r,name:n,escapedValue:Rt(n)},s=Et(i,function(e){return e.name===r});if("hierarchical"===t){for(var i=e.getHierarchicalFacetByName(r),c=n.split(i.separator),u=0;void 0!==s&&u<c.length;++u)!function(t){var r;s=s&&s.data&&Et(Object.keys(s.data).map((r=s.data,function(e){return r[e]})),function(e){return e.name===c[t]})}(u);a=s&&s.count}else a=s&&s.data&&s.data[o.name];return void 0!==a&&(o.count=a),s&&void 0!==s.exhaustive&&(o.exhaustive=s.exhaustive),o}function Wt(e,r,t){var t=2<arguments.length&&void 0!==t&&t,n=e||{},i=[],e=r.facetsRefinements,a=void 0===e?{}:e,e=r.facetsExcludes,o=void 0===e?{}:e,e=r.disjunctiveFacetsRefinements,s=void 0===e?{}:e,e=r.hierarchicalFacetsRefinements,c=void 0===e?{}:e,e=r.numericRefinements,u=void 0===e?{}:e,e=r.tagRefinements,e=void 0===e?[]:e;return Object.keys(a).forEach(function(t){a[t].forEach(function(e){i.push(Mt(r,"facet",t,e,n.facets))})}),Object.keys(o).forEach(function(t){o[t].forEach(function(e){i.push({type:"exclude",attribute:t,name:e,exclude:!0})})}),Object.keys(s).forEach(function(t){s[t].forEach(function(e){i.push(Mt(r,"disjunctive",t,"string"==typeof(e=e)?e.replace(/^\\-/,"-"):e,n.disjunctiveFacets))})}),Object.keys(c).forEach(function(t){c[t].forEach(function(e){i.push(Mt(r,"hierarchical",t,e,n.hierarchicalFacets))})}),Object.keys(u).forEach(function(r){var n=u[r];Object.keys(n).forEach(function(e){var t=e,e=n[t];(Array.isArray(e)?e:[e]).forEach(function(e){i.push({type:"numeric",attribute:r,name:"".concat(e),numericValue:e,operator:t})})})}),e.forEach(function(e){i.push({type:"tag",attribute:"_tags",name:e})}),t&&r.query&&r.query.trim()&&i.push({attribute:"query",type:"query",name:r.query,query:r.query}),i}function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Lt(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?$t(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Ht(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ht(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):$t(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Ut(e,r,n){return e.map(function(e,t){return Lt(Lt({},e),{},{__position:n*r+t+1})})}function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Bt(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?qt(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Qt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Qt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):qt(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Vt(e,t){return t?e.map(function(e){return Bt(Bt({},e),{},{__queryID:t})}):e}function Jt(e){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Kt(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Jt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Jt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):zt(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Xt(e){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?Yt(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Zt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function er(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(r),!0).forEach(function(e){tr(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function tr(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Xt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Xt(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rr(a,i){var e,o,t;i&&("transporter"in a&&!a._cacheHydrated||a._useCache&&"function"==typeof a.addAlgoliaAgent)&&(e=[Object.keys(i).reduce(function(e,t){var t=i[t],r=t.state,n=t.requestParams,t=t.results,t=t&&r?t.map(function(e,t){return er({indexName:r.index||e.index},null!=n&&n[t]||e.params?{params:nr((null==n?void 0:n[t])||e.params.split("&").reduce(function(e,t){var t=Gt(t.split("="),2),r=t[0],t=t[1];return e[r]=t?decodeURIComponent(t):"",e},{}))}:{})}):[];return e.concat(t)},[])],t=Object.keys(i).reduce(function(e,t){t=i[t].results;return t?e.concat(t):e},[]),"transporter"in a&&!a._cacheHydrated&&(a._cacheHydrated=!0,o=a.search.bind(a),a.search=function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=Array.isArray(e)?e.map(function(e){return er(er({},e),{},{params:nr(e.params)})}):nr(e.requestBody.params);return a.transporter.responsesCache.get({method:"search",args:[i].concat(r)},function(){return o.apply(void 0,[e].concat(r))})},a.transporter.responsesCache.set({method:"search",args:e},{results:t})),"transporter"in a||(t="/1/indexes/*/queries_body_".concat(JSON.stringify({requests:e})),a.cache=er(er({},a.cache),{},tr({},t,JSON.stringify({results:Object.keys(i).map(function(e){return i[e].results})})))))}function nr(r){return Object.keys(r).map(function(e){return function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=0;return e.replace(/%s/g,function(){return encodeURIComponent(r[i++])})}("%s=%s",e,(t=r[e],"[object Object]"===Object.prototype.toString.call(t)||"[object Array]"===Object.prototype.toString.call(t)?JSON.stringify(r[e]):r[e]));var t}).join("&")}function ir(e){return e!==Object(e)}function ar(e,t){if(e===t)return 1;if(ir(e)||ir(t)||"function"==typeof e||"function"==typeof t)return e===t;if(Object.keys(e).length===Object.keys(t).length){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];if(!(i in t))return;if(!ar(e[i],t[i]))return}return 1}}function g(e){return"number"==typeof e&&isFinite(e)}function or(e,t){t(e),e.getWidgets().forEach(function(e){Ot(e)&&or(e,t)})}function sr(e){return e.filter(function(e,t,r){return r.indexOf(e)===t})}function cr(e){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ur=["facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements","ruleContexts"];function lr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function fr(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?lr(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=cr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=cr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==cr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):lr(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function dr(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function hr(e,t){return e.setQueryParameters({hierarchicalFacets:t.hierarchicalFacets.reduce(function(e,t){var r=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}(e,function(e){return e.name===t.name});return-1===r?e.concat(t):((e=e.slice()).splice(r,1,t),e)},e.hierarchicalFacets)})}var mr=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t){r=t;var e=e.setQueryParameters({hierarchicalFacetsRefinements:fr(fr({},e.hierarchicalFacetsRefinements),r.hierarchicalFacetsRefinements)}),r=hr(e,t),e=t.tagRefinements.reduce(function(e,t){return e.addTagRefinement(t)},r),e=(r=t,e.setQueryParameters({numericRefinements:fr(fr({},e.numericRefinements),r.numericRefinements)})),e=(r=t,e.setQueryParameters({disjunctiveFacetsRefinements:fr(fr({},e.disjunctiveFacetsRefinements),r.disjunctiveFacetsRefinements)})),e=(r=t,e.setQueryParameters({facetsExcludes:fr(fr({},e.facetsExcludes),r.facetsExcludes)})),e=(r=t,e.setQueryParameters({facetsRefinements:fr(fr({},e.facetsRefinements),r.facetsRefinements)})),r=function(e,t){t=sr([].concat(e.ruleContexts).concat(t.ruleContexts).filter(Boolean));return 0<t.length?e.setQueryParameters({ruleContexts:t}):e}(t.disjunctiveFacets.reduce(function(e,t){return e.addDisjunctiveFacet(t)},e),t),e=t.facets.reduce(function(e,t){return e.addFacet(t)},r),r=t;return r.facets,r.disjunctiveFacets,r.facetsRefinements,r.facetsExcludes,r.disjunctiveFacetsRefinements,r.numericRefinements,r.tagRefinements,r.hierarchicalFacets,r.hierarchicalFacetsRefinements,r.ruleContexts,r=dr(r,ur),e.setQueryParameters(r)})};function pr(e){return function(e){if(Array.isArray(e))return yr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?yr(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gr(e){var t=e.start,r=void 0===t?0:t,t=e.end,e=e.step,e=void 0===e?1:e,n=0===e?1:e,e=Math.round((t-r)/n);return pr(Array(e)).map(function(e,t){return r+t*n})}function vr(e,t,r){var n=t.getHelper();return{uiState:r,helper:n,parent:t,instantSearchInstance:e,state:n.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,scopedResults:[],searchMetadata:{isSearchStalled:"stalled"===e.status},status:e.status,error:e.error}}function br(e,t,r){var r=t.getResultsForWidget(r),n=t.getHelper();return{helper:n,parent:t,instantSearchInstance:e,results:r,scopedResults:t.getScopedResults(),state:r&&"_state"in r?r._state:n.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,searchMetadata:{isSearchStalled:"stalled"===e.status},status:e.status,error:e.error}}function Sr(e){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Or(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function jr(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Or(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Sr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Sr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Or(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function wr(r){return r.some(function(e){return e.isHighlighted})?r.map(function(e,t){return jr(jr({},e),{},{isHighlighted:!Ct(r,t)})}):r.map(function(e){return jr(jr({},e),{},{isHighlighted:!1})})}function Pr(e,t){t=(1<arguments.length&&void 0!==t?t:{fallback:function(){}}).fallback;return"undefined"==typeof window?t():e({window:window})}function Rr(e){return Array.isArray(e)?e:[e]}function Er(e){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xr(Object(r),!0).forEach(function(e){Ir(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ir(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Er(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Er(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Er(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fr=i({name:"configure",connector:!0});function _r(e,t){return e.setQueryParameters(Object.keys(t.searchParameters).reduce(function(e,t){return a(a({},e),{},Ir({},t,void 0))},{}))}var Tr=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:j,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return function(n){var t;if(n&&Xe(n.searchParameters))return t={},{$$type:"ais.configure",init:function(e){var t=e.instantSearchInstance;r(a(a({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(a(a({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return i(),_r(e,n)},getRenderState:function(e,t){t=this.getWidgetRenderState(t);return a(a({},e),{},{configure:a(a({},t),{},{widgetParams:a(a({},t.widgetParams),{},{searchParameters:mr(new S.SearchParameters(null==(e=e.configure)?void 0:e.widgetParams.searchParameters),new S.SearchParameters(t.widgetParams.searchParameters)).getQueryParams()})})})},getWidgetRenderState:function(e){var r,e=e.helper;return t.refine||(t.refine=(r=e,function(e){var t=_r(r.state,n),t=mr(t,new S.SearchParameters(e));n.searchParameters=e,r.setState(t).search()})),{refine:t.refine,widgetParams:n}},getWidgetSearchParameters:function(e,t){t=t.uiState;return mr(e,new S.SearchParameters(a(a({},t.configure),n.searchParameters)))},getWidgetUiState:function(e){return a(a({},e),{},{configure:a(a({},e.configure),n.searchParameters)})}};throw new Error(Fr("The `searchParameters` option expects an object."))}},Ar=Object.prototype.hasOwnProperty;function Dr(e,t,r){if(null!=r&&r(e,t))return!0;var n,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&Dr(e[i],t[i],r););return-1===i}if(!n||"object"===Q(e)){for(n in i=0,e){if(Ar.call(e,n)&&++i&&!Ar.call(t,n))return!1;if(!(n in t&&Dr(e[n],t[n],r)))return!1}return Object.keys(t).length===i}}return e!=e&&t!=t}function kr(e){var t;return new S.SearchResults(e,[{query:null!=(t=e.query)?t:"",page:null!=(t=e.page)?t:0,hitsPerPage:null!=(t=e.hitsPerPage)?t:20,hits:[],nbHits:0,nbPages:0,params:"",exhaustiveNbHits:!0,exhaustiveFacetsCount:!0,processingTimeMS:0,index:e.index}],{__isArtificial:!0})}function Cr(r){var e=r.getHelper(),n=r.getResults()||kr(e.state),t=r.getScopedResults().map(function(e){var t=e.indexId===r.getIndexId()?n:kr(e.helper.state);return $($({},e),{},{results:e.results||t})});return{results:n,scopedResults:t,recommendResults:e.lastRecommendResults}}var Nr=b.createContext(null);function Mr(e){if(!e)throw new Error("Invariant failed")}function Wr(){var e=b.useContext(Nr);return Mr(null!==e),e}var Hr=b.createContext(null);function $r(){var e=b.useContext(Hr);return Mr(null!==e),e}var Lr=b.createContext(null);function Ur(){return b.useContext(Lr)}var Qr=b.createContext(null);function qr(){return b.useContext(Qr)}function Br(e){var t=U(b.useState(function(){return e}),2),r=t[0],t=t[1];return Dr(r,e)||t(e),r}var Vr=b.use,Jr="undefined"!=typeof window?b.useLayoutEffect:b.useEffect,zr=b.createContext({countRef:{current:0},waitForResultsRef:null,ignoreMultipleHooksWarning:!1});function Kr(){return b.useContext(zr)}function Xr(e){var t=e.widget,r=e.parentIndex,n=e.props,i=e.shouldSsr,e=e.skipSuspense,a=Kr(),o=a.waitForResultsRef,s=a.countRef,c=(a.ignoreMultipleHooksWarning,b.useRef(n)),u=(b.useEffect(function(){c.current=n},[n]),b.useRef(t)),l=(b.useEffect(function(){u.current=t},[t]),b.useRef(null)),a=i&&!r.getWidgets().includes(t),f=$r();Jr(function(){var e=u.current;return l.current?(clearTimeout(l.current),Dr(n,c.current)||(r.removeWidgets([e]),r.addWidgets([t]))):i||r.addWidgets([t]),function(){l.current=setTimeout(function(){f._schedule(function(){f._preventWidgetCleanup||r.removeWidgets([e])})})}},[r,t,i,f,n]),!a&&"pending"!==(null==o||null==(a=o.current)?void 0:a.status)||r.addWidgets([t]),null!=o&&o.current&&!e&&(Vr(o.current),"ais.dynamicWidgets"!==t.$$type)&&null!=(a=f.helper)&&a.lastResults&&Vr(o.current),"fulfilled"===(null==o||null==(e=o.current)?void 0:e.status)&&(s.current+=1)}var Gr=["skipSuspense"],Yr=["instantSearchInstance","widgetParams"],Zr=["widgetParams"];function s(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=r.skipSuspense,n=void 0!==n&&n,r=L(r,Gr),i=Ur(),a=qr(),o=$r(),s=Wr(),c=Br(t),u=Br(r),l=b.useRef(!0),f=b.useRef(null),d=b.useRef(o.status),h=b.useMemo(function(){return $($({},e(function(e,t){t?l.current=!0:l.current&&(t=e.instantSearchInstance,e.widgetParams,Dr(e=L(e,Yr),f.current,function(e,t){return(null==e?void 0:e.constructor)===Function&&(null==t?void 0:t.constructor)===Function})&&t.status===d.current||(m(e),f.current=e,d.current=t.status))},function(){l.current=!1})(c)),u)},[e,c,u]),t=U(b.useState(function(){var e,t,r,n;return h.getWidgetRenderState?(e=s.getHelper(),t=s.getWidgetUiState({})[s.getIndexId()],e.state=(null==(n=h.getWidgetSearchParameters)?void 0:n.call(h,e.state,{uiState:t}))||e.state,t=(n=Cr(s)).results,r=n.scopedResults,n=n.recommendResults,(n=h.getWidgetRenderState({helper:e,parent:s,instantSearchInstance:o,results:"recommend"===h.dependsOn&&n&&a?n[a.recommendIdx.current++]:t,scopedResults:r,state:e.state,renderState:o.renderState,templatesConfig:o.templatesConfig,createURL:s.createURL,searchMetadata:{isSearchStalled:"stalled"===o.status},status:o.status,error:o.error})).widgetParams,L(n,Zr)):{}}),2),r=t[0],m=t[1];return Xr({widget:h,parentIndex:s,props:c,shouldSsr:Boolean(i),skipSuspense:n}),r}function en(e,t){return s(Tr,{searchParameters:e},t)}function tn(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function rn(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?tn(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=nn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=nn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==nn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):tn(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function nn(e){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var an=i({name:"dynamic-widgets",connector:!0}),on=function(u){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(u,an()),function(r){var s,e=r.widgets,t=r.maxValuesPerFacet,n=void 0===t?20:t,t=r.facets,i=void 0===t?["*"]:t,t=r.transformItems,a=void 0===t?function(e){return e}:t,c=r.fallbackWidget;if(!(e&&Array.isArray(e)&&e.every(function(e){return"object"===nn(e)})))throw new Error(an("The `widgets` option expects an array of widgets."));if(Array.isArray(i))return s=new Map,{$$type:"ais.dynamicWidgets",init:function(r){e.forEach(function(e){var t=function(e,t){var r=null==(r=e.getWidgetRenderState)?void 0:r.call(e,t),t=null;if(r&&r.widgetParams&&((r=r.widgetParams).attribute?t=r.attribute:Array.isArray(r.attributes)&&(t=r.attributes[0])),"string"!=typeof t)throw new Error("Could not find the attribute of the widget:\n\n".concat(JSON.stringify(e),"\n\nPlease check whether the widget's getWidgetRenderState returns widgetParams.attribute correctly."));return t}(e,r);s.set(t,{widget:e,isMounted:!1})}),u(rn(rn({},this.getWidgetRenderState(r)),{},{instantSearchInstance:r.instantSearchInstance}),!0)},render:function(e){var t=e.parent,i=this.getWidgetRenderState(e),a=[],o=[];c&&i.attributesToRender.forEach(function(e){var t;s.has(e)||(t=c({attribute:e}),s.set(e,{widget:t,isMounted:!1}))}),s.forEach(function(e,t){var r=e.widget,e=e.isMounted,n=-1<i.attributesToRender.indexOf(t);!e&&n?(o.push(r),s.set(t,{widget:r,isMounted:!0})):e&&!n&&(a.push(r),s.set(t,{widget:r,isMounted:!1}))}),t.addWidgets(o),setTimeout(function(){return t.removeWidgets(a)},0),u(rn(rn({},i),{},{instantSearchInstance:e.instantSearchInstance}),!1)},dispose:function(e){var e=e.parent,r=[];s.forEach(function(e){var t=e.widget;e.isMounted&&r.push(t)}),e.removeWidgets(r),o()},getWidgetSearchParameters:function(e){return i.reduce(function(e,t){return e.addFacet(t)},e.setQueryParameters({maxValuesPerFacet:Math.max(n||0,e.maxValuesPerFacet||0)}))},getRenderState:function(e,t){return rn(rn({},e),{},{dynamicWidgets:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results;e.state;if(!t)return{attributesToRender:[],widgetParams:r};e=a(null!=(e=null==(e=t.renderingContent)||null==(e=e.facetOrdering)||null==(e=e.facets)?void 0:e.order)?e:[],{results:t});if(Array.isArray(e))return{attributesToRender:e,widgetParams:r};throw new Error(an("The `transformItems` option expects a function that returns an Array."))}};throw new Error(an("The `facets` option only accepts an array of facets, you passed ".concat(JSON.stringify(i))))}};function sn(e,t){return s(on,$($({},e),{},{widgets:[]}),t)}var cn=["children","fallbackComponent"];function un(){return null}function ln(e){return"object"===Q(e)&&e.props}function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var dn=["initialSearchParameters"],hn=["initialRecommendParameters"];function mn(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function pn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mn(Object(r),!0).forEach(function(e){yn(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mn(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function yn(e,t,r){return(t=function(e){e=function(e,t){if("object"!=fn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=fn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==fn(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gn(e){return function(e){if(Array.isArray(e))return vn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?vn(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function bn(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}var Sn=i({name:"index-widget"});function On(e,t){var r=t.state,n=t.recommendState,i=t.isPageReset,t=t._uiState;r!==e.state&&(e.state=r,e.emit("change",{state:e.state,results:e.lastResults,isPageReset:i,_uiState:t})),n!==e.recommendState&&(e.recommendState=n)}function jn(e,r,t){return e.reduce(function(e,t){return!Ot(t)&&(t.getWidgetUiState||t.getWidgetState)?t.getWidgetUiState?t.getWidgetUiState(e,r):t.getWidgetState(e,r):e},2<arguments.length&&void 0!==t?t:{})}function wn(e,t){var r=t.initialSearchParameters,n=bn(t,dn);return e.reduce(function(e,t){return!t.getWidgetSearchParameters||Ot(t)?e:"search"===t.dependsOn&&t.getWidgetParameters?t.getWidgetParameters(e,n):t.getWidgetSearchParameters(e,n)},r)}function Pn(e,t){var r=t.initialRecommendParameters,n=bn(t,hn);return e.reduce(function(e,t){return!Ot(t)&&"recommend"===t.dependsOn&&t.getWidgetParameters?t.getWidgetParameters(e,n):e},r)}var Rn=function(e){if(void 0===e||void 0===e.indexName&&!e.EXPERIMENTAL_isolated)throw new Error(Sn("The `indexName` option is required."));var t=e.indexName,s=void 0===t?"":t,t=e.indexId,c=void 0===t?s:t,t=e.EXPERIMENTAL_isolated,u=void 0!==t&&t,l=[],f={},d=null,h=null,m=null,p=null,y=null,g=!1,v=!1;return{$$type:"ais.index",$$widgetType:"ais.index",_isolated:u,getIndexName:function(){return s},getIndexId:function(){return c},getHelper:function(){return m},getResults:function(){var e;return null!=(e=p)&&e.lastResults?(p.lastResults._state=m.state,p.lastResults):null},getResultsForWidget:function(e){var t;return"recommend"!==e.dependsOn||Ot(e)||void 0===e.$$id?this.getResults():null!=(t=m)&&t.lastRecommendResults?m.lastRecommendResults[e.$$id]:null},getPreviousState:function(){return y},getScopedResults:function(){var e=this.getParent(),e=e?e.getWidgets():0===s.length?this.getWidgets():[this];return function r(e){return e.filter(Ot).reduce(function(e,t){return e.concat.apply(e,[{indexId:t.getIndexId(),results:t.getResults(),helper:t.getHelper()}].concat(gn(r(t.getWidgets()))))},[])}(e)},getParent:function(){return u?null:h},createURL:function(e){return"function"==typeof e?d._createURL(yn({},c,e(f))):d._createURL(yn({},c,jn(l,{searchParameters:e,helper:m})))},scheduleLocalSearch:Pt(function(){var e;u&&null!=(e=m)&&e.search()}),getWidgets:function(){return l},addWidgets:function(e){var t=this;if(!Array.isArray(e))throw new Error(Sn("The `addWidgets` method expects an array of widgets."));e=e.reduce(function(e,t){return e.concat(Array.isArray(t)?t:[t])},[]);if(e.some(function(e){return"function"!=typeof e.init&&"function"!=typeof e.render}))throw new Error(Sn("The widget definition expects a `render` and/or an `init` method."));return e.forEach(function(e){e.parent=t,Ot(e)||(d&&"recommend"===e.dependsOn?d._hasRecommendWidget=!0:d?d._hasSearchWidget=!0:"recommend"===e.dependsOn?g=!0:v=!0,"recommend"===(e=e).dependsOn&&(e.$$id=He++))}),l=l.concat(e),d&&Boolean(e.length)&&(On(m,{state:wn(l,{uiState:f,initialSearchParameters:m.state}),recommendState:Pn(l,{uiState:f,initialRecommendParameters:m.recommendState}),_uiState:f}),e.forEach(function(e){e.getRenderState&&En({renderState:e.getRenderState(d.renderState[t.getIndexId()]||{},vr(d,t,d._initialUiState)),instantSearchInstance:d,parent:t})}),e.forEach(function(e){e.init&&e.init(vr(d,t,d._initialUiState))}),u?this.scheduleLocalSearch():d.scheduleSearch()),this},removeWidgets:function(e){var r=this;if(!Array.isArray(e))throw new Error(Sn("The `removeWidgets` method expects an array of widgets."));var t,n=e.reduce(function(e,t){return e.concat(Array.isArray(t)?t:[t])},[]);if(n.some(function(e){return"function"!=typeof e.dispose}))throw new Error(Sn("The widget definition expects a `dispose` method."));return(l=l.filter(function(e){return-1===n.indexOf(e)})).forEach(function(e){e.parent=void 0,Ot(e)||(d&&"recommend"===e.dependsOn?d._hasRecommendWidget=!0:d?d._hasSearchWidget=!0:"recommend"===e.dependsOn?g=!0:v=!0)}),d&&Boolean(n.length)&&(t=(e=n.reduce(function(e,t){t=t.dispose({helper:m,state:e.cleanedSearchState,recommendState:e.cleanedRecommendState,parent:r});return t instanceof S.RecommendParameters?e.cleanedRecommendState=t:t&&(e.cleanedSearchState=t),e},{cleanedSearchState:m.state,cleanedRecommendState:m.recommendState})).cleanedSearchState,e=e.cleanedRecommendState,t=d.future.preserveSharedStateOnUnmount?wn(l,{uiState:f,initialSearchParameters:new S.SearchParameters({index:this.getIndexName()})}):wn(l,{uiState:jn(l,{searchParameters:t,helper:m}),initialSearchParameters:t}),f=jn(l,{searchParameters:t,helper:m}),m.setState(t),m.recommendState=e,l.length)&&(u?this.scheduleLocalSearch():d.scheduleSearch()),this},init:function(e){var t,r,n=this,i=e.instantSearchInstance,a=e.parent,o=e.uiState;null===m&&(d=i,h=a,f=o[c]||{},t=i.mainHelper,e=wn(l,{uiState:f,initialSearchParameters:new S.SearchParameters({index:s})}),r=Pn(l,{uiState:f,initialRecommendParameters:new S.RecommendParameters}),(m=S(t.getClient(),e.index,e)).recommendState=r,m.search=function(){return u?(i.status="loading",n.render({instantSearchInstance:i}),i.compositionID?m.searchWithComposition():m.searchOnlyWithDerivedHelpers()):i.onStateChange?(i.onStateChange({uiState:i.mainIndex.getWidgetUiState({}),setUiState:function(e){return i.setUiState(e,!1)}}),t):t.search()},m.searchWithoutTriggeringOnStateChange=function(){return t.search()},e=s?m:S({},"__empty_index__",{}),r=u?e:function(e,t){for(;e;){if(e._isolated)return e.getHelper();e=e.getParent()}return t}(a,t),p=r.derive(function(){return mr.apply(void 0,[t.state].concat(gn(function(e){for(var t=e.getParent(),r=[e.getHelper().state];null!==t;)r=[t.getHelper().state].concat(r),t=t.getParent();return r}(n))))},function(){return n.getHelper().recommendState}),null!=(a=null==(e=i._initialResults)?void 0:e[this.getIndexId()])&&a.results&&(r=new S.SearchResults(new S.SearchParameters(a.state),a.results),p.lastResults=r,m.lastResults=r),null!=a&&a.recommendResults&&(e=new S.RecommendResults(new S.RecommendParameters({params:a.recommendResults.params}),a.recommendResults.results),p.lastRecommendResults=e,m.lastRecommendResults=e),m.on("change",function(e){e.isPageReset&&!function r(e){e=e.filter(Ot);0!==e.length&&e.forEach(function(e){var t=e.getHelper();On(t,{state:t.state.resetPage(),recommendState:t.recommendState,isPageReset:!0}),r(e.getWidgets())})}(l)}),p.on("search",function(){i.scheduleStalledRender()}),p.on("result",function(e){e=e.results;i.scheduleRender(),m.lastResults=e,y=null==e?void 0:e._state}),p.on("recommend:result",function(e){e=e.recommend;i.scheduleRender(),m.lastRecommendResults=e.results}),l.forEach(function(e){e.getRenderState&&En({renderState:e.getRenderState(i.renderState[n.getIndexId()]||{},vr(i,n,o)),instantSearchInstance:i,parent:n})}),l.forEach(function(e){e.init&&e.init(vr(i,n,o))}),m.on("change",function(e){var t=e.state,e=e._uiState;f=jn(l,{searchParameters:t,helper:m},e||{}),i.onStateChange||i.onInternalStateChange()}),a&&i.scheduleRender(),g&&(i._hasRecommendWidget=!0),v)&&(i._hasSearchWidget=!0)},render:function(e){var t=this,r=e.instantSearchInstance,e=("error"===r.status&&!r.mainHelper.hasPendingRequests()&&y&&m.setState(y),this.getResults()||null!=(e=p)&&e.lastRecommendResults||u&&!s?l:l.filter(function(e){return e.shouldRender}));(e=e.filter(function(e){return!e.shouldRender||e.shouldRender({instantSearchInstance:r})})).forEach(function(e){e.getRenderState&&En({renderState:e.getRenderState(r.renderState[t.getIndexId()]||{},br(r,t,e)),instantSearchInstance:r,parent:t})}),e.forEach(function(e){e.render&&e.render(br(r,t,e))})},dispose:function(){var e,t=this;l.forEach(function(e){e.dispose&&m&&e.dispose({helper:m,state:m.state,recommendState:m.recommendState,parent:t})}),(h=d=null)!=(e=m)&&e.removeAllListeners(),(m=null)!=(e=p)&&e.detach(),p=null},getWidgetUiState:function(e){return l.filter(Ot).filter(function(e){return!e._isolated}).reduce(function(e,t){return t.getWidgetUiState(e)},pn(pn({},e),{},yn({},c,pn(pn({},e[c]),f))))},getWidgetState:function(e){return this.getWidgetUiState(e)},getWidgetSearchParameters:function(e,t){t=t.uiState;return wn(l,{uiState:t,initialSearchParameters:e})},shouldRender:function(){return!0},refreshUiState:function(){f=jn(l,{searchParameters:this.getHelper().state,helper:this.getHelper()},f)},setIndexUiState:function(e){var t="function"==typeof e?e(f):e;d.setUiState(function(e){return pn(pn({},e),{},yn({},c,t))})}}};function En(e){var t=e.renderState,r=e.instantSearchInstance,e=e.parent,e=(e||r.mainIndex).getIndexId();r.renderState=pn(pn({},r.renderState),{},yn({},e,pn(pn({},r.renderState[e]),t)))}function xn(){return U(b.useReducer(function(e){return e+1},0),2)[1]}var In=["children"];function Fn(r){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.descendantName,e=e.modifierName,t=t?"-".concat(t):"",e=e?"--".concat(e):"";return"".concat("ais","-").concat(r).concat(t).concat(e)}}var _n=Fn("Highlight");var Tn=Fn("ReverseHighlight");var An=Fn("Snippet");var Dn=Fn("ReverseSnippet");function kn(e){return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cn(e,t){var r,e={method:e,payload:t},t=e.method;if("object"!==kn(e=e.payload))throw new Error("The insights helper expects the payload to be an object.");try{r=dt(e)}catch(e){throw new Error("Could not JSON serialize the payload object.")}return'data-insights-method="'.concat(t,'" data-insights-payload="').concat(r,'"')}function Nn(e){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Mn="_ALGOLIA";function Wn(){var e=Mn;if("object"===("undefined"==typeof document?"undefined":Nn(document))&&"string"==typeof document.cookie)for(var t="".concat(e,"="),r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}}function Hn(e){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ln(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?$n(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Hn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Hn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Hn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):$n(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Un(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||qn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qn(e){return function(e){if(Array.isArray(e))return Bn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(e,t){var r;if(e)return"string"==typeof e?Bn(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bn(e,t):void 0}function Bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Vn="2.17.2",Jn="https://cdn.jsdelivr.net/npm/search-insights@".concat(Vn,"/dist/search-insights.min.js");function zn(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.insightsClient,y=e.insightsInitParams,g=e.onEvent,r=e.$$internal,v=void 0!==r&&r,r=e.$$automatic,b=void 0!==r&&r,a=t,S=(t||null===t||Pr(function(e){var n=e.window,i=n.AlgoliaAnalyticsObject||"aa";(a="string"==typeof i?n[i]:a)||(n.AlgoliaAnalyticsObject=i,n[i]||(n[i]=function(){n[i].queue||(n[i].queue=[]);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n[i].queue.push(t)},n[i].version=Vn,n[i].shouldAddScript=!0),a=n[i])}),a||j);return function(e){var l=e.instantSearchInstance,e=l.middleware.filter(function(e){return"ais.insights"===e.instance.$$type&&e.instance.$$internal}).map(function(e){return e.creator});l.unuse.apply(l,Qn(e));var t,f,d,e=Un(At(l.client),2),r=e[0],e=e[1],h=void 0,m=void 0,p=void 0,n=S.queue;return Array.isArray(n)&&(t=["setUserToken","init"].map(function(t){var e=Et(n.slice().reverse(),function(e){return Un(e,1)[0]===t})||[];return Un(e,2)[1]}),t=Un(t,2),m=t[0],h=t[1]),S("getUserToken",null,function(e,t){p=Xn(t)}),!y&&Kn(S)||S("init",Ln({appId:r,apiKey:e,partial:!0},y)),{$$type:"ais.insights",$$internal:v,$$automatic:b,onStateChange:function(){},subscribe:function(){if(S.shouldAddScript){var t="[insights middleware]: could not load search-insights.js. Please load it manually following https://alg.li/insights-init";try{var e=document.createElement("script");e.async=!0,e.src=Jn,e.onerror=function(){l.emit("error",new Error(t))},document.body.appendChild(e),S.shouldAddScript=!1}catch(e){S.shouldAddScript=!1,l.emit("error",new Error(t))}}},started:function(){S("addAlgoliaAgent","insights-middleware"),d=l.mainHelper;var e,r=S.queue,t=(Array.isArray(r)&&(e=["setUserToken","init"].map(function(t){var e=Et(r.slice().reverse(),function(e){return Un(e,1)[0]===t})||[];return Un(e,2)[1]}),e=Un(e,2),m=e[0],h=e[1]),o=(null==(o=(e=l)._initialResults)||null==(o=o[e.indexName])?void 0:o.state)||{},e=e.mainHelper.state,f={userToken:o.userToken||e.userToken,clickAnalytics:o.clickAnalytics||e.clickAnalytics},b||d.overrideStateWithoutTriggeringChangeEvent(Ln(Ln({},d.state),{},{clickAnalytics:!0})),v||l.scheduleSearch(),function(e){var t,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=Xn(e);function i(){d.overrideStateWithoutTriggeringChangeEvent(Ln(Ln({},d.state),{},{userToken:n})),t&&t!==e&&l.scheduleSearch()}n&&(t=d.state.userToken,r?i():setTimeout(i,0))});function n(e){t(e,!0),S("setUserToken",e)}var i,a,o=void 0,s=Wn(),s=(o=s||"anonymous-".concat("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),f.userToken),c=((i=null!=y&&y.userToken?y.userToken:i)?n(i):s?n(s):p?n(p):m?n(m):o&&(n(o),null!=y&&y.useCookie||null!=(i=h)&&i.useCookie)&&(s=o,o=(null==y?void 0:y.cookieDuration)||(null==(i=h)?void 0:i.cookieDuration),(i=new Date).setTime(i.getTime()+(o||15552e6)),o="expires=".concat(i.toUTCString()),document.cookie="_ALGOLIA=".concat(s,";").concat(o,";path=/")),S("onUserTokenChange",function(e){return t(e,!0)},{immediate:!0}),S),u=(Kn(S)&&(c=function(e,t){var r=Un(At(l.client),2),n=r[0],r=r[1];return S(e,t,{headers:{"X-Algolia-Application-Id":n,"X-Algolia-API-Key":r}})}),new Set);l.mainHelper.derivedHelpers[0].on("result",function(e){e=e.results;!e||e.queryID&&e.queryID===a||(a=e.queryID,u.clear())}),l.sendEventToInsights=function(e){if(g)g(e,c);else if(e.insightsMethod){if("viewedObjectIDs"===e.insightsMethod){var t=e.payload,r=t.objectIDs.filter(function(e){return!u.has(e)});if(0===r.length)return;r.forEach(function(e){return u.add(e)}),t.objectIDs=r}e.payload.algoliaSource=["instantsearch"],b&&e.payload.algoliaSource.push("instantsearch-automatic"),"internal"===e.eventModifier&&e.payload.algoliaSource.push("instantsearch-internal"),c(e.insightsMethod,e.payload)}}},unsubscribe:function(){S("onUserTokenChange",void 0),l.sendEventToInsights=j,d&&f&&(d.overrideStateWithoutTriggeringChangeEvent(Ln(Ln({},d.state),f)),l.scheduleSearch())}}}}function Kn(e){var e=Un((e.version||"").split(".").map(Number),2),t=e[0],e=e[1];return 3<=t||2===t&&6<=e||1===t&&10<=e}function Xn(e){if(e)return"number"==typeof e?e.toString():e}function Gn(e){var e=(0<arguments.length&&void 0!==e?e:{}).$$internal,a=void 0!==e&&e;return function(e){var t=e.instantSearchInstance,r={widgets:[]},n=document.createElement("meta"),i=document.querySelector("head");return n.name="instantsearch:widgets",{$$type:"ais.metadata",$$internal:a,onStateChange:function(){},subscribe:function(){setTimeout(function(){r.ua=Tt(t.client),function n(e,i,a){var o=vr(i,i.mainIndex,i._initialUiState);e.forEach(function(e){var t={},r=(e.getWidgetRenderState&&(r=e.getWidgetRenderState(o))&&r.widgetParams&&(t=r.widgetParams),Object.keys(t).filter(function(e){return void 0!==t[e]}));a.widgets.push({type:e.$$type,widgetType:e.$$widgetType,params:r}),"ais.index"===e.$$type&&n(e.getWidgets(),i,a)})}(t.mainIndex.getWidgets(),t,r),t.middleware.forEach(function(e){return r.widgets.push({middleware:!0,type:e.instance.$$type,internal:e.instance.$$internal})}),n.content=JSON.stringify(r),i.appendChild(n)},0)},started:function(){},unsubscribe:function(){n.remove()}}}}function Yn(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r}function Zn(e,t,r,n,i,a,o,s,c,u,l,f,d,h){var m=e;if("function"==typeof o?m=o(t,m):m instanceof Date?m=u(m):"comma"===r&&ui(m)&&(m=oi.maybeMap(m,function(e){return e instanceof Date?u(e):e})),null===m){if(n)return a&&!d?a(t,w.encoder,h,"key",l):t;m=""}if(mi(m)||oi.isBuffer(m)){if(a){e=d?t:a(t,w.encoder,h,"key",l);if("comma"===r&&d){for(var p=li.call(String(m),","),y="",g=0;g<p.length;++g)y+=(0===g?"":",")+f(a(p[g],w.encoder,h,"value",l));return[f(e)+"="+y]}return[f(e)+"="+f(a(m,w.encoder,h,"value",l))]}return[f(t)+"="+f(String(m))]}var v,b=[];if(void 0!==m){v="comma"===r&&ui(m)?[{value:0<m.length?m.join(",")||null:void 0}]:ui(o)?o:(e=Object.keys(m),s?e.sort(s):e);for(var S=0;S<v.length;++S){var O=v[S],j="object"==typeof O&&void 0!==O.value?O.value:m[O];i&&null===j||(O=ui(m)?"function"==typeof r?r(t,O):t:t+(c?"."+O:"["+O+"]"),di(b,Zn(j,O,r,n,i,a,o,s,c,u,l,f,d,h)))}}return b}var ei=String.prototype.replace,ti=/%20/g,z="RFC3986",ri={default:z,formatters:{RFC1738:function(e){return ei.call(e,ti,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:z},ni=Object.prototype.hasOwnProperty,ii=Array.isArray,ai=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),oi={arrayToObject:Yn,assign:function(e,r){return Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],o=Object.keys(a),s=0;s<o.length;++s){var c=o[s],u=a[c];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:c}),r.push(u))}for(var l=t;1<l.length;){var f=l.pop(),d=f.obj[f.prop];if(ii(d)){for(var h=[],m=0;m<d.length;++m)void 0!==d[m]&&h.push(d[m]);f.obj[f.prop]=h}}return e},decode:function(t,e,r){t=t.replace(/\+/g," ");if("iso-8859-1"===r)return t.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(t)}catch(e){return t}},encode:function(e,t,r,n,i){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",s=0;s<a.length;++s){var c=a.charCodeAt(s);45===c||46===c||95===c||126===c||48<=c&&c<=57||65<=c&&c<=90||97<=c&&c<=122||i===ri.RFC1738&&(40===c||41===c)?o+=a.charAt(s):c<128?o+=ai[c]:c<2048?o+=ai[192|c>>6]+ai[128|63&c]:c<55296||57344<=c?o+=ai[224|c>>12]+ai[128|c>>6&63]+ai[128|63&c]:(s+=1,c=65536+((1023&c)<<10|1023&a.charCodeAt(s)),o+=ai[240|c>>18]+ai[128|c>>12&63]+ai[128|c>>6&63]+ai[128|63&c])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(ii(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function n(i,a,o){if(!a)return i;if("object"!=typeof a){if(ii(i))i.push(a);else{if(!i||"object"!=typeof i)return[i,a];(o&&(o.plainObjects||o.allowPrototypes)||!ni.call(Object.prototype,a))&&(i[a]=!0)}return i}var e;return i&&"object"==typeof i?(ii(e=i)&&!ii(a)&&(e=Yn(i,o)),ii(i)&&ii(a)?(a.forEach(function(e,t){var r;ni.call(i,t)?(r=i[t])&&"object"==typeof r&&e&&"object"==typeof e?i[t]=n(r,e,o):i.push(e):i[t]=e}),i):Object.keys(a).reduce(function(e,t){var r=a[t];return ni.call(e,t)?e[t]=n(e[t],r,o):e[t]=r,e},e)):[i].concat(a)}},si=Object.prototype.hasOwnProperty,ci={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},ui=Array.isArray,li=String.prototype.split,fi=Array.prototype.push,di=function(e,t){fi.apply(e,ui(t)?t:[t])},hi=Date.prototype.toISOString,Y=ri.default,w={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:oi.encode,encodeValuesOnly:!1,format:Y,formatter:ri.formatters[Y],indices:!1,serializeDate:function(e){return hi.call(e)},skipNulls:!1,strictNullHandling:!1},mi=function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e},pi=Object.prototype.hasOwnProperty,yi=Array.isArray,f={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:oi.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},gi=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},vi=function(e,t){return e&&"string"==typeof e&&t.comma&&-1<e.indexOf(",")?e.split(","):e},bi="utf8=%26%2310003%3B",Si="utf8=%E2%9C%93",Oi=function(e,t,r,n){for(var i=n?t:vi(t,r),a=e.length-1;0<=a;--a){var o,s,c,u=e[a];"[]"===u&&r.parseArrays?o=[].concat(i):(o=r.plainObjects?Object.create(null):{},s="["===u.charAt(0)&&"]"===u.charAt(u.length-1)?u.slice(1,-1):u,c=parseInt(s,10),r.parseArrays||""!==s?!isNaN(c)&&u!==s&&String(c)===s&&0<=c&&r.parseArrays&&c<=r.arrayLimit?(o=[])[c]=i:"__proto__"!==s&&(o[s]=i):o={0:i}),i=o}return i},ji={formats:ri,parse:function(e,t){var r=function(e){if(!e)return f;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=(void 0===e.charset?f:e).charset;return{allowDots:void 0===e.allowDots?f.allowDots:!!e.allowDots,allowPrototypes:("boolean"==typeof e.allowPrototypes?e:f).allowPrototypes,arrayLimit:("number"==typeof e.arrayLimit?e:f).arrayLimit,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:f).charsetSentinel,comma:("boolean"==typeof e.comma?e:f).comma,decoder:("function"==typeof e.decoder?e:f).decoder,delimiter:("string"==typeof e.delimiter||oi.isRegExp(e.delimiter)?e:f).delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:f.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:("boolean"==typeof e.interpretNumericEntities?e:f).interpretNumericEntities,parameterLimit:("number"==typeof e.parameterLimit?e:f).parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:("boolean"==typeof e.plainObjects?e:f).plainObjects,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:f).strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?function(e,t){var r,n,i,a,o={},e=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,c=e.split(t.delimiter,s),u=-1,l=t.charset;if(t.charsetSentinel)for(r=0;r<c.length;++r)0===c[r].indexOf("utf8=")&&(c[r]===Si?l="utf-8":c[r]===bi&&(l="iso-8859-1"),u=r,r=c.length);for(r=0;r<c.length;++r)r!==u&&((a=-1===(a=-1===(a=(n=c[r]).indexOf("]="))?n.indexOf("="):a+1)?(i=t.decoder(n,f.decoder,l,"key"),t.strictNullHandling?null:""):(i=t.decoder(n.slice(0,a),f.decoder,l,"key"),oi.maybeMap(vi(n.slice(a+1),t),function(e){return t.decoder(e,f.decoder,l,"value")})))&&t.interpretNumericEntities&&"iso-8859-1"===l&&(a=gi(a)),-1<n.indexOf("[]=")&&(a=yi(a)?[a]:a),pi.call(o,i)?o[i]=oi.combine(o[i],a):o[i]=a);return o}(e,r):e,i=r.plainObjects?Object.create(null):{},a=Object.keys(n),o=0;o<a.length;++o)var s=a[o],s=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,o=0<r.depth&&/(\[[^[\]]*])/.exec(i),e=o?i.slice(0,o.index):i,s=[];if(e){if(!r.plainObjects&&pi.call(Object.prototype,e)&&!r.allowPrototypes)return;s.push(e)}for(var c=0;0<r.depth&&null!==(o=a.exec(i))&&c<r.depth;){if(c+=1,!r.plainObjects&&pi.call(Object.prototype,o[1].slice(1,-1))&&!r.allowPrototypes)return;s.push(o[1])}return o&&s.push("["+i.slice(o.index)+"]"),Oi(s,t,r,n)}}(s,n[s],r,"string"==typeof e),i=oi.merge(i,s,r);return oi.compact(i)},stringify:function(e,t){var r=e,n=function(e){if(!e)return w;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||w.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=ri.default;if(void 0!==e.format){if(!si.call(ri.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=ri.formatters[r],i=w.filter;return"function"!=typeof e.filter&&!ui(e.filter)||(i=e.filter),{addQueryPrefix:("boolean"==typeof e.addQueryPrefix?e:w).addQueryPrefix,allowDots:void 0===e.allowDots?w.allowDots:!!e.allowDots,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:w).charsetSentinel,delimiter:(void 0===e.delimiter?w:e).delimiter,encode:("boolean"==typeof e.encode?e:w).encode,encoder:("function"==typeof e.encoder?e:w).encoder,encodeValuesOnly:("boolean"==typeof e.encodeValuesOnly?e:w).encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:("function"==typeof e.serializeDate?e:w).serializeDate,skipNulls:("boolean"==typeof e.skipNulls?e:w).skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:w).strictNullHandling}}(t),i=("function"==typeof n.filter?r=(0,n.filter)("",r):ui(n.filter)&&(o=n.filter),[]);if("object"!=typeof r||null===r)return"";var e=t&&t.arrayFormat in ci?t.arrayFormat:!(t&&"indices"in t)||t.indices?"indices":"repeat",a=ci[e],o=o||Object.keys(r);n.sort&&o.sort(n.sort);for(var s=0;s<o.length;++s){var c=o[s];n.skipNulls&&null===r[c]||di(i,Zn(r[c],c,a,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset))}t=i.join(n.delimiter),e=!0===n.addQueryPrefix?"?":"";return n.charsetSentinel&&("iso-8859-1"===n.charset?e+="utf8=%26%2310003%3B&":e+="utf8=%E2%9C%93&"),0<t.length?e+t:""}};function wi(e){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ri(n.key),n)}}function d(e,t,r){(t=Ri(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function Ri(e){e=function(e,t){if("object"!=wi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=wi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==wi(e)?e:e+""}function Ei(e){e&&(window.document.title=e)}var xi=function(){function l(e){var r=this,t=e.windowTitle,n=e.writeDelay,n=void 0===n?400:n,i=e.createURL,a=e.parseURL,o=e.getLocation,s=e.start,c=e.dispose,u=e.push,e=e.cleanUrlOnDispose;if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");d(this,"$$type","ais.browser"),d(this,"windowTitle",void 0),d(this,"writeDelay",void 0),d(this,"_createURL",void 0),d(this,"parseURL",void 0),d(this,"getLocation",void 0),d(this,"writeTimer",void 0),d(this,"_onPopState",void 0),d(this,"inPopState",!1),d(this,"isDisposed",!1),d(this,"latestAcknowledgedHistory",0),d(this,"_start",void 0),d(this,"_dispose",void 0),d(this,"_push",void 0),d(this,"_cleanUrlOnDispose",void 0),this.windowTitle=t,this.writeTimer=void 0,this.writeDelay=n,this._createURL=i,this.parseURL=a,this.getLocation=o,this._start=s,this._dispose=c,this._push=u,this._cleanUrlOnDispose=void 0===e||e,Pr(function(e){var e=e.window,t=r.windowTitle&&r.windowTitle(r.read());Ei(t),r.latestAcknowledgedHistory=e.history.length})}var e,t,r;return e=l,(t=[{key:"read",value:function(){return this.parseURL({qsModule:ji,location:this.getLocation()})}},{key:"write",value:function(i){var a=this;Pr(function(e){var t=e.window,r=a.createURL(i),n=a.windowTitle&&a.windowTitle(i);a.writeTimer&&clearTimeout(a.writeTimer),a.writeTimer=setTimeout(function(){Ei(n),a.shouldWrite(r)&&(a._push?a._push(r):t.history.pushState(i,n||"",r),a.latestAcknowledgedHistory=t.history.length),a.inPopState=!1,a.writeTimer=void 0},a.writeDelay)})}},{key:"onUpdate",value:function(e){var t=this;this._start&&this._start(function(){e(t.read())}),this._onPopState=function(){t.writeTimer&&(clearTimeout(t.writeTimer),t.writeTimer=void 0),t.inPopState=!0,e(t.read())},Pr(function(e){e.window.addEventListener("popstate",t._onPopState)})}},{key:"createURL",value:function(e){return this._createURL({qsModule:ji,routeState:e,location:this.getLocation()})}},{key:"dispose",value:function(){var t=this;this._dispose&&this._dispose(),this.isDisposed=!0,Pr(function(e){e=e.window;t._onPopState&&e.removeEventListener("popstate",t._onPopState)}),this.writeTimer&&clearTimeout(this.writeTimer),this._cleanUrlOnDispose&&this.write({})}},{key:"start",value:function(){this.isDisposed=!1}},{key:"shouldWrite",value:function(r){var n=this;return Pr(function(e){var t,e=e.window;return!(n.isDisposed&&!n._cleanUrlOnDispose)&&(t=!(n.isDisposed&&n.latestAcknowledgedHistory!==e.history.length),!n.inPopState)&&t&&r!==e.location.href})}}])&&Pi(e.prototype,t),r&&Pi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}();function Ii(e){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Fi=["configure"];function _i(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ti(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_i(Object(r),!0).forEach(function(e){Ai(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ai(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Ii(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Ii(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ii(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Di(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function ki(e){e.configure;return Di(e,Fi)}function Ci(e){return(Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ni(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Mi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ni(Object(r),!0).forEach(function(e){Wi(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ni(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Wi(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Ci(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Ci(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ci(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hi(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.router,i=void 0===t?function(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.createURL,r=e.parseURL,n=e.writeDelay,i=e.windowTitle,a=e.getLocation,o=e.start,s=e.dispose,c=e.push,e=e.cleanUrlOnDispose;return new xi({createURL:void 0===t?function(e){var t=e.qsModule,r=e.routeState,e=e.location,n=e.protocol,i=e.hostname,a=e.port,a=void 0===a?"":a,o=e.pathname,e=e.hash,t=t.stringify(r),r=""===a?"":":".concat(a);return(t?"".concat(n,"//").concat(i).concat(r).concat(o,"?").concat(t):"".concat(n,"//").concat(i).concat(r).concat(o)).concat(e)}:t,parseURL:void 0===r?function(e){var t=e.qsModule,e=e.location;return t.parse(e.search.slice(1),{arrayLimit:99})}:r,writeDelay:void 0===n?400:n,windowTitle:i,getLocation:void 0===a?function(){return Pr(function(e){return e.window.location},{fallback:function(){throw new Error("You need to provide `getLocation` to the `history` router in environments where `window` does not exist.")}})}:a,start:o,dispose:s,push:c,cleanUrlOnDispose:e})}():t,a=void 0===(t=e.stateMapping)?{$$type:"ais.simple",stateToRoute:function(r){return Object.keys(r).reduce(function(e,t){return Ti(Ti({},e),{},Ai({},t,ki(r[t])))},{})},routeToState:function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(r).reduce(function(e,t){return Ti(Ti({},e),{},Ai({},t,ki(r[t])))},{})}}:t,o=void 0!==(t=e.$$internal)&&t;return function(e){var t=e.instantSearchInstance;t._createURL=function(r){var e=0===t.mainIndex.getWidgets().length?t._initialUiState:t.mainIndex.getWidgetUiState({}),e=Object.keys(r).reduce(function(e,t){return Mi(Mi({},e),{},Wi({},t,r[t]))},e),e=a.stateToRoute(e);return i.createURL(e)};var r=void 0,n=t._initialUiState;return{$$type:"ais.router({router:".concat(i.$$type||"__unknown__",", stateMapping:").concat(a.$$type||"__unknown__","})"),$$internal:o,onStateChange:function(e){e=e.uiState,e=a.stateToRoute(e);void 0!==r&&ar(r,e)||(i.write(e),r=e)},subscribe:function(){t._initialUiState=Mi(Mi({},n),a.routeToState(i.read())),i.onUpdate(function(e){0<t.mainIndex.getWidgets().length&&t.setUiState(a.routeToState(e))})},started:function(){var e;null!=(e=i.start)&&e.call(i)},unsubscribe:function(){i.dispose()}}}}function $i(e){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Li(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ui(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Li(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=$i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=$i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==$i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Li(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Qi(e){var r=e.numberLocale;return{formatNumber:function(e,t){return Number(t(e)).toLocaleString(r)},highlight:function(e,t){try{var r=JSON.parse(e);return t((n=Ui(Ui({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(Nt(o._highlightResult,i)||{}).value)?"":o,o=_n({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),i.replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\nThe highlight helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},reverseHighlight:function(e,t){try{var r=JSON.parse(e);return t((n=Ui(Ui({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(Nt(o._highlightResult,i)||{}).value)?"":o,o=Tn({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),at(wr(Dt(i))).replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\n  The reverseHighlight helper expects a JSON object of the format:\n  { "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},snippet:function(e,t){try{var r=JSON.parse(e);return t((n=Ui(Ui({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(Nt(o._snippetResult,i)||{}).value)?"":o,o=An({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),i.replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\nThe snippet helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},reverseSnippet:function(e,t){try{var r=JSON.parse(e);return t((n=Ui(Ui({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(Nt(o._snippetResult,i)||{}).value)?"":o,o=Dn({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),at(wr(Dt(i))).replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\n  The reverseSnippet helper expects a JSON object of the format:\n  { "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},insights:function(e,t){try{var r=JSON.parse(e),n=r.method,i=r.payload;return t(Cn(n,Ui({objectIDs:[this.objectID]},i)))}catch(e){throw new Error('\nThe insights helper expects a JSON object of the format:\n{ "method": "method-name", "payload": { "eventName": "name of the event" } }')}}}}function qi(e){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bi(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Vi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bi(Object(r),!0).forEach(function(e){v(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bi(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ji(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yi(n.key),n)}}function zi(e,t){return(zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ki(r){var n=Xi();return function(){var e,t=Gi(r),t=(e=n?(e=Gi(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"==qi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Xi=function(){return!!e})()}function Gi(e){return(Gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,r){(t=Yi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function Yi(e){e=function(e,t){if("object"!=qi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=qi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==qi(e)?e:e+""}var Zi=i({name:"instantsearch"});function ea(){return"#"}var ta={preserveSharedStateOnUnmount:!1,persistHierarchicalRootCount:!1},ra=function(){var e=p,t=q;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zi(e,t);var r,m=Ki(p);function p(e){var r;if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");v(y(r=m.call(this)),"client",void 0),v(y(r),"indexName",void 0),v(y(r),"compositionID",void 0),v(y(r),"insightsClient",void 0),v(y(r),"onStateChange",null),v(y(r),"future",void 0),v(y(r),"helper",void 0),v(y(r),"mainHelper",void 0),v(y(r),"mainIndex",void 0),v(y(r),"started",void 0),v(y(r),"templatesConfig",void 0),v(y(r),"renderState",{}),v(y(r),"_stalledSearchDelay",void 0),v(y(r),"_searchStalledTimer",void 0),v(y(r),"_initialUiState",void 0),v(y(r),"_initialResults",void 0),v(y(r),"_manuallyResetScheduleSearch",!1),v(y(r),"_resetScheduleSearch",void 0),v(y(r),"_createURL",void 0),v(y(r),"_searchFunction",void 0),v(y(r),"_mainHelperSearch",void 0),v(y(r),"_hasSearchWidget",!1),v(y(r),"_hasRecommendWidget",!1),v(y(r),"_insights",void 0),v(y(r),"middleware",[]),v(y(r),"sendEventToInsights",void 0),v(y(r),"status","idle"),v(y(r),"error",void 0),v(y(r),"scheduleSearch",Pt(function(){r.started&&r.mainHelper.search()})),v(y(r),"scheduleRender",Pt(function(){var e,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!=(e=r.mainHelper)&&e.hasPendingRequests()||(clearTimeout(r._searchStalledTimer),r._searchStalledTimer=null,t&&(r.status="idle",r.error=void 0)),r.mainIndex.render({instantSearchInstance:y(r)}),r.emit("render")})),v(y(r),"onInternalStateChange",Pt(function(){var t=r.mainIndex.getWidgetUiState({});r.middleware.forEach(function(e){e.instance.onStateChange({uiState:t})})})),r.setMaxListeners(100);var t=e.indexName,t=void 0===t?"":t,n=e.compositionID,i=e.numberLocale,a=e.initialUiState,a=void 0===a?{}:a,o=e.routing,o=void 0===o?null:o,s=e.insights,s=void 0===s?void 0:s,c=e.searchFunction,u=e.stalledSearchDelay,u=void 0===u?200:u,l=e.searchClient,l=void 0===l?null:l,f=e.insightsClient,f=void 0===f?null:f,d=e.onStateChange,d=void 0===d?null:d,h=e.future,e=void 0===h?Vi(Vi({},ta),e.future||{}):h;if(null===l)throw new Error(Zi("The `searchClient` option is required."));if("function"!=typeof l.search)throw new Error("The `searchClient` must implement a `search` method.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/");if("function"==typeof l.addAlgoliaAgent&&l.addAlgoliaAgent("instantsearch.js (".concat("4.87.1",")")),f&&"function"!=typeof f)throw new Error(Zi("The `insightsClient` option should be a function."));return r.client=l,r.future=e,r.insightsClient=f,r.indexName=t,r.compositionID=n,r.helper=null,r.mainHelper=null,r.mainIndex=Rn({indexName:r.compositionID||r.indexName}),r.onStateChange=d,r.started=!1,r.templatesConfig={helpers:Qi({numberLocale:i}),compileOptions:{}},r._stalledSearchDelay=u,r._searchStalledTimer=null,r._createURL=ea,r._initialUiState=a,r._initialResults=null,r._insights=s,c&&(r._searchFunction=c),r.sendEventToInsights=j,o&&((h="boolean"==typeof o?{}:o).$$internal=!0,r.use(Hi(h))),s&&((l="boolean"==typeof s?{}:s).$$internal=!0,r.use(zn(l))),Pr(function(e){return-1<(null==(e=e.window.navigator)||null==(e=e.userAgent)?void 0:e.indexOf("Algolia Crawler"))},{fallback:function(){return!1}})&&r.use(Gn({$$internal:!0})),r}return e=p,(t=[{key:"_isSearchStalled",get:function(){return"stalled"===this.status}},{key:"use",value:function(){for(var r=this,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.map(function(e){var t=Vi({$$type:"__unknown__",$$internal:!1,subscribe:j,started:j,unsubscribe:j,onStateChange:j},e({instantSearchInstance:r}));return r.middleware.push({creator:e,instance:t}),t});return this.started&&i.forEach(function(e){e.subscribe(),e.started()}),this}},{key:"unuse",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.middleware.filter(function(e){return t.includes(e.creator)}).forEach(function(e){return e.instance.unsubscribe()}),this.middleware=this.middleware.filter(function(e){return!t.includes(e.creator)}),this}},{key:"EXPERIMENTAL_use",value:function(){return this.use.apply(this,arguments)}},{key:"addWidget",value:function(e){return this.addWidgets([e])}},{key:"addWidgets",value:function(e){if(!Array.isArray(e))throw new Error(Zi("The `addWidgets` method expects an array of widgets. Please use `addWidget`."));if(this.compositionID&&e.some(function(e){return!Array.isArray(e)&&Ot(e)&&!e._isolated}))throw new Error(Zi("The `index` widget cannot be used with a composition-based InstantSearch implementation."));return this.mainIndex.addWidgets(e),this}},{key:"removeWidget",value:function(e){return this.removeWidgets([e])}},{key:"removeWidgets",value:function(e){if(Array.isArray(e))return this.mainIndex.removeWidgets(e),this;throw new Error(Zi("The `removeWidgets` method expects an array of widgets. Please use `removeWidget`."))}},{key:"start",value:function(){var n=this;if(this.started)throw new Error(Zi("The `start` method has already been called once."));var r,e,t,i,a,o=this.mainHelper||S(this.client,this.indexName,void 0,{persistHierarchicalRootCount:this.future.persistHierarchicalRootCount});this.compositionID&&(o.searchForFacetValues=o.searchForCompositionFacetValues.bind(o)),o.search=function(){return n.status="loading",n.scheduleRender(!1),n._hasSearchWidget&&(n.compositionID?o.searchWithComposition():o.searchOnlyWithDerivedHelpers()),n._hasRecommendWidget&&o.recommend(),o},this._searchFunction&&(r={search:function(){return new Promise(j)}},this._mainHelperSearch=o.search.bind(o),o.search=function(){var t=n.mainIndex.getHelper(),e=S(r,t.state.index,t.state);return e.once("search",function(e){e=e.state;t.overrideStateWithoutTriggeringChangeEvent(e),n._mainHelperSearch()}),e.on("change",function(e){e=e.state;t.setState(e)}),n._searchFunction(e),o}),o.on("error",function(e){var r,e=e.error;e instanceof Error||(r=e,e=Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},new Error(r.message))),e.error=e,n.error=e,n.status="error",n.scheduleRender(!1),n.emit("error",e)}),this.mainHelper=o,this.middleware.forEach(function(e){e.instance.subscribe()}),this.mainIndex.init({instantSearchInstance:this,parent:null,uiState:this._initialUiState}),this._initialResults?(rr(this.client,this._initialResults),t=this.mainHelper,i=this._initialResults,a=Object.keys(i).reduce(function(e,t){t=i[t];return t.recommendResults?Kt(Kt({},e),t.recommendResults.results):e},{}),t._recommendCache=a,e=this.scheduleSearch,this.scheduleSearch=Pt(j),this._manuallyResetScheduleSearch?this._resetScheduleSearch=function(){n.scheduleSearch=e}:Pt(function(){n.scheduleSearch=e})()):0<this.mainIndex.getWidgets().length&&this.scheduleSearch(),this.helper=this.mainIndex.getHelper(),this.started=!0,this.middleware.forEach(function(e){e.instance.started()}),void 0===this._insights&&o.derivedHelpers[0].once("result",function(){n.mainIndex.getScopedResults().some(function(e){e=e.results;return null==e?void 0:e._automaticInsights})&&n.use(zn({$$internal:!0,$$automatic:!0}))})}},{key:"dispose",value:function(){var e;this.scheduleSearch.cancel(),this.scheduleRender.cancel(),clearTimeout(this._searchStalledTimer),this.removeWidgets(this.mainIndex.getWidgets()),this.mainIndex.dispose(),this.started=!1,this.removeAllListeners(),null!=(e=this.mainHelper)&&e.removeAllListeners(),this.mainHelper=null,this.helper=null,this.middleware.forEach(function(e){e.instance.unsubscribe()})}},{key:"scheduleStalledRender",value:function(){var e=this;this._searchStalledTimer||(this._searchStalledTimer=setTimeout(function(){e.status="stalled",e.scheduleRender()},this._stalledSearchDelay))}},{key:"setUiState",value:function(e){var t=this,r=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(!this.mainHelper)throw new Error(Zi("The `start` method needs to be called before `setUiState`."));this.mainIndex.refreshUiState();var n="function"==typeof e?e(this.mainIndex.getWidgetUiState({})):e;this.onStateChange&&r?this.onStateChange({uiState:n,setUiState:function(e){jt("function"==typeof e?e(n):e,t.mainIndex),t.scheduleSearch(),t.onInternalStateChange()}}):(jt(n,this.mainIndex),this.scheduleSearch(),this.onInternalStateChange())}},{key:"getUiState",value:function(){return this.started&&this.mainIndex.refreshUiState(),this.mainIndex.getWidgetUiState({})}},{key:"createURL",value:function(){if(this.started)return this._createURL(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});throw new Error(Zi("The `start` method needs to be called before `createURL`."))}},{key:"refresh",value:function(){if(!this.mainHelper)throw new Error(Zi("The `start` method needs to be called before `refresh`."));this.mainHelper.clearCache().search()}}])&&Ji(e.prototype,t),r&&Ji(e,r),Object.defineProperty(e,"prototype",{writable:!1}),p}();function na(e,t){return e(t={exports:{}},t.exports),t.exports}var ia="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},aa=c.useState,oa=c.useEffect,sa=c.useLayoutEffect,ca=c.useDebugValue;function ua(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ia(e,r)}catch(e){return 1}}var G="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=aa({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return sa(function(){i.value=r,i.getSnapshot=t,ua(i)&&a({inst:i})},[e,r,t]),oa(function(){return ua(i)&&a({inst:i}),e(function(){ua(i)&&a({inst:i})})},[e]),ca(r),r},la={useSyncExternalStore:void 0!==c.useSyncExternalStore?c.useSyncExternalStore:G},fa=(na(function(e,t){}).useSyncExternalStore,na(function(e){e.exports=la}).useSyncExternalStore),da=["react (".concat(b.version,")"),"react-instantsearch (".concat(N,")"),"react-instantsearch-core (".concat(N,")")],ha="react-instantsearch-server (".concat(N,")"),ma=function(e){return e?"next.js (".concat(e,")"):null};function pa(e){var t,r=xn(),n=Ur(),i=qr(),a=Kr().waitForResultsRef,o=null==i?void 0:i.initialResults,s=b.useRef(e),a=n||o||a,c=b.useRef(null),o=(null===(c=null!=i&&i.ssrSearchRef?i.ssrSearchRef:c).current&&((t=new ra(e))._schedule=function(e){t._schedule.queue.push(e),clearTimeout(t._schedule.timer),t._schedule.timer=setTimeout(function(){t._schedule.queue.forEach(function(e){e()}),t._schedule.queue=[]},0)},t._schedule.queue=[],a&&(t._initialResults=o||{},t._manuallyResetScheduleSearch=!0),ya(e.searchClient,[].concat(da,[n&&ha,ma("undefined"!=typeof window&&(null==(u=window.next)?void 0:u.version)||("undefined"==typeof process||null==(u=process.env)?void 0:u.NEXT_RUNTIME))])),a&&t.start(),n&&n.notifyServer({search:t}),e.routing,c.current=t),c.current),u=s.current,l=(u.indexName!==e.indexName&&(o.helper.setIndex(e.indexName||"").search(),s.current=e),u.searchClient!==e.searchClient&&(ya(e.searchClient,[].concat(da,[n&&ha])),o.mainHelper.setClient(e.searchClient).search(),s.current=e),u.onStateChange!==e.onStateChange&&(o.onStateChange=e.onStateChange,s.current=e),u.searchFunction!==e.searchFunction&&(o._searchFunction=e.searchFunction,s.current=e),u.stalledSearchDelay!==e.stalledSearchDelay&&(o._stalledSearchDelay=null!=(a=e.stalledSearchDelay)?a:200,s.current=e),Dr(u.future,e.future)||(o.future=$($({},ta),e.future),s.current=e),b.useRef(null));return fa(b.useCallback(function(){var e=c.current;return null===l.current?e.started||(e.start(),r()):(clearTimeout(l.current),e._preventWidgetCleanup=!1),function(){null!=i&&i.ssrSearchRef||(clearTimeout(e._schedule.timer),l.current=setTimeout(function(){e.dispose()}),e._preventWidgetCleanup=!0)}},[r,i]),function(){return c.current},function(){return c.current})}function ya(t,e){"function"==typeof t.addAlgoliaAgent&&e.filter(Boolean).forEach(function(e){t.addAlgoliaAgent(e)})}var ga=["children"];function va(e){var t=e.search;return b.useEffect(function(){t._resetScheduleSearch&&t._resetScheduleSearch()},[t]),null}var ba=["children"];function Sa(e){var t=e.children,e=L(e,ba),r=c.useRef(null),n=c.useRef(0);return 0===Object.keys(e).length?c.createElement(c.Fragment,null,t):c.createElement(Qr.Provider,{value:$($({},e),{},{ssrSearchRef:r,recommendIdx:n})},t)}function Oa(e){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ja(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ja(Object(r),!0).forEach(function(e){wa(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ja(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function wa(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Oa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Oa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Oa(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pa(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(r,Ra()),function(s){var e=s||{},t=e.escapeHTML,c=void 0===t||t,t=e.transformItems,u=void 0===t?function(e){return e}:t,l={};return{$$type:"ais.autocomplete",init:function(e){var t=e.instantSearchInstance;r(h(h({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance,e=this.getWidgetRenderState(e);e.indices.forEach(function(e){(0,e.sendEvent)("view:internal",e.hits)}),r(h(h({},e),{},{instantSearchInstance:t}),!1)},getRenderState:function(e,t){return h(h({},e),{},{autocomplete:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var r=this,t=e.helper,n=e.state,i=e.scopedResults,a=e.instantSearchInstance,o=(l.refine||(l.refine=function(e){t.setQuery(e).search()}),{}),e=i.map(function(e){var t;return e.results&&(e.results.hits=c?it(e.results.hits):e.results.hits),o[e.indexId]=bt({instantSearchInstance:a,helper:e.helper,widgetType:r.$$type}),{indexId:e.indexId,indexName:(null==(t=e.results)?void 0:t.index)||"",hits:(null==(t=e.results)?void 0:t.hits)||[],results:e.results||{}}});return{currentRefinement:n.query||"",indices:u(e).map(function(e){return h(h({},e),{},{sendEvent:o[e.indexId]})}),refine:l.refine,widgetParams:s}},getWidgetUiState:function(e,t){t=t.searchParameters.query||"";return""===t||e&&e.query===t?e:h(h({},e),{},{query:t})},getWidgetSearchParameters:function(e,t){t={query:t.uiState.query||""};return c?e.setQueryParameters(h(h({},t),_)):e.setQueryParameters(t)},dispose:function(e){e=e.state,n(),e=e.setQueryParameter("query",void 0);return c?e.setQueryParameters(Object.keys(_).reduce(function(e,t){return h(h({},e),{},wa({},t,void 0))},{})):e}}}}var Ra=i({name:"autocomplete",connector:!0});function Ea(e){return(Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xa(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xa(Object(r),!0).forEach(function(e){Ia(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xa(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ia(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Ea(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Ea(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ea(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?_a(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ta(a){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j,f=(m(a,Aa()),{});return function(o){var s,e=o||{},r=e.attributes,t=e.separator,n=void 0===t?" > ":t,t=e.rootPath,i=void 0===t?null:t,t=e.transformItems,c=void 0===t?function(e){return e}:t;if(r&&Array.isArray(r)&&0!==r.length)return s=Fa(r,1)[0],{$$type:"ais.breadcrumb",init:function(e){a(O(O({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){a(O(O({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},dispose:function(){l()},getRenderState:function(e,t){return O(O({},e),{},{breadcrumb:O(O({},e.breadcrumb),{},Ia({},s,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var r=this,n=e.helper,i=e.createURL,t=e.results,e=e.state;var a,e=t&&0!==e.hierarchicalFacets.length?(e=(e=t.getFacetValues(s,{}))&&!Array.isArray(e)&&e.data?e.data:[],c((a=function r(e){return e.reduce(function(e,t){return e=t.isRefined&&(e.push({label:t.name,value:t.escapedValue}),Array.isArray(t.data))?e.concat(r(t.data)):e},[])}(e)).map(function(e,t){return{label:e.label,value:t+1===a.length?null:a[t+1].value}}),{results:t})):[];return f.createURL||(f.createURL=function(t){return i(function(e){return r.getWidgetUiState(e,{searchParameters:u(n.state,t),helper:n})})}),f.refine||(f.refine=function(e){n.setState(u(n.state,e)).search()}),{canRefine:0<e.length,createURL:f.createURL,items:e,refine:f.refine,widgetParams:o}},getWidgetUiState:function(e,t){var t=t.searchParameters.getHierarchicalFacetBreadcrumb(s);return e=O(O({},e),{},{hierarchicalMenu:O(O({},e.hierarchicalMenu),{},Ia({},s,t))}),t=s,e.hierarchicalMenu&&(e.hierarchicalMenu[t]&&e.hierarchicalMenu[t].length||delete e.hierarchicalMenu[t],0===Object.keys(e.hierarchicalMenu).length)&&delete e.hierarchicalMenu,e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.hierarchicalMenu&&t.hierarchicalMenu[s];if(e.isConjunctiveFacet(s)||e.isDisjunctiveFacet(s))return e;e.isHierarchicalFacet(s)&&e.getHierarchicalFacetByName(s);e=e.removeHierarchicalFacet(s).addHierarchicalFacet({name:s,attributes:r,separator:n,rootPath:i});return t?e.addHierarchicalFacetRefinement(s,t.join(n)):e.setQueryParameters({hierarchicalFacetsRefinements:O(O({},e.hierarchicalFacetsRefinements),{},Ia({},s,[]))})}};throw new Error(Aa("The `attributes` option expects an array of strings."));function u(e,t){return t?e.resetPage().toggleFacetRefinement(s,t):0===(t=e.getHierarchicalFacetBreadcrumb(s)).length?e:e.resetPage().toggleFacetRefinement(s,t[0])}}}var Aa=i({name:"breadcrumb",connector:!0});function Da(e){var t;return e.startsWith("data:")?"[DONE]"===(t=e.slice(5).trim())?null:t:e.startsWith("{")?e:null}function ka(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Na(n.key),n)}}function Ca(e,t,r){(t=Na(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function Na(e){e=function(e,t){if("object"!=Ma(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Ma(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ma(e)?e:e+""}function Ma(e){return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wa(){return Math.random().toString(36).substring(2,9)}function Ha(e){return"object"===Ma(e)&&null!==e&&"string"==typeof(e=e).type&&(e.type.startsWith("tool-")||"dynamic-tool"===e.type)}function $a(e){var e=e.messages;return 0!==e.length&&"assistant"===(e=e[e.length-1]).role&&!(!e.parts||0===e.parts.length)&&0!==(e=e.parts.filter(Ha)).length&&e.every(function(e){return"output-available"===e.state||"output-error"===e.state})}var La=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");Ca(this,"queue",[]),Ca(this,"isRunning",!1)}var t,r,n;return t=e,(r=[{key:"run",value:function(e){var n=this;return new Promise(function(t,r){n.queue.push(function(){return e().then(function(e){t(e)},function(e){r(e)})}),n.processQueue()})}},{key:"processQueue",value:function(){var r=this;this.isRunning||(this.isRunning=!0,function e(){var t;0===r.queue.length?r.isRunning=!1:(t=r.queue.shift())&&t().then(e,e)}())}}])&&ka(t.prototype,r),n&&ka(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ua(e){return void 0===e?Promise.resolve(void 0):"function"==typeof e?Promise.resolve(e()):Promise.resolve(e)}var Qa=["messageId"];function qa(e){return(qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ba(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function P(e){return function(e){if(Array.isArray(e))return Va(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?Va(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Va(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Va(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ja(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ja(Object(r),!0).forEach(function(e){E(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ja(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function za(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ka(n.key),n)}}function E(e,t,r){(t=Ka(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function Ka(e){e=function(e,t){if("object"!=qa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=qa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==qa(e)?e:e+""}var Xa=function(){function l(e){var o=this,t=e.generateId,t=void 0===t?Wa:t,r=e.id,r=void 0===r?t():r,n=e.transport,i=e.state,a=e.onError,s=e.onToolCall,c=e.onFinish,u=e.onData,e=e.sendAutomaticallyWhen;if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");E(this,"id",void 0),E(this,"generateId",void 0),E(this,"state",void 0),E(this,"transport",void 0),E(this,"onError",void 0),E(this,"onToolCall",void 0),E(this,"onFinish",void 0),E(this,"onData",void 0),E(this,"sendAutomaticallyWhen",void 0),E(this,"activeResponse",null),E(this,"jobExecutor",new La),E(this,"sendMessage",function(n,i){return o.jobExecutor.run(function(){var t,r;return(n?(t=n.messageId||o.generateId(),"parts"in n&&n.parts?Promise.resolve(R({id:t,role:"user"},n)):"text"in n&&n.text?(r=[{type:"text",text:n.text}],n.files?o.convertFilesToParts(n.files).then(function(e){return r.push.apply(r,P(e)),{id:t,role:"user",parts:r,metadata:n.metadata}}):Promise.resolve({id:t,role:"user",parts:r,metadata:n.metadata})):"files"in n&&n.files?o.convertFilesToParts(n.files).then(function(e){return{id:t,role:"user",parts:e,metadata:n.metadata}}):Promise.resolve(void 0)):Promise.resolve(void 0)).then(function(e){return e&&o.state.pushMessage(e),o.makeRequest(R({trigger:"submit-message",messageId:null==e?void 0:e.id},i))})})}),E(this,"regenerate",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=e.messageId,n=Ba(e,Qa);return o.jobExecutor.run(function(){var e=-1;if(r)e=o.state.messages.findIndex(function(e){return e.id===r});else for(var t=o.state.messages.length-1;0<=t;t--)if("assistant"===o.state.messages[t].role){e=t;break}return 0<=e&&(o.state.messages=o.state.messages.slice(0,e)),o.makeRequest(R({trigger:"regenerate-message",messageId:r},n))})}),E(this,"resumeStream",function(e){return o.jobExecutor.run(function(){return o.transport?(o.setStatus({status:"submitted"}),o.transport.reconnectToStream(R({chatId:o.id},e)).then(function(e){return e?o.processStreamWithCallbacks(e):(o.setStatus({status:"ready"}),Promise.resolve())},function(e){return o.handleError(e),Promise.resolve()})):Promise.reject(new Error("Transport is required for resuming stream. Please provide a transport when initializing the chat."))})}),E(this,"clearError",function(){"error"===o.state.status&&o.setStatus({status:"ready",error:void 0})}),E(this,"addToolResult",function(e){var n=e.tool,i=e.toolCallId,a=e.output;return o.jobExecutor.run(function(){var e,t,r=o.state.messages.findIndex(function(e){return null!=(e=null==(e=e.parts)?void 0:e.some(function(e){return"toolCallId"in e&&e.toolCallId===i||"type"in e&&e.type==="tool-".concat(String(n))}))&&e});return-1!==r&&(t=(e=o.state.messages[r]).parts.map(function(e){return"toolCallId"in e&&e.toolCallId===i&&"state"in e?R(R({},e),{},{state:"output-available",output:a}):e}),o.state.replaceMessage(r,R(R({},e),{},{parts:t})),o.sendAutomaticallyWhen)?Promise.resolve(o.sendAutomaticallyWhen({messages:o.state.messages})).then(function(e){return e?o.makeRequest({trigger:"submit-message"}):Promise.resolve()}):Promise.resolve()})}),E(this,"stop",function(){return o.activeResponse&&(o.activeResponse.abortController.abort(),o.activeResponse=null),o.setStatus({status:"ready"}),Promise.resolve()}),this.id=r,this.generateId=t,this.state=i,this.transport=n,this.onError=a,this.onToolCall=s,this.onFinish=c,this.onData=u,this.sendAutomaticallyWhen=e}var e,t,r;return e=l,(t=[{key:"status",get:function(){return this.state.status}},{key:"setStatus",value:function(e){var t=e.status,e=e.error;this.state.status=t,void 0!==e&&(this.state.error=e)}},{key:"error",get:function(){return this.state.error}},{key:"messages",get:function(){return this.state.messages},set:function(e){this.state.messages=e}},{key:"lastMessage",get:function(){return this.state.messages[this.state.messages.length-1]}},{key:"makeRequest",value:function(e){var t=this;if(!this.transport)return Promise.reject(new Error("Transport is required for sending messages. Please provide a transport when initializing the chat."));this.activeResponse&&this.activeResponse.abortController.abort();var r=new AbortController;return this.activeResponse={abortController:r},this.setStatus({status:"submitted"}),this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:r.signal,trigger:e.trigger,messageId:e.messageId,headers:e.headers,body:e.body,requestMetadata:e.metadata}).then(function(e){return t.activeResponse.stream=e,t.processStreamWithCallbacks(e)},function(e){return"AbortError"!==e.name&&t.handleError(e),Promise.resolve()})}},{key:"processStreamWithCallbacks",value:function(e){var s,c,u,l,f=this,d=(this.setStatus({status:"streaming"}),-1),h=!1,r=!1,m=!1,p=Promise.resolve();return new Promise(function(t){var n,i,a,o;n=function(t){switch(t.type){case"start":s=t.messageId||f.generateId();var e=f.lastMessage;d=(e&&"assistant"===e.role&&e.id===s?c=e:(c={id:s,role:"assistant",parts:[],metadata:t.messageMetadata},f.state.pushMessage(c)),f.state.messages.length-1);break;case"text-start":c&&(u=t.id,e={type:"text",text:"",state:"streaming",providerMetadata:t.providerMetadata},c=R(R({},c),{},{parts:[].concat(P(c.parts),[e])}),f.state.replaceMessage(d,c));break;case"text-delta":c&&u&&-1!==(e=c.parts.findIndex(function(e){return"text"===e.type&&"streaming"===e.state}))&&(i=(n=P(c.parts))[e],n[e]=R(R({},i),{},{text:i.text+t.delta}),c=R(R({},c),{},{parts:n}),f.state.replaceMessage(d,c));break;case"text-end":c&&-1!==(e=c.parts.findIndex(function(e){return"text"===e.type&&"streaming"===e.state}))&&(n=(i=P(c.parts))[e],i[e]=R(R({},n),{},{state:"done"}),c=R(R({},c),{},{parts:i}),f.state.replaceMessage(d,c),u=void 0);break;case"reasoning-start":c&&(l=t.id,e={type:"reasoning",text:"",state:"streaming",providerMetadata:t.providerMetadata},c=R(R({},c),{},{parts:[].concat(P(c.parts),[e])}),f.state.replaceMessage(d,c));break;case"reasoning-delta":c&&l&&-1!==(n=c.parts.findIndex(function(e){return"reasoning"===e.type&&"streaming"===e.state}))&&(e=(i=P(c.parts))[n],i[n]=R(R({},e),{},{text:e.text+t.delta}),c=R(R({},c),{},{parts:i}),f.state.replaceMessage(d,c));break;case"reasoning-end":c&&-1!==(n=c.parts.findIndex(function(e){return"reasoning"===e.type&&"streaming"===e.state}))&&(i=(e=P(c.parts))[n],e[n]=R(R({},i),{},{state:"done"}),c=R(R({},c),{},{parts:e}),f.state.replaceMessage(d,c),l=void 0);break;case"tool-input-start":c&&(n={type:"tool-".concat(t.toolName),toolCallId:t.toolCallId,state:"input-streaming",input:t.input,providerExecuted:t.providerExecuted},c=R(R({},c),{},{parts:[].concat(P(c.parts),[n])}),f.state.replaceMessage(d,c));break;case"tool-input-delta":break;case"tool-input-available":var r;c&&(i=c.parts.findIndex(function(e){return"toolCallId"in e&&e.toolCallId===t.toolCallId}),e={type:"tool-".concat(t.toolName),toolCallId:t.toolCallId,state:"input-available",input:t.input,callProviderMetadata:t.callProviderMetadata,providerExecuted:t.providerExecuted},c=0<=i?((n=P(c.parts))[i]=e,R(R({},c),{},{parts:n})):R(R({},c),{},{parts:[].concat(P(c.parts),[e])}),f.state.replaceMessage(d,c),f.onToolCall)&&!t.providerExecuted&&(r=f.onToolCall({toolCall:{toolName:t.toolName,toolCallId:t.toolCallId,input:t.input}}))&&"function"==typeof r.then&&(p=p.then(function(){return r}));break;case"tool-output-available":c&&0<=(i=c.parts.findIndex(function(e){return"toolCallId"in e&&e.toolCallId===t.toolCallId}))&&(e=(n=P(c.parts))[i],n[i]=R(R({},e),{},{state:"output-available",output:t.output,callProviderMetadata:t.callProviderMetadata,preliminary:t.preliminary}),c=R(R({},c),{},{parts:n}),f.state.replaceMessage(d,c));break;case"tool-error":c&&0<=(i=c.parts.findIndex(function(e){return"toolCallId"in e&&e.toolCallId===t.toolCallId}))&&(n=(e=P(c.parts))[i],e[i]=R(R({},n),{},{state:"output-error",errorText:t.errorText,input:null!=(i=t.input)?i:n.input,callProviderMetadata:t.callProviderMetadata}),c=R(R({},c),{},{parts:e}),f.state.replaceMessage(d,c));break;case"source-url":c&&(i={type:"source-url",sourceId:t.sourceId,url:t.url,title:t.title},c=R(R({},c),{},{parts:[].concat(P(c.parts),[i])}),f.state.replaceMessage(d,c));break;case"source-document":c&&(n={type:"source-document",sourceId:t.sourceId,mediaType:t.mediaType,title:t.title,filename:t.filename,providerMetadata:t.providerMetadata},c=R(R({},c),{},{parts:[].concat(P(c.parts),[n])}),f.state.replaceMessage(d,c));break;case"file":c&&(e={type:"file",url:t.url,mediaType:t.mediaType},c=R(R({},c),{},{parts:[].concat(P(c.parts),[e])}),f.state.replaceMessage(d,c));break;case"start-step":c&&(c=R(R({},c),{},{parts:[].concat(P(c.parts),[{type:"step-start"}])}),f.state.replaceMessage(d,c));break;case"message-metadata":c&&(c=R(R({},c),{},{metadata:t.messageMetadata}),f.state.replaceMessage(d,c));break;case"error":throw m=!0,new Error(t.errorText);case"abort":h=!0;break;case"finish":c&&void 0!==t.messageMetadata&&(c=R(R({},c),{},{metadata:t.messageMetadata}),f.state.replaceMessage(d,c));break;default:var n,i=t.type;null!=i&&i.startsWith("data-")&&c&&(n={type:i,id:t.id,data:t.data},c=R(R({},c),{},{parts:[].concat(P(c.parts),[n])}),f.state.replaceMessage(d,c),f.onData)&&f.onData(n)}},i=function(){p.then(function(){f.setStatus({status:"ready"}),f.activeResponse=null,f.onFinish&&c&&f.onFinish({message:c,messages:f.state.messages,isAbort:h,isDisconnect:r,isError:m}),t()})},a=function(e){"AbortError"===e.name?(h=!0,f.setStatus({status:"ready"})):(r=!0,f.handleError(e)),f.onFinish&&c&&f.onFinish({message:c,messages:f.state.messages,isAbort:h,isDisconnect:r,isError:m}),t()},o=e.getReader(),function r(){o.read().then(function(e){var t=e.done,e=e.value;t?(o.releaseLock(),i()):(t=n(e))&&"function"==typeof t.then?t.then(r,function(e){o.releaseLock(),a(e)}):r()},function(e){o.releaseLock(),a(e)})}()})}},{key:"handleError",value:function(e){this.setStatus({status:"error",error:e}),this.onError&&this.onError(e)}},{key:"convertFilesToParts",value:function(e){var r=this;if(Array.isArray(e))return Promise.resolve(e);for(var n=[],i=0;i<e.length;i++)!function(){var t=e[i];n.push(r.fileToDataUrl(t).then(function(e){return{type:"file",mediaType:t.type,filename:t.name,url:e}}))}();return Promise.all(n)}},{key:"fileToDataUrl",value:function(n){return new Promise(function(e,t){var r=new FileReader;r.onload=function(){return e(r.result)},r.onerror=t,r.readAsDataURL(n)})}}])&&za(e.prototype,t),r&&za(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}();function Ga(e){return(Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ya(e,t){return(Ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Za(r){var n=eo();return function(){var e,t=to(r),t=(e=n?(e=to(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"==Ga(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}}function eo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eo=function(){return!!e})()}function to(e){return(to=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ro(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function no(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ro(Object(r),!0).forEach(function(e){uo(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function io(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?ao(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ao(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ao(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function oo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function so(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lo(n.key),n)}}function co(e,t,r){t&&so(e.prototype,t),r&&so(e,r),Object.defineProperty(e,"prototype",{writable:!1})}function uo(e,t,r){(t=lo(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function lo(e){e=function(e,t){if("object"!=Ga(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Ga(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ga(e)?e:e+""}var fo=function(){function s(e){var t=e.api,t=void 0===t?"/api/chat":t,r=e.credentials,n=e.headers,i=e.body,a=e.fetch,o=e.prepareSendMessagesRequest,e=e.prepareReconnectToStreamRequest;oo(this,s),uo(this,"api",void 0),uo(this,"credentials",void 0),uo(this,"headers",void 0),uo(this,"body",void 0),uo(this,"fetch",void 0),uo(this,"prepareSendMessagesRequest",void 0),uo(this,"prepareReconnectToStreamRequest",void 0),this.api=t,this.credentials=r,this.headers=n,this.body=i,this.fetch=a,this.prepareSendMessagesRequest=o,this.prepareReconnectToStreamRequest=e}return co(s,[{key:"sendMessages",value:function(e){var s=this,c=e.abortSignal,u=e.chatId,l=e.messages,f=e.requestMetadata,d=e.trigger,h=e.messageId,m=e.headers,p=e.body,y=null!=(e=this.fetch)?e:fetch;return Promise.all([Ua(this.credentials),Ua(this.headers),Ua(this.body)]).then(function(e){var e=io(e,3),t=e[0],r=e[1],e=e[2],n=s.api,i=no(no({id:u,messages:l},e),p),a=no(no({"Content-Type":"application/json"},r instanceof Headers?Object.fromEntries(r.entries()):r),m instanceof Headers?Object.fromEntries(m.entries()):m),o=t,e=no(no({},e),p);return(s.prepareSendMessagesRequest?Promise.resolve(s.prepareSendMessagesRequest({id:u,messages:l,requestMetadata:f,body:e,credentials:t,headers:r,api:s.api,trigger:d,messageId:h})):Promise.resolve(null)).then(function(e){return e&&(i=e.body,e.api&&(n=e.api),e.headers&&(a=no({"Content-Type":"application/json"},e.headers instanceof Headers?Object.fromEntries(e.headers.entries()):e.headers)),e.credentials)&&(o=e.credentials),y(n,{method:"POST",headers:a,body:JSON.stringify(i),signal:c,credentials:o}).then(function(e){if(!e.ok)throw new Error("HTTP error: ".concat(e.status," ").concat(e.statusText));if(e.body)return s.processResponseStream(e.body);throw new Error("Response body is empty")})})})}},{key:"reconnectToStream",value:function(e){var o=this,s=e.chatId,c=e.headers,u=e.body,l=null!=(e=this.fetch)?e:fetch;return Promise.all([Ua(this.credentials),Ua(this.headers),Ua(this.body)]).then(function(e){var e=io(e,3),t=e[0],r=e[1],e=e[2],n=o.api,i=no(no({},r instanceof Headers?Object.fromEntries(r.entries()):r),c instanceof Headers?Object.fromEntries(c.entries()):c),a=t,e=no(no({},e),u);return(o.prepareReconnectToStreamRequest?Promise.resolve(o.prepareReconnectToStreamRequest({id:s,requestMetadata:void 0,body:e,credentials:t,headers:r,api:o.api})):Promise.resolve(null)).then(function(e){return e&&(e.api&&(n=e.api),e.headers&&(i=e.headers instanceof Headers?Object.fromEntries(e.headers.entries()):e.headers),e.credentials)&&(a=e.credentials),l("".concat(n,"?chatId=").concat(s),{method:"GET",headers:i,credentials:a}).then(function(e){if(e.ok)return e.body?o.processResponseStream(e.body):null;if(404===e.status)return null;throw new Error("HTTP error: ".concat(e.status," ").concat(e.statusText))})})})}}]),s}(),ho=function(){var e=n,t=fo;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ya(e,t);var r=Za(n);function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return oo(this,n),r.call(this,e)}return co(n,[{key:"processResponseStream",value:function(e){return t=e,u=new TextDecoder,l="",new ReadableStream({start:function(c){var e=t.getReader();(function s(){e.read().then(function(e){var t=e.done,e=e.value;if(t){if(l.trim()){t=Da(l.trim());if(t)try{var r=JSON.parse(t);c.enqueue(r)}catch(e){}}c.close()}else{var n=(l+=u.decode(e,{stream:!0})).split("\n");l=n.pop()||"";for(var i=0;i<n.length;i++){var a=n[i].trim();if(a){a=Da(a);if(a)try{var o=JSON.parse(a);c.enqueue(o)}catch(e){}}}s()}},function(e){c.error(e)})})()}});var t,u,l}}]),n}(),mo=["messages","agentId"];function po(e){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yo(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function go(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yo(Object(r),!0).forEach(function(e){x(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yo(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function vo(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function bo(e,t){return(bo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function So(r){var n=jo();return function(){var e,t=wo(r),t=(e=n?(e=wo(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"==po(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Oo(t)}}function Oo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(jo=function(){return!!e})()}function wo(e){return(wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Po(e){return function(e){if(Array.isArray(e))return Ro(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?Ro(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ro(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Eo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fo(n.key),n)}}function Io(e,t,r){return t&&xo(e.prototype,t),r&&xo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function x(e,t,r){(t=Fo(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function Fo(e){e=function(e,t){if("object"!=po(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=po(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==po(e)?e:e+""}var _o="instantsearch-chat-initial-messages";var To=function(){function i(){function e(){if("ready"===r.status)try{sessionStorage.setItem(_o+(t?"-".concat(t):""),JSON.stringify(r.messages))}catch(e){}}var r=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:(n=t,(n=sessionStorage.getItem(_o+(n?"-".concat(n):"")))?JSON.parse(n):[]);Eo(this,i),x(this,"_messages",void 0),x(this,"_status","ready"),x(this,"_error",void 0),x(this,"_messagesCallbacks",new Set),x(this,"_statusCallbacks",new Set),x(this,"_errorCallbacks",new Set),x(this,"pushMessage",function(e){r._messages=r._messages.concat(e),r._callMessagesCallbacks()}),x(this,"popMessage",function(){r._messages=r._messages.slice(0,-1),r._callMessagesCallbacks()}),x(this,"replaceMessage",function(e,t){r._messages=[].concat(Po(r._messages.slice(0,e)),[r.snapshot(t)],Po(r._messages.slice(e+1))),r._callMessagesCallbacks()}),x(this,"snapshot",function(e){return JSON.parse(JSON.stringify(e))}),x(this,"~registerMessagesCallback",function(e){var t=e;return r._messagesCallbacks.add(t),function(){r._messagesCallbacks.delete(t)}}),x(this,"~registerStatusCallback",function(e){return r._statusCallbacks.add(e),function(){r._statusCallbacks.delete(e)}}),x(this,"~registerErrorCallback",function(e){return r._errorCallbacks.add(e),function(){r._errorCallbacks.delete(e)}}),x(this,"_callMessagesCallbacks",function(){r._messagesCallbacks.forEach(function(e){return e()})}),x(this,"_callStatusCallbacks",function(){r._statusCallbacks.forEach(function(e){return e()})}),x(this,"_callErrorCallbacks",function(){r._errorCallbacks.forEach(function(e){return e()})}),this._messages=n;this["~registerMessagesCallback"](e),this["~registerStatusCallback"](e)}return Io(i,[{key:"status",get:function(){return this._status},set:function(e){this._status=e,this._callStatusCallbacks()}},{key:"error",get:function(){return this._error},set:function(e){this._error=e,this._callErrorCallbacks()}},{key:"messages",get:function(){return this._messages},set:function(e){this._messages=Po(e),this._callMessagesCallbacks()}}]),i}(),Ao=function(){var e=a,t=Xa;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bo(e,t);var i=So(a);function a(e){var t=e.messages,r=e.agentId,e=vo(e,mo),r=(Eo(this,a),new To(r,t)),n=i.call(this,go(go({},e),{},{state:r}));return x(Oo(n),"_state",void 0),x(Oo(n),"~registerMessagesCallback",function(e){return n._state["~registerMessagesCallback"](e)}),x(Oo(n),"~registerStatusCallback",function(e){return n._state["~registerStatusCallback"](e)}),x(Oo(n),"~registerErrorCallback",function(e){return n._state["~registerErrorCallback"](e)}),n._state=r,n}return Io(a)}();function Do(e){return(Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ko=["resume","tools","type"],Co=["messages","trigger"];function No(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?No(Object(r),!0).forEach(function(e){Mo(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):No(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Mo(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Do(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Do(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Do(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||$o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ho(e){return function(e){if(Array.isArray(e))return Lo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $o(e,t){var r;if(e)return"string"==typeof e?Lo(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lo(e,t):void 0}function Lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Uo(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Qo(O){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(O,qo()),function(i){function a(){c.messages&&0!==c.messages.length&&d(!0)}function o(){S([]),c.clearError(),d(!1)}function s(e){function n(e){return e.map(function(e){return I(I({},e),{},{parts:null==(e=e.parts)?void 0:e.filter(function(e){return!("type"in e&&e.type.startsWith("data-"))})})})}var r,t,i=(a=Wo(At(e.client),2))[0],a=a[1];if("transport"in p&&p.transport&&(r=p.transport.prepareSendMessagesRequest,t=new ho(I(I({},p.transport),{},{prepareSendMessagesRequest:function(e){function t(e){return I(I({},e),{},{body:I(I({},e.body),{},{messages:n(e.body.messages)})})}e=r?r(e):{body:I({},e)};return e&&"then"in e?e.then(t):t(e)}}))),"agentId"in p&&p.agentId){if(!i||!a)throw new Error(qo("Could not extract Algolia credentials from the search client."));var o="https://".concat(i,".algolia.net/agent-studio/1/agents/").concat(b,"/completions?compatibilityMode=ai-sdk-5");t=new ho({api:o,headers:{"x-algolia-application-id":i,"x-algolia-api-Key":a,"x-algolia-agent":Tt(e.client)},prepareSendMessagesRequest:function(e){var t=e.messages,r=e.trigger,e=Uo(e,Co);return{api:"regenerate-message"===r?"".concat(o,"&cache=false"):o,body:I(I({},e),{},{messages:n(t)})}}})}if(t)return"chat"in p?p.chat:new Ao(I(I({},p),{},{transport:t,sendAutomaticallyWhen:$a,onToolCall:function(e){var t=e.toolCall,e=m[t.toolName];return e?e.onToolCall?e.onToolCall(I(I({},t),{},{addToolResult:function(e){e=e.output;return c.addToolResult({output:e,tool:t.toolName,toolCallId:t.toolCallId})}})):Promise.resolve():c.addToolResult({output:'No tool implemented for "'.concat(t.toolName,'".'),tool:t.toolName,toolCallId:t.toolCallId})}}));throw new Error(qo("You need to provide either an `agentId` or a `transport`."))}var c,u,l,f,d,e=i||{},t=e.resume,h=void 0!==t&&t,t=e.tools,m=void 0===t?{}:t,t=e.type,r=void 0===t?"chat":t,p=Uo(e,ko),y="",g=!1,v=!1,b="agentId"in p?p.agentId:void 0,S=function(e){"function"==typeof e&&(e=e(c.messages)),c.messages=e};return{$$type:"ais.chat",init:function(e){var t=this,r=e.instantSearchInstance,n=(c=s(r),function(){O(I(I({},t.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)});f=function(e){g=e,n()},l=function(e){y=e,n()},d=function(e){v=e,n()},c["~registerErrorCallback"](n),c["~registerMessagesCallback"](n),c["~registerStatusCallback"](n),h&&c.resumeStream(),O(I(I({},this.getWidgetRenderState(e)),{},{instantSearchInstance:r}),!0)},render:function(e){O(I(I({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e,t){return I(I({},e),{},Mo({},r,this.getWidgetRenderState(t)))},getWidgetRenderState:function(e){var t=e.instantSearchInstance,r=e.parent,n=(c||this.init(I(I({},e),{},{uiState:{},results:void 0})),u=u||bt({instantSearchInstance:e.instantSearchInstance,helper:e.helper,widgetType:this.$$type}),{});return Object.entries(m).forEach(function(e){var e=Wo(e,2),t=e[0],e=I(I({},e[1]),{},{addToolResult:c.addToolResult});n[t]=e}),{indexUiState:t.getUiState()[r.getIndexId()],input:y,open:g,sendEvent:u,setIndexUiState:r.setIndexUiState.bind(r),setInput:l,setOpen:f,setMessages:S,suggestions:null==(e=Ho(e=c.messages).reverse().find(function(e){return"assistant"===e.role&&e.parts}))||!e.parts||null==(e=e.parts.find(function(e){return"type"in e&&"data-suggestions"===e.type&&"data"in e&&Array.isArray(null==(e=e.data)?void 0:e.suggestions)}))?void 0:e.data.suggestions,isClearing:v,clearMessages:a,onClearTransitionEnd:o,tools:n,widgetParams:i,addToolResult:c.addToolResult,clearError:c.clearError,error:c.error,id:c.id,messages:c.messages,regenerate:c.regenerate,resumeStream:c.resumeStream,sendMessage:c.sendMessage,status:c.status,stop:c.stop}},dispose:function(){n()},shouldRender:function(){return!0},get chatInstance(){return c}}}}var qo=i({name:"chat",connector:!0});function Bo(e){return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vo(e){return function(e){if(Array.isArray(e))return Jo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?Jo(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jo(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function zo(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ko(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?zo(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Bo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Bo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Bo(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):zo(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Xo(r){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(r,Go()),function(n){var e=n||{},t=e.includedAttributes,s=void 0===t?[]:t,t=e.excludedAttributes,c=void 0===t?["query"]:t,t=e.transformItems,u=void 0===t?function(e){return e}:t;if(n&&n.includedAttributes&&n.excludedAttributes)throw new Error(Go("The options `includedAttributes` and `excludedAttributes` cannot be used together."));function i(){return l.refine()}function a(){return l.createURL()}var l={refine:j,createURL:function(){return""},attributesToClear:[]};return{$$type:"ais.clearRefinements",init:function(e){var t=e.instantSearchInstance;r(Ko(Ko({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(Ko(Ko({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){o()},getRenderState:function(e,t){return Ko(Ko({},e),{},{clearRefinements:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.createURL,r=e.scopedResults,o=e.results,e=(l.attributesToClear=r.reduce(function(e,t){return e.concat((t=(e={scopedResult:t,includedAttributes:s,excludedAttributes:c,transformItems:u,results:o}).scopedResult,r=e.includedAttributes,n=e.excludedAttributes,i=e.transformItems,e=e.results,a=-1!==r.indexOf("query")||-1===n.indexOf("query"),{helper:t.helper,items:i(sr(Wt(t.results,t.helper.state,a).map(function(e){return e.attribute}).filter(function(e){return 0===r.length||-1!==r.indexOf(e)}).filter(function(e){return"query"===e&&a||-1===n.indexOf(e)})),{results:e})}));var r,n,i,a},[]),l.refine=function(){l.attributesToClear.forEach(function(e){var t=e.helper,e=e.items;t.setState(Ue({helper:t,attributesToClear:e})).search()})},l.createURL=function(){return t(mr.apply(void 0,Vo(l.attributesToClear.map(function(e){return Ue({helper:e.helper,attributesToClear:e.items})}))))},l.attributesToClear.some(function(e){return 0<e.items.length}));return{canRefine:e,hasRefinements:e,refine:i,createURL:a,widgetParams:n}}}}}var Go=i({name:"clear-refinements",connector:!0});function Yo(e){return(Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zo(e){return function(e){if(Array.isArray(e))return es(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?es(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?es(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function es(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ts(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function rs(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ts(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Yo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Yo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Yo(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ts(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ns(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(r,is()),function(a){if((a||{}).includedAttributes&&(a||{}).excludedAttributes)throw new Error(is("The options `includedAttributes` and `excludedAttributes` cannot be used together."));var e=a||{},o=e.includedAttributes,t=e.excludedAttributes,s=void 0===t?["query"]:t,t=e.transformItems,c=void 0===t?function(e){return e}:t;return{$$type:"ais.currentRefinements",init:function(e){var t=e.instantSearchInstance;r(rs(rs({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(rs(rs({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){n()},getRenderState:function(e,t){return rs(rs({},e),{},{currentRefinements:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var r=e.results,t=e.scopedResults,n=e.createURL,i=e.helper;e=r?t.reduce(function(e,t){return e.concat(c(as({results:t.results,helper:t.helper,indexId:t.indexId,includedAttributes:o,excludedAttributes:s}),{results:r}))},[]):c(as({results:null,helper:i,indexId:i.state.index,includedAttributes:o,excludedAttributes:s}),{results:r});return{items:e,canRefine:0<e.length,refine:function(e){return ss(i,e)},createURL:function(e){return n(os(i.state,e))},widgetParams:a}}}}}var is=i({name:"current-refinements",connector:!0});function as(e){var t=e.results,r=e.helper,n=e.indexId,i=e.includedAttributes,a=e.excludedAttributes,e=-1!==(i||[]).indexOf("query")||-1===(a||[]).indexOf("query"),o=i?function(e){return-1!==i.indexOf(e.attribute)}:function(e){return-1===a.indexOf(e.attribute)},s=Wt(t,r.state,e).map(cs).filter(o);return s.reduce(function(e,t){return[].concat(Zo(e.filter(function(e){return e.attribute!==t.attribute})),[{indexName:r.state.index,indexId:n,attribute:t.attribute,label:t.attribute,refinements:s.filter(function(e){return e.attribute===t.attribute}).sort(function(e,t){return"numeric"===e.type?e.value-t.value:0}),refine:function(e){return ss(r,e)}}])},[])}function os(e,t){switch(e=e.resetPage(),t.type){case"facet":return e.removeFacetRefinement(t.attribute,String(t.value));case"disjunctive":return e.removeDisjunctiveFacetRefinement(t.attribute,String(t.value));case"hierarchical":return e.removeHierarchicalFacetRefinement(t.attribute);case"exclude":return e.removeExcludeRefinement(t.attribute,String(t.value));case"numeric":return e.removeNumericRefinement(t.attribute,t.operator,String(t.value));case"tag":return e.removeTagRefinement(String(t.value));case"query":return e.setQueryParameter("query","");default:return e}}function ss(e,t){e.setState(os(e.state,t)).search()}function cs(e){var t=function(e){if("numeric"===e.type)return Number(e.name);if("escapedValue"in e)return e.escapedValue;return e.name}(e),r=e.operator?"".concat(function(e){switch(e){case">=":return"â¥";case"<=":return"â¤";default:return e}}(e.operator)," ").concat(e.name):e.name,t={attribute:e.attribute,type:e.type,value:t,label:r};return void 0!==e.operator&&(t.operator=e.operator),void 0!==e.count&&(t.count=e.count),void 0!==e.exhaustive&&(t.exhaustive=e.exhaustive),t}function us(e){return(us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ls(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function fs(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ls(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=us(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=us(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==us(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ls(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ds(r){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(r,hs()),function(n){var i,e=n||{},t=e.escapeHTML,a=void 0===t||t,t=e.transformItems,o=void 0===t?function(e){return e}:t,s=e.objectIDs,c=e.limit,u=e.threshold,l=e.fallbackParameters,f=e.queryParameters;if(s&&0!==s.length)return{dependsOn:"recommend",$$type:"ais.frequentlyBoughtTogether",init:function(e){r(fs(fs({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);r(fs(fs({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){var t=e.results,r=e.helper,e=e.instantSearchInstance;if(i=i||bt({instantSearchInstance:e,helper:r,widgetType:this.$$type}),null==t)return{items:[],widgetParams:n,sendEvent:i};a&&0<t.hits.length&&(t.hits=it(t.hits));e=Vt(Ut(t.hits,0,1),t.queryID);return{items:o(e,{results:t}),widgetParams:n,sendEvent:i}},dispose:function(e){e=e.recommendState;return d(),e.removeParams(this.$$id)},getWidgetParameters:function(e){var r=this;return s.reduce(function(e,t){return e.addFrequentlyBoughtTogether({objectID:t,maxRecommendations:c,threshold:u,fallbackParameters:l?fs(fs({},l),a?_:{}):void 0,queryParameters:fs(fs({},f),a?_:{}),$$id:r.$$id})},e.removeParams(this.$$id))}};throw new Error(hs("The `objectIDs` option is required."))}}var hs=i({name:"frequently-bought-together",connector:!0});function ms(e){return(ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ps(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ys(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ps(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=ms(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=ms(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ms(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ps(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}var gs=i({name:"geo-search",connector:!0});function vs(e){return e.insideBoundingBox||""}function bs(e,t){return e.setQueryParameter("insideBoundingBox",t)}function Ss(y){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(y,gs()),function(s){function c(e){if(e.aroundLatLng){var e=e.aroundLatLng,t=e.match(Ft);if(t)return{lat:parseFloat(t[1]),lng:parseFloat(t[2])};throw new Error('Invalid value for "aroundLatLng" parameter: "'.concat(e,'"'))}}function u(){return p.internalToggleRefineOnMapMove()}function a(e,t){return function(){p.isRefineOnMapMove=!p.isRefineOnMapMove,t(e)}}function l(){return p.isRefineOnMapMove}function f(){return p.internalSetMapMoveSinceLastRefine()}function o(t,r){return function(){var e=!0!==p.hasMapMoveSinceLastRefine;p.hasMapMoveSinceLastRefine=!0,e&&r(t)}}function d(){return p.hasMapMoveSinceLastRefine}var h,e=s||{},t=e.enableRefineOnMapMove,e=e.transformItems,m=void 0===e?function(e){return e}:e,p={isRefineOnMapMove:void 0===t||t,hasMapMoveSinceLastRefine:!1,lastRefinePosition:"",lastRefineBoundingBox:"",internalToggleRefineOnMapMove:j,internalSetMapMoveSinceLastRefine:j};return{$$type:Os,init:function(e){var t=e.instantSearchInstance;p.internalToggleRefineOnMapMove=a(e,j),p.internalSetMapMoveSinceLastRefine=o(e,j),y(ys(ys({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.helper,r=e.instantSearchInstance,t=t.state,n=Boolean(t.aroundLatLng)&&Boolean(p.lastRefinePosition)&&t.aroundLatLng!==p.lastRefinePosition,i=!t.insideBoundingBox&&Boolean(p.lastRefineBoundingBox)&&t.insideBoundingBox!==p.lastRefineBoundingBox,n=((n||i)&&(p.hasMapMoveSinceLastRefine=!1),p.lastRefinePosition=t.aroundLatLng||"",p.lastRefineBoundingBox=vs(t),p.internalToggleRefineOnMapMove=a(e,this.render.bind(this)),p.internalSetMapMoveSinceLastRefine=o(e,this.render.bind(this)),this.getWidgetRenderState(e));h("view:internal",n.items),y(ys(ys({},n),{},{instantSearchInstance:r}),!1)},getWidgetRenderState:function(e){var t,r,n,i=e.helper,a=e.results,e=e.instantSearchInstance,o=i.state,a=a?m(a.hits.filter(function(e){return e._geoloc}),{results:a}):[];return h=h||bt({instantSearchInstance:e,helper:i,widgetType:Os}),{items:a,position:c(o),currentRefinement:(e=o).insideBoundingBox&&_t(e.insideBoundingBox),refine:function(e){var t=e.northEast,e=e.southWest,t=[t.lat,t.lng,e.lat,e.lng].join();n.setState(bs(n.state,t).resetPage()).search(),p.hasMapMoveSinceLastRefine=!1,p.lastRefineBoundingBox=t},sendEvent:h,clearMapRefinement:(r=n=i,function(){r.setQueryParameter("insideBoundingBox",void 0).search()}),isRefinedWithMap:(t=o,function(){return Boolean(t.insideBoundingBox)}),toggleRefineOnMapMove:u,isRefineOnMapMove:l,setMapMoveSinceLastRefine:f,hasMapMoveSinceLastRefine:d,widgetParams:s}},getRenderState:function(e,t){return ys(ys({},e),{},{geoSearch:this.getWidgetRenderState(t)})},dispose:function(e){e=e.state;return r(),e.setQueryParameter("insideBoundingBox",void 0)},getWidgetUiState:function(e,t){t=vs(t.searchParameters);return!t||e&&e.geoSearch&&e.geoSearch.boundingBox===t?e:ys(ys({},e),{},{geoSearch:{boundingBox:t}})},getWidgetSearchParameters:function(e,t){t=t.uiState;return t&&t.geoSearch?bs(e,t.geoSearch.boundingBox):e.setQueryParameter("insideBoundingBox",void 0)}}}}var Os="ais.geoSearch";function js(e){return(js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ws=["name","escapedValue","data","path"];function Ps(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function F(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ps(Object(r),!0).forEach(function(e){Rs(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ps(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Rs(e,t,r){return(t=function(e){e=function(e,t){if("object"!=js(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=js(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==js(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Es(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function xs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?Is(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Is(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Is(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Fs(s){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(s,_s()),function(u){var e=u||{},l=e.attributes,t=e.separator,f=void 0===t?" > ":t,t=e.rootPath,n=void 0===t?null:t,t=e.showParentLevel,i=void 0===t||t,t=e.limit,d=void 0===t?10:t,t=e.showMore,h=void 0!==t&&t,t=e.showMoreLimit,a=void 0===t?20:t,t=e.sortBy,m=void 0===t?Ts:t,t=e.transformItems,p=void 0===t?function(e){return e}:t;if(!l||!Array.isArray(l)||0===l.length)throw new Error(_s("The `attributes` option expects an array of strings."));if(!0===h&&a<=d)throw new Error(_s("The `showMoreLimit` option must be greater than `limit`."));var y,g,v=xs(l,1)[0],o=function(){};function b(){o()}var S=!1;function O(){return S?a:d}return{$$type:"ais.hierarchicalMenu",init:function(e){var t=e.instantSearchInstance;s(F(F({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t,r,n=e.instantSearchInstance;t=e,o=function(){S=!S,r.render(t)},s(F(F({},(r=this).getWidgetRenderState(e)),{},{instantSearchInstance:n}),!1)},dispose:function(e){e=e.state;return r(),e.removeHierarchicalFacet(v).setQueryParameter("maxValuesPerFacet",void 0)},getRenderState:function(e,t){return F(F({},e),{},{hierarchicalMenu:F(F({},e.hierarchicalMenu),{},Rs({},v,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r=this,n=e.results,i=e.state,a=e.createURL,o=e.instantSearchInstance,s=e.helper,e=[],c=!1;return y=y||ft({instantSearchInstance:o,helper:s,attribute:function(e){e=e.split(f).length-1;return l[e]},widgetType:this.$$type}),g=g||function(e){y("click:internal",e),s.toggleFacetRefinement(v,e).search()},n&&(t=function t(e,r){var n=O();return!(n<r?e.length<=n:e.length<n)||e.slice(0,d).some(function(e){return Array.isArray(e.data)&&0<e.data.length&&t(e.data,r)})}(o=(o=n.getFacetValues(v,{sortBy:m,facetOrdering:m===Ts}))&&!Array.isArray(o)&&o.data?o.data:[],i.maxValuesPerFacet||0),c=h&&(S||t),e=p(function i(e){return e.slice(0,O()).map(function(e){var t=e.name,r=e.escapedValue,n=e.data,e=(e.path,F(F({},Es(e,ws)),{},{value:r,label:t,data:null}));return Array.isArray(n)&&(e.data=i(n)),e})}(o),{results:n})),{items:e,refine:g,canRefine:0<e.length,createURL:function(t){return a(function(e){return r.getWidgetUiState(e,{searchParameters:i.resetPage().toggleFacetRefinement(v,t),helper:s})})},sendEvent:y,widgetParams:u,isShowingMore:S,toggleShowMore:b,canToggleShowMore:c}},getWidgetUiState:function(e,t){var t=t.searchParameters.getHierarchicalFacetBreadcrumb(v);return e=F(F({},e),{},{hierarchicalMenu:F(F({},e.hierarchicalMenu),{},Rs({},v,t))}),t=v,e.hierarchicalMenu&&(e.hierarchicalMenu[t]&&0!==e.hierarchicalMenu[t].length||delete e.hierarchicalMenu[t],0===Object.keys(e.hierarchicalMenu).length)&&delete e.hierarchicalMenu,e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.hierarchicalMenu&&t.hierarchicalMenu[v];if(e.isConjunctiveFacet(v)||e.isDisjunctiveFacet(v))return e;e.isHierarchicalFacet(v)&&e.getHierarchicalFacetByName(v);var e=e.removeHierarchicalFacet(v).addHierarchicalFacet({name:v,attributes:l,separator:f,rootPath:n,showParentLevel:i}),r=e.maxValuesPerFacet||0,r=Math.max(r,h?a:d),e=e.setQueryParameter("maxValuesPerFacet",r);return t?e.addHierarchicalFacetRefinement(v,t.join(f)):e.setQueryParameters({hierarchicalFacetsRefinements:F(F({},e.hierarchicalFacetsRefinements),{},Rs({},v,[]))})}}}}var _s=i({name:"hierarchical-menu",connector:!0}),Ts=["name:asc"];function As(e){return(As="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ds(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ks(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ds(Object(r),!0).forEach(function(e){Cs(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ds(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Cs(e,t,r){return(t=function(e){e=function(e,t){if("object"!=As(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=As(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==As(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ns(r){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(r,Ms()),function(n){var i,a,e=n||{},t=e.escapeHTML,o=void 0===t||t,t=e.transformItems,s=void 0===t?function(e){return e}:t;return{$$type:"ais.hits",init:function(e){r(ks(ks({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);r(ks(ks({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1),t.sendEvent("view:internal",t.items)},getRenderState:function(e,t){return ks(ks({},e),{},{hits:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,r=e.helper,e=e.instantSearchInstance;if(i=i||bt({instantSearchInstance:e,helper:r,widgetType:this.$$type}),a=a||St({helper:r,widgetType:this.$$type,instantSearchInstance:e}),!t)return{hits:[],items:[],results:void 0,banner:void 0,sendEvent:i,bindEvent:a,widgetParams:n};o&&0<t.hits.length&&(t.hits=it(t.hits));var r=Vt(Ut(t.hits,t.page,t.hitsPerPage),t.queryID),e=s(r,{results:t});return{hits:e,items:e,results:t,banner:null==(r=t.renderingContent)||null==(e=r.widgets)||null==(t=e.banners)?void 0:t[0],sendEvent:i,bindEvent:a,widgetParams:n}},dispose:function(e){e=e.state;return c(),o?e.setQueryParameters(Object.keys(_).reduce(function(e,t){return ks(ks({},e),{},Cs({},t,void 0))},{})):e},getWidgetSearchParameters:function(e,t){return o?e.setQueryParameters(_):e}}}}var Ms=i({name:"hits",connector:!0});function Ws(e){return(Ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hs(e){return function(e){if(Array.isArray(e))return $s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?$s(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ls(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Us(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ls(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Ws(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Ws(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ws(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ls(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Qs(n){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(n,qs()),function(o){var e=o||{},t=e.items,e=e.transformItems,s=void 0===e?function(e){return e}:e;if(!Array.isArray(t))throw new Error(qs("The `items` option expects an array of objects."));var c=t,e=c.filter(function(e){return!0===e.default});if(0===e.length)throw new Error(qs("A default value must be specified in `items`."));if(1<e.length)throw new Error(qs("More than one default value is specified in `items`."));var r=e[0],u=function(t){return function(e){return(e||0===e?t.setQueryParameter("hitsPerPage",e):t.setQueryParameter("hitsPerPage",void 0)).search()}},l=function(e){var r=e.state,n=e.createURL,i=e.getWidgetUiState,a=e.helper;return function(t){return n(function(e){return i(e,{searchParameters:r.resetPage().setQueryParameter("hitsPerPage",t||0===t?t:void 0),helper:a})})}};return{$$type:"ais.hitsPerPage",init:function(e){var t=e.state,r=e.instantSearchInstance;c.some(function(e){return Number(t.hitsPerPage)===Number(e.value)})||(c=[{value:"",label:""}].concat(Hs(c))),n(Us(Us({},this.getWidgetRenderState(e)),{},{instantSearchInstance:r}),!0)},render:function(e){var t=e.instantSearchInstance;n(Us(Us({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return i(),e.setQueryParameter("hitsPerPage",void 0)},getRenderState:function(e,t){return Us(Us({},e),{},{hitsPerPage:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t,r=e.state,n=e.results,i=e.createURL,e=e.helper,a=!!n&&0<n.nbHits;return{items:s((t=r.hitsPerPage,c.map(function(e){return Us(Us({},e),{},{isRefined:Number(e.value)===Number(t)})})),{results:n}),refine:u(e),createURL:l({state:r,createURL:i,getWidgetUiState:this.getWidgetUiState,helper:e}),hasNoResults:!a,canRefine:a,widgetParams:o}},getWidgetUiState:function(e,t){t=t.searchParameters.hitsPerPage;return void 0===t||t===r.value?e:Us(Us({},e),{},{hitsPerPage:t})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameters({hitsPerPage:t.hitsPerPage||r.value})}}}}var qs=i({name:"hits-per-page",connector:!0});function Bs(e){return(Bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Vs=["page"],Js=["clickAnalytics","userToken"];function zs(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ks(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zs(Object(r),!0).forEach(function(e){Xs(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zs(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Xs(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Bs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Bs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Bs(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gs(e){return function(e){if(Array.isArray(e))return Ys(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?Ys(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ys(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ys(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Zs(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}var ec=i({name:"infinite-hits",connector:!0});function tc(e){e=e||{};e.page;return Zs(e,Vs)}function rc(e){e=e||{};e.clickAnalytics,e.userToken;return Zs(e,Js)}function nc(i){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(i,ec()),function(p){var r,n,y,g,v,b,e=p||{},t=e.escapeHTML,S=void 0===t||t,t=e.transformItems,O=void 0===t?function(e){return e}:t,t=e.cache,j=void 0===t?(n=r=null,{read:function(e){e=e.state;return ar(n,tc(e))?r:null},write:function(e){var t=e.state,e=e.hits;n=tc(t),r=e}}):t,w=function(e,t){e=e.page,e=void 0===e?0:e,t=Object.keys(t).map(Number);return 0===t.length?e:Math.min.apply(Math,[e].concat(Gs(t)))},P=function(e,t){e=e.page,e=void 0===e?0:e,t=Object.keys(t).map(Number);return 0===t.length?e:Math.max.apply(Math,[e].concat(Gs(t)))};return{$$type:"ais.infiniteHits",init:function(e){i(Ks(Ks({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=e.instantSearchInstance,e=this.getWidgetRenderState(e);i(Ks(Ks({},e),{},{instantSearchInstance:t}),!1),v("view:internal",e.currentPageHits)},getRenderState:function(e,t){return Ks(Ks({},e),{},{infiniteHits:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t,r,n,i=e.results,a=e.helper,o=e.parent,s=e.state,e=e.instantSearchInstance,c=function(){var e=o.getPreviousState()||s;return j.read({state:rc(e)})||{}},u=[],l=o.getPreviousState()||s,f=c(),d=null==i||null==(d=i.renderingContent)||null==(d=d.widgets)||null==(d=d.banners)?void 0:d[0],h=(y||(y=function(){e=a;var e,t=c();e.overrideStateWithoutTriggeringChangeEvent(Ks(Ks({},e.state),{},{page:w(e.state,t)-1})).searchWithoutTriggeringOnStateChange()},g=function(){e=a;var e,t=c();e.setPage(P(e.state,t)+1).search()}),v||(v=bt({instantSearchInstance:e,helper:a,widgetType:this.$$type}),b=St({helper:a,widgetType:this.$$type,instantSearchInstance:e})),e=i?(m=void 0===(m=l.page)?0:m,S&&0<i.hits.length&&(i.hits=it(i.hits)),t=Vt(Ut(i.hits,i.page,i.hitsPerPage),i.queryID),t=O(t,{results:i}),r=!1,or(e.mainIndex,function(e){!r&&e.getWidgets().some(function(e){return"ais.dynamicWidgets"===e.$$type})&&(r=!0)}),h=!(null!=(h=l.disjunctiveFacets)&&h.length||(l.facets||[]).filter(function(e){return"*"!==e}).length||null!=(h=l.hierarchicalFacets)&&h.length),void 0!==f[m]||i.__isArtificial||"idle"!==e.status||r&&h||(f[m]=t,j.write({state:rc(l),hits:f})),u=t,0===w(l,f)):void 0===l.page||0===w(l,f),n=f,Object.keys(n).map(Number).sort(function(e,t){return e-t}).reduce(function(e,t){return e.concat(n[t])},[])),m=!i||i.nbPages<=P(l,f)+1;return{hits:h,items:h,currentPageHits:u,sendEvent:v,bindEvent:b,banner:d,results:i||void 0,showPrevious:y,showMore:g,isFirstPage:e,isLastPage:m,widgetParams:p}},dispose:function(e){e=e.state,a(),e=e.setQueryParameter("page",void 0);return S?e.setQueryParameters(Object.keys(_).reduce(function(e,t){return Ks(Ks({},e),{},Xs({},t,void 0))},{})):e},getWidgetUiState:function(e,t){t=t.searchParameters.page||0;return t?Ks(Ks({},e),{},{page:t+1}):e},getWidgetSearchParameters:function(e,t){var t=t.uiState,r=e,e=(S&&(r=e.setQueryParameters(_)),t.page?t.page-1:0);return r.setQueryParameter("page",e)}}}}var ic=["name","escapedValue","path"];function ac(e){return(ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oc(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function sc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?cc(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function uc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?uc(Object(r),!0).forEach(function(e){lc(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uc(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function lc(e,t,r){return(t=function(e){e=function(e,t){if("object"!=ac(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=ac(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ac(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fc(r){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(r,dc()),function(l){var f,d,h,e=l||{},m=e.attribute,t=e.limit,n=void 0===t?10:t,t=e.showMore,p=void 0!==t&&t,t=e.showMoreLimit,i=void 0===t?20:t,t=e.sortBy,y=void 0===t?hc:t,t=e.transformItems,g=void 0===t?function(e){return e}:t;if(!m)throw new Error(dc("The `attribute` option is required."));if(!0===p&&i<=n)throw new Error(dc("The `showMoreLimit` option must be greater than `limit`."));var v=!1,b=function(){};function S(){b()}function O(){return v?i:n}return{$$type:"ais.menu",init:function(e){var t=e.instantSearchInstance;r(T(T({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(T(T({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return a(),e.removeHierarchicalFacet(m).setQueryParameter("maxValuesPerFacet",void 0)},getRenderState:function(e,t){return T(T({},e),{},{menu:T(T({},e.menu),{},lc({},m,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r,n=this,i=e.results,a=e.createURL,o=e.instantSearchInstance,s=e.helper,c=[],u=!1;return f=f||ft({instantSearchInstance:o,helper:s,attribute:m,widgetType:this.$$type}),d=d||function(t){return a(function(e){return n.getWidgetUiState(e,{searchParameters:s.state.resetPage().toggleFacetRefinement(m,t),helper:s})})},h=h||function(e){var t=sc(s.getHierarchicalFacetBreadcrumb(m),1)[0];f("click:internal",e||t),s.toggleFacetRefinement(m,e||t).search()},e.results&&(t=e,r=this,b=function(){v=!v,r.render(t)}),i&&(e=(o=i.getFacetValues(m,{sortBy:y,facetOrdering:y===hc}))&&!Array.isArray(o)&&o.data?o.data:[],u=p&&(v||e.length>O()),c=g(e.slice(0,O()).map(function(e){var t=e.name,r=e.escapedValue;e.path;return T(T({},oc(e,ic)),{},{label:t,value:r})}),{results:i})),{items:c,createURL:d,refine:h,sendEvent:f,canRefine:0<c.length,widgetParams:l,isShowingMore:v,toggleShowMore:S,canToggleShowMore:u}},getWidgetUiState:function(e,t){var t=sc(t.searchParameters.getHierarchicalFacetBreadcrumb(m),1)[0];return e=T(T({},e),{},{menu:T(T({},e.menu),{},lc({},m,t))}),t=m,e.menu&&(void 0===e.menu[t]&&delete e.menu[t],0===Object.keys(e.menu).length)&&delete e.menu,e},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,t=t.menu&&t.menu[m];return e.isConjunctiveFacet(m)||e.isDisjunctiveFacet(m)?e:(r=(e=e.removeHierarchicalFacet(m).addHierarchicalFacet({name:m,attributes:[m]})).maxValuesPerFacet||0,r=Math.max(r,p?i:n),e=e.setQueryParameter("maxValuesPerFacet",r),t?e.addHierarchicalFacetRefinement(m,t):e.setQueryParameters({hierarchicalFacetsRefinements:T(T({},e.hierarchicalFacetsRefinements),{},lc({},m,[]))}))}}}}var dc=i({name:"menu",connector:!0}),hc=["isRefined","name:asc"];function mc(e){return(mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||yc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yc(e,t){var r;if(e)return"string"==typeof e?gc(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gc(e,t):void 0}function gc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function vc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vc(Object(r),!0).forEach(function(e){bc(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vc(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function bc(e,t,r){return(t=function(e){e=function(e,t){if("object"!=mc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=mc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==mc(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sc(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(r,Oc()),function(d){var h,e=d||{},t=e.attribute,m=void 0===t?"":t,t=e.items,p=void 0===t?[]:t,t=e.transformItems,y=void 0===t?function(e){return e}:t;if(""===m)throw new Error(Oc("The `attribute` option is required."));if(p&&0!==p.length)return h={},{$$type:jc,init:function(e){var t=e.instantSearchInstance;r(A(A({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(A(A({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return n(),e.removeNumericRefinement(m)},getWidgetUiState:function(e,t){var t=t.searchParameters.getNumericRefinements(m),r=t["="]&&t["="][0];return r||0===r?A(A({},e),{},{numericMenu:A(A({},e.numericMenu),{},bc({},m,"".concat(t["="])))}):(r=t[">="]&&t[">="][0]||"",t=t["<="]&&t["<="][0]||"",e=A(A({},e),{},{numericMenu:A(A({},e.numericMenu),{},bc({},m,"".concat(r,":").concat(t)))}),r=m,e.numericMenu&&(":"===e.numericMenu[r]&&delete e.numericMenu[r],0===Object.keys(e.numericMenu).length)&&delete e.numericMenu,e)},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,t=t.numericMenu&&t.numericMenu[m],e=e.setQueryParameters({numericRefinements:A(A({},e.numericRefinements),{},bc({},m,{}))});return t?-1===t.indexOf(":")?e.addNumericRefinement(m,"=",Number(t)):(r=(t=pc(t.split(":").map(parseFloat),2))[0],t=t[1],r=g(r)?e.addNumericRefinement(m,">=",r):e,g(t)?r.addNumericRefinement(m,"<=",t):r):e},getRenderState:function(e,t){return A(A({},e),{},{numericMenu:A(A({},e.numericMenu),{},bc({},m,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var n,t,i=this,r=e.results,a=e.state,o=e.instantSearchInstance,s=e.helper,c=e.createURL,e=(h.refine||(h.refine=function(e){var t=Rc(s.state,m,e);h.sendEvent("click:internal",e),s.setState(t).search()}),h.createURL||(h.createURL=function(r){return function(t){return c(function(e){return i.getWidgetUiState(e,{searchParameters:Rc(r,m,t),helper:s})})}}),h.sendEvent||(h.sendEvent=wc({instantSearchInstance:o})),!r||0===r.nbHits),o=(n=a,p.map(function(e){var t=e.start,r=e.end,e=e.label;return{label:e,value:encodeURI(JSON.stringify({start:t,end:r})),isRefined:Pc(n,m,{start:t,end:r,label:e})}})),u=!0,l=function(e,t){var r,n,i,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return i=!(n=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return n=e.done,e},e:function(e){i=!0,r=e},f:function(){try{n||null==o.return||o.return()}finally{if(i)throw r}}};if(Array.isArray(e)||(o=yc(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(o);try{for(l.s();!(t=l.n()).done;){var f=t.value;if(f.isRefined&&"{}"!==decodeURI(f.value)){u=!1;break}}}catch(e){l.e(e)}finally{l.f()}return{createURL:h.createURL(a),items:y(o,{results:r}),hasNoResults:e,canRefine:!(e&&u),refine:h.refine,sendEvent:h.sendEvent,widgetParams:d}}};throw new Error(Oc("The `items` option expects an array of objects."))}}var Oc=i({name:"numeric-menu",connector:!0}),jc="ais.numericMenu",wc=function(e){var t=e.instantSearchInstance;return function(){1===arguments.length&&t.sendEventToInsights(arguments.length<=0?void 0:arguments[0])}};function Pc(e,t,r){var n=e.getNumericRefinements(t);return void 0!==r.start&&void 0!==r.end?r.start===r.end?Ec(n,"=",r.start):Ec(n,">=",r.start)&&Ec(n,"<=",r.end):void 0!==r.start?Ec(n,">=",r.start):void 0!==r.end?Ec(n,"<=",r.end):void 0===r.start&&void 0===r.end&&Object.keys(n).every(function(e){return 0===(n[e]||[]).length})}function Rc(e,t,r){var r=JSON.parse(decodeURI(r)),n=e.getNumericRefinements(t);if(void 0===r.start&&void 0===r.end)return e.removeNumericRefinement(t);if(Pc(e,t,r)||(e=e.removeNumericRefinement(t)),void 0!==r.start&&void 0!==r.end){if(r.start>r.end)throw new Error("option.start should be > to option.end");if(r.start===r.end)return e=Ec(n,"=",r.start)?e.removeNumericRefinement(t,"=",r.start):e.addNumericRefinement(t,"=",r.start)}return void 0!==r.start&&(e=(e=Ec(n,">=",r.start)?e.removeNumericRefinement(t,">=",r.start):e).addNumericRefinement(t,">=",r.start)),"number"==typeof(e=void 0!==r.end?(e=Ec(n,"<=",r.end)?e.removeNumericRefinement(t,"<=",r.end):e).addNumericRefinement(t,"<=",r.end):e).page&&(e.page=0),e}function Ec(e,t,r){return void 0!==e[t]&&e[t].includes(r)}function xc(e){return(xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ic(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_c(n.key),n)}}function Fc(e,t,r){(t=_c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function _c(e){e=function(e,t){if("object"!=xc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=xc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==xc(e)?e:e+""}var Tc=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");Fc(this,"currentPage",void 0),Fc(this,"total",void 0),Fc(this,"padding",void 0),this.currentPage=e.currentPage,this.total=e.total,this.padding=e.padding}var e,r,n;return e=t,(r=[{key:"pages",value:function(){var e,t=this.total,r=this.currentPage,n=this.padding;return 0===t?[0]:gr((e=this.nbPagesDisplayed(n,t))===t?{end:t}:{start:r-(n=this.calculatePaddingLeft(r,n,t,e)),end:r+(e-n)})}},{key:"nbPagesDisplayed",value:function(e,t){return Math.min(2*e+1,t)}},{key:"calculatePaddingLeft",value:function(e,t,r,n){return e<=t?e:r-t<=e?n-(r-e):t}},{key:"isLastPage",value:function(){return this.currentPage>=this.total-1}},{key:"isFirstPage",value:function(){return this.currentPage<=0}}])&&Ic(e.prototype,r),n&&Ic(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ac(e){return(Ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function kc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Dc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Ac(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Ac(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ac(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Dc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Cc(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(r,Nc()),function(a){var e=a||{},o=e.totalPages,e=e.padding,s=new Tc({currentPage:0,total:0,padding:void 0===e?3:e}),c={};return{$$type:"ais.pagination",init:function(e){var t=e.instantSearchInstance;r(kc(kc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(kc(kc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return t(),e.setQueryParameter("page",void 0)},getWidgetUiState:function(e,t){t=t.searchParameters.page||0;return t?kc(kc({},e),{},{page:t+1}):e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.page?t.page-1:0;return e.setQueryParameter("page",t)},getWidgetRenderState:function(e){var t=e.results,r=e.helper,n=e.state,i=e.createURL,e=(c.refine||(c.refine=function(e){r.setPage(e),r.search()}),c.createURL||(c.createURL=function(t){return i(function(e){return kc(kc({},e),{},{page:t+1})})}),n.page||0),n=(n=(n=t||{nbPages:0}).nbPages,void 0!==o?Math.min(o,n):n);return s.currentPage=e,s.total=n,{createURL:c.createURL,refine:c.refine,canRefine:1<n,currentRefinement:e,nbHits:(null==t?void 0:t.nbHits)||0,nbPages:n,pages:t?s.pages():[],isFirstPage:s.isFirstPage(),isLastPage:s.isLastPage(),widgetParams:a}},getRenderState:function(e,t){return kc(kc({},e),{},{pagination:this.getWidgetRenderState(t)})}}}}var Nc=i({name:"pagination",connector:!0});function Mc(e){return(Mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Hc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Wc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Mc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Mc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Mc(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Wc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function $c(e){return function(e){if(Array.isArray(e))return Lc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?Lc(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lc(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Uc=i({name:"query-rules",connector:!0});function Qc(e){var i,a,o,t=this.helper,r=this.initialRuleContexts,n=this.trackedFilters,s=this.transformRuleContexts,e=e.state,c=e.ruleContexts||[],n=(i=(n={helper:t,sharedHelperState:e,trackedFilters:n}).helper,a=n.sharedHelperState,o=n.trackedFilters,Object.keys(o).reduce(function(e,t){var r=Wt(i.lastResults||{},a,!0).filter(function(e){return e.attribute===t}).map(function(e){return e.numericValue||e.name}),n=(0,o[t])(r);return[].concat($c(e),$c(r.filter(function(e){return n.includes(e)}).map(function(e){return"ais-".concat(t,"-").concat(e).replace(/[^a-z0-9-_]+/gi,"_")})))},[])),s=s([].concat($c(r),$c(n))).slice(0,10);ar(c,s)||t.overrideStateWithoutTriggeringChangeEvent(Hc(Hc({},e),{},{ruleContexts:s}))}function qc(l){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(l,Uc()),function(i){var a,e=i||{},t=e.trackedFilters,o=void 0===t?{}:t,t=e.transformRuleContexts,s=void 0===t?function(e){return e}:t,t=e.transformItems,r=void 0===t?function(e){return e}:t,c=(Object.keys(o).forEach(function(e){if("function"!=typeof o[e])throw new Error(Uc("'The \"".concat(e,'" filter value in the `trackedFilters` option expects a function.')))}),0<Object.keys(o).length),u=[];return{$$type:"ais.queryRules",init:function(e){var t=e.helper,r=e.state,n=e.instantSearchInstance;u=r.ruleContexts||[],a=Qc.bind({helper:t,initialRuleContexts:u,trackedFilters:o,transformRuleContexts:s}),c&&(([r.disjunctiveFacetsRefinements,r.facetsRefinements,r.hierarchicalFacetsRefinements,r.numericRefinements].some(function(e){return Boolean(e&&0<Object.keys(e).length)})||Boolean(i.transformRuleContexts))&&a({state:r}),t.on("change",a)),l(Hc(Hc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:n}),!0)},render:function(e){var t=e.instantSearchInstance;l(Hc(Hc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},getWidgetRenderState:function(e){var e=e.results,t=(e||{}).userData;return{items:r(void 0===t?[]:t,{results:e}),widgetParams:i}},getRenderState:function(e,t){return Hc(Hc({},e),{},{queryRules:this.getWidgetRenderState(t)})},dispose:function(e){var t=e.helper,e=e.state;return n(),c?(t.removeListener("change",a),e.setQueryParameter("ruleContexts",u)):e}}}}function Bc(e){return(Bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vc(Object(r),!0).forEach(function(e){Jc(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vc(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Jc(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Bc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Bc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Bc(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?Kc(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Xc=i({name:"range-input",connector:!0},{name:"range-slider",connector:!0}),Gc="ais.range";function Yc(e){var t=e.min,r=e.max,e=e.precision,e=Math.pow(10,e);return{min:t&&Math.floor(t*e)/e,max:r&&Math.ceil(r*e)/e}}function Zc(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(r,Xc()),function(s){var e=s||{},t=e.attribute,u=void 0===t?"":t,l=e.min,f=e.max,t=e.precision,d=void 0===t?0:t;if(!u)throw new Error(Xc("The `attribute` option is required."));if(g(l)&&g(f)&&f<l)throw new Error(Xc("The `max` option can't be lower than `min`."));var c={from:function(e){return e.toLocaleString()},to:function(e){return Number(Number(e).toFixed(d)).toLocaleString()}},i=function(e,t,r,n){var e=e.state,i=t.min,t=t.max,a=zc(e.getNumericRefinement(u,">=")||[],1)[0],o=zc(e.getNumericRefinement(u,"<=")||[],1)[0],s=void 0===r||""===r,c=void 0===n||""===n,r=Yc({min:s?void 0:parseFloat(r),max:c?void 0:parseFloat(n),precision:d}),n=r.min,r=r.max,s=g(l)||i!==n?g(l)&&s?l:n:void 0,n=g(f)||t!==r?g(f)&&c?f:r:void 0,c=void 0===s,r=g(i)&&i<=s,c=c||g(s)&&(!g(i)||r),i=void 0===n,r=g(n)&&n<=t,i=i||g(n)&&(!g(t)||r);return(a!==s||o!==n)&&c&&i?(e=e.removeNumericRefinement(u),g(s)&&(e=e.addNumericRefinement(u,">=",s)),(e=g(n)?e.addNumericRefinement(u,"<=",n):e).resetPage()):null};function h(r,n){return function(){var e=zc(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[void 0,void 0],2),t=e[0],e=e[1],t=i(r,n,t,e);t&&r.setState(t).search()}}return{$$type:Gc,init:function(e){r(D(D({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){r(D(D({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e,t){return D(D({},e),{},{range:D(D({},e.range),{},Jc({},u,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r=e.results,n=e.helper,e=e.instantSearchInstance,i=Et(r&&r.disjunctiveFacets||[],function(e){return e.name===u}),i=i&&i.stats||{min:void 0,max:void 0},a=(i=i,a=g(l)?l:g(i.min)?i.min:0,i=g(f)?f:g(i.max)?i.max:0,Yc({min:a,max:i,precision:d})),o=(o=zc((i=n).getNumericRefinement(u,">=")||[],1)[0],i=zc(i.getNumericRefinement(u,"<=")||[],1)[0],[g(o)?o:-1/0,g(i)?i:1/0]),i=h(n,r?a:{min:void 0,max:void 0});return{refine:i,canRefine:a.min!==a.max,format:c,range:a,sendEvent:(t=e,function(){1===arguments.length&&t.sendEventToInsights(arguments.length<=0?void 0:arguments[0])}),widgetParams:D(D({},s),{},{precision:d}),start:o}},dispose:function(e){e=e.state;return n(),e.removeDisjunctiveFacet(u).removeNumericRefinement(u)},getWidgetUiState:function(e,t){var t=t.searchParameters.getNumericRefinements(u),r=t[">="],r=void 0===r?[]:r,t=t["<="],t=void 0===t?[]:t;return 0===r.length&&0===t.length?e:D(D({},e),{},{range:D(D({},e.range),{},Jc({},u,"".concat(r,":").concat(t)))})},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,e=e.addDisjunctiveFacet(u).setQueryParameters({numericRefinements:D(D({},e.numericRefinements),{},Jc({},u,{}))}),t=(g(l)&&(e=e.addNumericRefinement(u,">=",l)),g(f)&&(e=e.addNumericRefinement(u,"<=",f)),t.range&&t.range[u]);return e=t&&-1!==t.indexOf(":")&&(r=(t=zc(t.split(":").map(parseFloat),2))[0],t=t[1],g(r)&&(!g(l)||l<r)&&(e=(e=e.removeNumericRefinement(u,">=")).addNumericRefinement(u,">=",r)),g(t))&&(!g(f)||t<f)?(e=e.removeNumericRefinement(u,"<=")).addNumericRefinement(u,"<=",t):e}}}}function eu(e){return(eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var tu=["name","escapedValue"],ru=["escapedValue","value"];function nu(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nu(Object(r),!0).forEach(function(e){iu(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nu(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function iu(e,t,r){return(t=function(e){e=function(e,t){if("object"!=eu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=eu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==eu(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function au(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function ou(c){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(c,su()),function(d){var e=d||{},h=e.attribute,t=e.operator,i=void 0===t?"or":t,t=e.limit,m=void 0===t?10:t,t=e.showMore,p=void 0!==t&&t,t=e.showMoreLimit,a=void 0===t?20:t,t=e.sortBy,y=void 0===t?cu:t,t=e.escapeFacetValues,s=void 0===t||t,t=e.transformItems,g=void 0===t?function(e){return e}:t;if(!h)throw new Error(su("The `attribute` option is required."));if(!/^(and|or)$/.test(i))throw new Error(su('The `operator` must one of: `"and"`, `"or"` (got "'.concat(i,'").')));if(!0===p&&a<=m)throw new Error(su("`showMoreLimit` should be greater than `limit`."));function v(e){var t=e.name,r=e.escapedValue;return k(k({},au(e,tu)),{},{value:r,label:t,highlighted:t})}var b,S,O,j=[],w=!0,P=!1,R=function(){};function E(){R()}function x(){return P?a:m}function I(a,o){return function(i){return function(e){var t,r=i.instantSearchInstance,n=i.results;""===e&&j?c(k(k({},o.getWidgetRenderState(k(k({},i),{},{results:b}))),{},{instantSearchInstance:r}),!1):(t={highlightPreTag:(s?_:u).highlightPreTag,highlightPostTag:(s?_:u).highlightPostTag},a.searchForFacetValues(h,e,Math.min(x(),100),t).then(function(e){e=s?e.facetHits.map(function(e){return et(et({},e),{},{highlighted:rt(e.highlighted)})}):e.facetHits,e=g(e.map(function(e){var t=e.escapedValue,r=e.value;return k(k({},au(e,ru)),{},{value:t,label:r})}),{results:n});c(k(k({},o.getWidgetRenderState(k(k({},i),{},{results:b}))),{},{items:e,canToggleShowMore:!1,canRefine:!0,isFromSearch:!0,instantSearchInstance:r}),!1)}))}}}var F=function(){return function(){}};return{$$type:"ais.refinementList",init:function(e){c(k(k({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){c(k(k({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e,t){return k(k({},e),{},{refinementList:k(k({},e.refinementList),{},iu({},h,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r,n=this,i=e.results,a=e.state,o=e.createURL,s=e.instantSearchInstance,c=e.helper,u=[],l=[],s=(O&&S&&F||(O=ft({instantSearchInstance:s,helper:c,attribute:h,widgetType:this.$$type}),S=function(e){O("click:internal",e),c.toggleFacetRefinement(h,e).search()},F=I(c,this)),i&&(l=(s=i.getFacetValues(h,{sortBy:y,facetOrdering:y===cu}))&&Array.isArray(s)?s:[],u=g(l.slice(0,x()).map(v),{results:i}),s=a.maxValuesPerFacet,f=x(),w=f<s?l.length<=f:l.length<f,b=i,j=u,e.results)&&(t=e,r=this,R=function(){P=!P,r.render(t)}),F&&F(e)),l=P&&j.length>m,f=p&&!w;return{createURL:function(t){return o(function(e){return n.getWidgetUiState(e,{searchParameters:a.resetPage().toggleFacetRefinement(h,t),helper:c})})},items:u,refine:S,searchForItems:s,isFromSearch:!1,canRefine:0<u.length,widgetParams:d,isShowingMore:P,canToggleShowMore:l||f,toggleShowMore:E,sendEvent:O,hasExhaustiveItems:w}},dispose:function(e){e=e.state,r(),e=e.setQueryParameter("maxValuesPerFacet",void 0);return"and"===i?e.removeFacet(h):e.removeDisjunctiveFacet(h)},getWidgetUiState:function(e,t){var t=t.searchParameters,t="or"===i?t.getDisjunctiveRefinements(h):t.getConjunctiveRefinements(h);return e=k(k({},e),{},{refinementList:k(k({},e.refinementList),{},iu({},h,t))}),t=h,e.refinementList&&(e.refinementList[t]&&0!==e.refinementList[t].length||delete e.refinementList[t],0===Object.keys(e.refinementList).length)&&delete e.refinementList,e},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,n="or"===i;return e.isHierarchicalFacet(h)||n&&e.isConjunctiveFacet(h)||!n&&e.isDisjunctiveFacet(h)?e:(t=t.refinementList&&t.refinementList[h],r=(e=n?e.addDisjunctiveFacet(h).removeDisjunctiveFacetRefinement(h):e.addFacet(h).removeFacetRefinement(h)).maxValuesPerFacet||0,r=Math.max(r,p?a:m),e=e.setQueryParameter("maxValuesPerFacet",r),t?t.reduce(function(e,t){return n?e.addDisjunctiveFacetRefinement(h,t):e.addFacetRefinement(h,t)},e):e.setQueryParameters(iu({},r=n?"disjunctiveFacetsRefinements":"facetsRefinements",k(k({},e[r]),{},iu({},h,[])))))}}}}var su=i({name:"refinement-list",connector:!0}),cu=["isRefined","count:desc","name:asc"];function uu(e){return(uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lu(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function fu(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?lu(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=uu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=uu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==uu(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):lu(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function du(r){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(r,hu()),function(n){var i,e=n||{},t=e.escapeHTML,a=void 0===t||t,o=e.objectIDs,s=e.limit,c=e.threshold,u=e.fallbackParameters,l=e.queryParameters,t=e.transformItems,f=void 0===t?function(e){return e}:t;if(o&&0!==o.length)return{dependsOn:"recommend",$$type:"ais.relatedProducts",init:function(e){r(fu(fu({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);r(fu(fu({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){var t=e.results,r=e.helper,e=e.instantSearchInstance;if(i=i||bt({instantSearchInstance:e,helper:r,widgetType:this.$$type}),null==t)return{items:[],widgetParams:n,sendEvent:i};a&&0<t.hits.length&&(t.hits=it(t.hits));e=Vt(Ut(t.hits,0,1),t.queryID);return{items:f(e,{results:t}),widgetParams:n,sendEvent:i}},dispose:function(e){e=e.recommendState;return d(),e.removeParams(this.$$id)},getWidgetParameters:function(e){var r=this;return o.reduce(function(e,t){return e.addRelatedProducts({objectID:t,maxRecommendations:s,threshold:c,fallbackParameters:u?fu(fu({},u),a?_:{}):void 0,queryParameters:fu(fu({},l),a?_:{}),$$id:r.$$id})},e.removeParams(this.$$id))}};throw new Error(hu("The `objectIDs` option is required."))}}var hu=i({name:"related-products",connector:!0});function mu(e){return(mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pu(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function yu(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?pu(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=mu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=mu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==mu(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):pu(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function gu(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(r,vu()),function(n){var i,a,e=(n||{}).queryHook,o=void 0===e?bu:e;return{$$type:"ais.searchBox",init:function(e){var t=e.instantSearchInstance;r(yu(yu({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(yu(yu({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return t(),e.setQueryParameter("query",void 0)},getRenderState:function(e,t){return yu(yu({},e),{},{searchBox:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.helper,r=e.instantSearchInstance,e=e.state;return i||(i=function(e){o(e,function(e){return t.setQuery(e).search()})},a=function(){t.setQuery("").search()}),{query:e.query||"",refine:i,clear:a,widgetParams:n,isSearchStalled:"stalled"===r.status}},getWidgetUiState:function(e,t){t=t.searchParameters.query||"";return""===t||e&&e.query===t?e:yu(yu({},e),{},{query:t})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameter("query",t.query||"")}}}}var vu=i({name:"search-box",connector:!0}),bu=function(e,t){return t(e)};function Su(e){return(Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ou(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ju(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ou(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Su(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Su(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Su(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ou(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}var wu=i({name:"sort-by",connector:!0});function Pu(e){return"strategy"in e&&void 0!==e.strategy}function Ru(e){return Pu(e)?e.strategy:e.value}function Eu(e,t){if(t)return void 0!==(e=e[t])&&Pu(e)}function xu(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j,c=(m(n,wu()),{});return function(a){var i,e=a||{},o=e.items,e=e.transformItems,s=void 0===e?function(e){return e}:e;if(Array.isArray(o))return i={},o.forEach(function(e,t){var r="value"in e&&void 0!==e.value,n="strategy"in e&&void 0!==e.strategy;if(r&&n)throw new Error(wu("Item at index ".concat(t,' cannot have both "value" and "strategy" properties.')));if(!r&&!n)throw new Error(wu("Item at index ".concat(t,' must have either a "value" or "strategy" property.')));r=Ru(e);i[r]=e}),c.itemsLookup=i,{$$type:"ais.sortBy",init:function(e){var t=e.instantSearchInstance;if(o.some(function(e){return"strategy"in e&&e.strategy})&&!t.compositionID)throw new Error(wu('Sorting strategies can only be used in composition mode. Please provide a "compositionID" to your InstantSearch instance.'));var e=this.getWidgetRenderState(e),r=e.currentRefinement;Et(o,function(e){return Ru(e)===r});n(ju(ju({},e),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;n(ju(ju({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return t(),c.isUsingComposition&&e.sortBy&&(e=e.setQueryParameter("sortBy",void 0)),c.initialValue&&e.index!==c.initialValue?e.setIndex(c.initialValue):e},getRenderState:function(e,t){return ju(ju({},e),{},{sortBy:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,r=e.helper,n=e.state,i=e.parent,e=e.instantSearchInstance;!c.initialValue&&i&&(c.initialValue=i.getIndexName()),c.refine||(c.isUsingComposition=Boolean(null==e?void 0:e.compositionID),c.refine=function(e){var t=c.itemsLookup[e];(t&&Pu(t)?r.setQueryParameter("sortBy",t.strategy):r.setQueryParameter("sortBy",void 0).setIndex(e)).search()});i=s(o,{results:t}).map(function(e){return{label:e.label,value:Ru(e)}}),e=c.isUsingComposition&&Eu(c.itemsLookup,n.sortBy)?n.sortBy:n.index,n=!t||0===t.nbHits;return{currentRefinement:e,options:i,refine:c.refine,hasNoResults:n,canRefine:!n&&0<o.length,widgetParams:a}},getWidgetUiState:function(e,t){t=t.searchParameters,t=c.isUsingComposition&&Eu(c.itemsLookup,t.sortBy)?t.sortBy:t.index;return ju(ju({},e),{},{sortBy:t!==c.initialValue?t:void 0})},getWidgetSearchParameters:function(e,t){var r,t=t.uiState.sortBy||c.initialValue||e.index;return Eu(c.itemsLookup,t)?(r=c.itemsLookup[t],e.setQueryParameter("sortBy",r.strategy)):e.setQueryParameter("index",t)}};throw new Error(wu("The `items` option expects an array of objects."))}}function Iu(e){return(Iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fu(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _u(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Fu(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Iu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Iu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Iu(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Fu(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Tu(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(n,Au()),function(r){return{$$type:"ais.stats",init:function(e){var t=e.instantSearchInstance;n(_u(_u({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;n(_u(_u({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){e()},getRenderState:function(e,t){return _u(_u({},e),{},{stats:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,e=e.state;return t?{hitsPerPage:t.hitsPerPage,nbHits:t.nbHits,nbSortedHits:t.nbSortedHits,areHitsSorted:void 0!==t.appliedRelevancyStrictness&&0<t.appliedRelevancyStrictness&&t.nbSortedHits!==t.nbHits,nbPages:t.nbPages,page:t.page,processingTimeMS:t.processingTimeMS,query:t.query,widgetParams:r}:{hitsPerPage:e.hitsPerPage,nbHits:0,nbSortedHits:void 0,areHitsSorted:!1,nbPages:0,page:e.page||0,processingTimeMS:-1,query:e.query||"",widgetParams:r}}}}}var Au=i({name:"stats",connector:!0});function Du(e){return(Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ku(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ku(Object(r),!0).forEach(function(e){Cu(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ku(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Cu(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Du(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Du(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Du(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?Mu(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Wu(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(r,Hu()),function(d){var h,m,p,y,g,e=d||{},v=e.attribute,t=e.on,e=e.off;if(v)return h=void 0!==e,m=Rr(void 0===t||t).map(Rt),p=h?Rr(e).map(Rt):void 0,g=function(t,e){var r=e.state,n=e.createURL,i=e.getWidgetUiState,a=e.helper;return function(){r=r.resetPage();var e=t?m:p,e=(e&&e.forEach(function(e){r=r.removeDisjunctiveFacetRefinement(v,e)}),t?p:m);return e&&e.forEach(function(e){r=r.addDisjunctiveFacetRefinement(v,e)}),n(function(e){return i(e,{searchParameters:r,helper:a})})}},{$$type:$u,init:function(e){var t=e.instantSearchInstance;r(C(C({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(C(C({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return n(),e.removeDisjunctiveFacet(v)},getRenderState:function(e,t){return C(C({},e),{},{toggleRefinement:C(C({},e.toggleRefinement),{},Cu({},v,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var r,t,n,i=e.state,a=e.helper,o=e.results,s=e.createURL,e=e.instantSearchInstance,c=o?m.every(function(e){return i.isDisjunctiveFacetRefined(v,e)}):m.every(function(e){return i.isDisjunctiveFacetRefined(v,e)}),u={isRefined:c,count:0},l={isRefined:h&&!c,count:0},f=(o&&(t=Rr(p||!1),r=o.getFacetValues(v,{})||[],f=m.map(function(t){return Et(r,function(e){return e.escapedValue===Rt(String(t))})}).filter(function(e){return void 0!==e}),t=h?t.map(function(t){return Et(r,function(e){return e.escapedValue===Rt(String(t))})}).filter(function(e){return void 0!==e}):[],u={isRefined:!!f.length&&f.every(function(e){return e.isRefined}),count:f.reduce(function(e,t){return e+t.count},0)||null},l={isRefined:!!t.length&&t.every(function(e){return e.isRefined}),count:t.reduce(function(e,t){return e+t.count},0)||r.reduce(function(e,t){return e+t.count},0)}),y=y||Lu({instantSearchInstance:e,attribute:v,on:m,helper:a}),c?l:u);return{value:{name:v,isRefined:c,count:o?f.count:null,onFacetValue:u,offFacetValue:l},createURL:g(c,{state:i,createURL:s,helper:a,getWidgetUiState:this.getWidgetUiState}),sendEvent:y,canRefine:Boolean(o?f.count:null),refine:(n=a,function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isRefined:!1}).isRefined;e?(m.forEach(function(e){return n.removeDisjunctiveFacetRefinement(v,e)}),h&&p.forEach(function(e){return n.addDisjunctiveFacetRefinement(v,e)})):(y("click:internal",e),h&&p.forEach(function(e){return n.removeDisjunctiveFacetRefinement(v,e)}),m.forEach(function(e){return n.addDisjunctiveFacetRefinement(v,e)})),n.search()}),widgetParams:d}},getWidgetUiState:function(e,t){var r=t.searchParameters,t=m&&m.every(function(e){return r.isDisjunctiveFacetRefined(v,e)});return t?C(C({},e),{},{toggle:C(C({},e.toggle),{},Cu({},v,t))}):(null!=(t=e.toggle)&&delete t[v],e)},getWidgetSearchParameters:function(e,t){var r,t=t.uiState;return e.isHierarchicalFacet(v)||e.isConjunctiveFacet(v)?e:(r=e.addDisjunctiveFacet(v).removeDisjunctiveFacetRefinement(v),Boolean(t.toggle&&t.toggle[v])?(m&&m.forEach(function(e){r=r.addDisjunctiveFacetRefinement(v,e)}),r):h?(p&&p.forEach(function(e){r=r.addDisjunctiveFacetRefinement(v,e)}),r):r.setQueryParameters({disjunctiveFacetsRefinements:C(C({},e.disjunctiveFacetsRefinements),{},Cu({},v,[]))}))}};throw new Error(Hu("The `attribute` option is required."))}}var Hu=i({name:"toggle-refinement",connector:!0}),$u="ais.toggleRefinement",Lu=function(e){var s=e.instantSearchInstance,c=e.helper,u=e.attribute,l=e.on;return function(){for(var e,t,r,n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];1===a.length?s.sendEventToInsights(a[0]):(n=a[1],e=void 0===(e=a[2])?"Filter Applied":e,t=(r=Nu(a[0].split(":"),2))[0],r=r[1],"click"!==t||void 0===l||n||s.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:$u,eventType:t,eventModifier:r,payload:{eventName:e,index:(null==(n=c.lastResults)?void 0:n.index)||c.state.index,filters:l.map(function(e){return"".concat(u,":").concat(e)})},attribute:u}))}};function Uu(e){return(Uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qu(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function qu(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Qu(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Uu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Uu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Uu(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Qu(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Bu(d){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(d,Vu()),function(n){var i,e=n||{},t=e.facetName,r=e.facetValue,a=e.limit,o=e.threshold,s=e.fallbackParameters,c=e.queryParameters,u=e.escapeHTML,l=void 0===u||u,u=e.transformItems,f=void 0===u?function(e){return e}:u;if(t&&!r||!t&&r)throw new Error(Vu("When you provide facetName (received type ".concat(Le(t),"), you must also provide facetValue (received type ").concat(Le(r),").")));return{dependsOn:"recommend",$$type:"ais.trendingItems",init:function(e){d(qu(qu({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);d(qu(qu({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){var t=e.results,r=e.helper,e=e.instantSearchInstance;if(i=i||bt({instantSearchInstance:e,helper:r,widgetType:this.$$type}),null==t)return{items:[],widgetParams:n,sendEvent:i};l&&0<t.hits.length&&(t.hits=it(t.hits));e=Vt(Ut(t.hits,0,1),t.queryID);return{items:f(e,{results:t}),widgetParams:n,sendEvent:i}},dispose:function(e){e=e.recommendState;return h(),e.removeParams(this.$$id)},getWidgetParameters:function(e){return e.removeParams(this.$$id).addTrendingItems({facetName:t,facetValue:r,maxRecommendations:a,threshold:o,fallbackParameters:s?qu(qu({},s),l?_:{}):void 0,queryParameters:qu(qu({},c),l?_:{}),$$id:this.$$id})}}}}var Vu=i({name:"trending-items",connector:!0});function Ju(e){return(Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zu(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ku(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?zu(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Ju(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Ju(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ju(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):zu(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Xu(r){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(r,Gu()),function(n){var i,e=n||{},t=e.escapeHTML,a=void 0===t||t,o=e.objectIDs,s=e.limit,c=e.threshold,u=e.fallbackParameters,l=e.queryParameters,t=e.transformItems,f=void 0===t?function(e){return e}:t;if(o&&0!==o.length)return{dependsOn:"recommend",$$type:"ais.lookingSimilar",init:function(e){r(Ku(Ku({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);r(Ku(Ku({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){var t=e.results,r=e.helper,e=e.instantSearchInstance;if(i=i||bt({instantSearchInstance:e,helper:r,widgetType:this.$$type}),null==t)return{items:[],widgetParams:n,sendEvent:i};a&&0<t.hits.length&&(t.hits=it(t.hits));e=Vt(Ut(t.hits,0,1),t.queryID);return{items:f(e,{results:t}),widgetParams:n,sendEvent:i}},dispose:function(e){e=e.recommendState;return d(),e.removeParams(this.$$id)},getWidgetParameters:function(e){var r=this;return o.reduce(function(e,t){return e.addLookingSimilar({objectID:t,maxRecommendations:s,threshold:c,fallbackParameters:u?Ku(Ku({},u),a?_:{}):void 0,queryParameters:Ku(Ku({},l),a?_:{}),$$id:r.$$id})},e.removeParams(this.$$id))}};throw new Error(Gu("The `objectIDs` option is required."))}}var Gu=i({name:"looking-similar",connector:!0});function Yu(e){return(Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?el(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?el(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function el(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tl(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function rl(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?tl(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Yu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Yu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Yu(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):tl(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function nl(O){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;return m(O,il()),function(t){var a,o,s,c,i,u,l,f,d,h,m,p=t.agentId,y=t.attributes,e=t.maxSuggestions,g=void 0===e?3:e,e=t.debounceMs,v=void 0===e?300:e,e=t.hitsToSample,b=void 0===e?5:e,e=t.transformItems,r=void 0===e?function(e){return e}:e,S=t.transport;if(p||S)return c=!(s=[]),d=f=u=null,h=function(e){e="results"in e?e.results:void 0;return{suggestions:r(s,{results:e}),isLoading:c,refine:l,widgetParams:t}},m=300,{$$type:"ais.filterSuggestions",init:function(e){var t=e.instantSearchInstance,n=e.helper;if(f=n,S)a=S.api,o=S.headers||{};else{var r=Zu(At(t.client),2),i=r[0],r=r[1];if(!i||!r)throw new Error(il("Could not extract Algolia credentials from the search client."));a="https://".concat(i,".algolia.net/agent-studio/1/agents/").concat(p,"/completions?compatibilityMode=ai-sdk-5&stream=false"),o={"x-algolia-application-id":i,"x-algolia-api-key":r,"x-algolia-agent":Tt(t.client)}}l=function(t,e){var r=(null==(r=n.state.hierarchicalFacets.find(function(e){return e.attributes.includes(t)}))?void 0:r.name)||t;n.toggleFacetRefinement(r,e),n.search()},O(rl(rl({},h(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t,r=e.results,n=e.instantSearchInstance;d=e,r&&(r=(r=r).query||"",t=f?JSON.stringify(f.state.facetsRefinements)+JSON.stringify(f.state.disjunctiveFacetsRefinements)+JSON.stringify(f.state.hierarchicalFacetsRefinements):"",(r="".concat(r,"|").concat(t))!==u)&&(u=r,clearTimeout(i),i=setTimeout(function(){var e,r,n,t,i;null!=(e=d)&&e.results&&(e=d.results,r=d,null!=e&&null!=(t=e.hits)&&t.length?(n=Date.now(),c=!0,O(rl(rl({},h(r)),{},{instantSearchInstance:r.instantSearchInstance}),!1),t=(null==(t=e._rawResults)||null==(t=t[0])?void 0:t.facets)||{},t=y?Object.fromEntries(Object.entries(t).filter(function(e){e=Zu(e,1)[0];return y.includes(e)})):t,i=f?Wt(e,f.state).map(function(e){return{attribute:e.attribute,value:e.name}}):[],t=JSON.stringify({query:e.query,facets:t,hitsSample:e.hits.slice(0,b),currentRefinements:i,maxSuggestions:g}),e={messages:[{id:"sr-".concat(Date.now()),createdAt:(new Date).toISOString(),role:"user",parts:[{type:"text",text:t}]}]},i=null!=S&&S.prepareSendMessagesRequest?S.prepareSendMessagesRequest(e).body:e,fetch(a,{method:"POST",headers:rl(rl({},o),{},{"Content-Type":"application/json"}),body:JSON.stringify(i)}).then(function(e){if(e.ok)return e.json();throw new Error("HTTP error ".concat(e.status))}).then(function(e){e=JSON.parse(e.parts[1].text),e=(Array.isArray(e)?e:[]).filter(function(e){return!(!(null!=e&&e.attribute&&null!=e&&e.value&&null!=e&&e.label)||y&&!y.includes(e.attribute))}).slice(0,g);s=e}).catch(function(){s=[]}).finally(function(){function e(){c=!1,O(rl(rl({},h(r)),{},{instantSearchInstance:r.instantSearchInstance}),!1)}var t=Date.now()-n,t=Math.max(0,m-t);0<t?setTimeout(e,t):e()})):(c=!(s=[]),O(rl(rl({},h(r)),{},{instantSearchInstance:r.instantSearchInstance}),!1)))},v)),O(rl(rl({},h(e)),{},{instantSearchInstance:n}),!1)},dispose:function(){clearTimeout(i),n()},getRenderState:function(e,t){return rl(rl({},e),{},{filterSuggestions:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){return h(e)}};throw new Error(il("The `agentId` option is required unless a custom `transport` is provided."))}}var il=i({name:"filter-suggestions",connector:!0});function al(e){return(al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ol(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function sl(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ol(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=al(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=al(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==al(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ol(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function cl(e){var t=e.children,r=e.renderToString,n=e.notifyServer,i=e.searchRef,a=e.skipRecommend;return Promise.resolve().then(function(){r(c.createElement(Lr.Provider,{value:{notifyServer:n}},t))}).then(function(){return new Promise(function(e){return setTimeout(e,0)})}).then(function(){if(i.current)return function(i,e){var a,o=1<arguments.length&&void 0!==e&&e,s=i.mainHelper,t=s.getClient();return i.compositionID?s.setClient(sl(sl({},t),{},{search:function(e){return a=[e.requestBody.params],t.search(e)}})):s.setClient(sl(sl({},t),{},{search:function(e){return a=e.map(function(e){return e.params}),t.search(e)}})),i._hasSearchWidget&&(i.compositionID?s.searchWithComposition():s.searchOnlyWithDerivedHelpers()),!o&&i._hasRecommendWidget&&s.recommend(),new Promise(function(e,t){var r=!i._hasSearchWidget,n=!i._hasRecommendWidget||o;s.derivedHelpers[0].on("result",function(){r=!0,n&&e(a)}),s.derivedHelpers[0].on("recommend:result",function(){n=!0,r&&e(a)}),s.on("error",function(e){t(e)}),i.on("error",function(e){t(e)}),s.derivedHelpers.forEach(function(e){return e.on("error",function(e){t(e)})})})}(i.current,a);throw new Error("Unable to retrieve InstantSearch's server state in `getServerState()`. Did you mount the <InstantSearch> component?")}).then(function(e){return{initialResults:function(e,a){var o={},s=0;if(or(e,function(e){var t,r,n=e.getResults(),i=null==(i=e.getHelper())?void 0:i.lastRecommendResults;(n||i)&&(r=(t=(null==n||null==(t=n._rawResults)?void 0:t.length)||0)?null==a?void 0:a.slice(s,s+t):[],s+=t,o[e.getIndexId()]=sl(sl(sl({},n&&{state:sl(sl({},n._state),{},{clickAnalytics:null==r||null==(t=r[0])?void 0:t.clickAnalytics,userToken:null==r||null==(e=r[0])?void 0:e.userToken}),results:n._rawResults}),i&&{recommendResults:{params:JSON.parse(JSON.stringify(i._state.params)),results:i._rawResults}}),r&&{requestParams:r}))}),0===Object.keys(o).length)throw new Error("The root index does not have any results. Make sure you have at least one widget that provides results.");return o}(i.current.mainIndex,e)}})}e.Configure=function(e){return en($({},e),{$$widgetType:"ais.configure"}),null},e.DynamicWidgets=function(e){var t=e.children,r=void 0===(r=e.fallbackComponent)?un:r,e=L(e,cn),n=c.useRef(r),r=sn(e,{$$widgetType:"ais.dynamicWidgets"}).attributesToRender,i=new Map;return c.Children.forEach(t,function(e){var t=function e(t){if(!ln(t))return;if(t.props.attribute)return t.props.attribute;if(Array.isArray(t.props.attributes))return t.props.attributes[0];if(t.props.children)return Mr(1===c.Children.count(t.props.children)),e(c.Children.only(t.props.children));return}(e);Mr(void 0!==t),i.set(t,e)}),c.createElement(c.Fragment,null,r.map(function(e){return c.createElement(b.Fragment,{key:e},i.get(e)||c.createElement(n.current,{attribute:e}))}))},e.Index=function(e){var t,r,n,i,a,o=e.children,s=(e=e=L(e,In),t=Ur(),r=null==(r=qr())?void 0:r.initialResults,n=Wr(),i=Br(e),s=(e=b.useMemo(function(){return Rn(i)},[i])).getHelper(),a=xn(),Jr(function(){a()},[s,a]),Xr({widget:e,parentIndex:n,props:i,shouldSsr:Boolean(t||r),skipSuspense:!0}),e);return null===s.getHelper()?null:c.createElement(Nr.Provider,{value:s},o)},e.InstantSearch=function(e){var t=e.children;return(e=pa(L(e,ga))).started?c.createElement(Hr.Provider,{value:e},c.createElement(Nr.Provider,{value:e.mainIndex},t,c.createElement(va,{search:e}))):null},e.InstantSearchRSCContext=zr,e.InstantSearchSSRContext=Qr,e.InstantSearchSSRProvider=Sa,e.InstantSearchServerContext=Lr,e.getServerState=function(r,e){function n(){var t=!1;return function(e){e=e.search;if(t)throw new Error("getServerState should be called with a single InstantSearchSSRProvider and a single InstantSearch component.");t=!0,a.current=e}}var i=e.renderToString,a={current:void 0};return $e(),cl({children:r,renderToString:i,searchRef:a,notifyServer:n()}).then(function(e){var t=!1;return or(a.current.mainIndex,function(e){t=t||e.getWidgets().some(function(e){return"ais.dynamicWidgets"===e.$$type})}),t?($e(),cl({children:c.createElement(Sa,e,r),renderToString:i,searchRef:a,notifyServer:n(),skipRecommend:!0})):e})},e.useAutocomplete=function(e,t){return s(Pa,e,t)},e.useBreadcrumb=function(e,t){return s(Ta,e,t)},e.useChat=function(e,t){return s(Qo,e,t)},e.useClearRefinements=function(e,t){return s(Xo,e,t)},e.useConfigure=en,e.useConnector=s,e.useCurrentRefinements=function(e,t){return s(ns,e,t)},e.useDynamicWidgets=sn,e.useFilterSuggestions=function(e,t){return s(nl,e,t)},e.useFrequentlyBoughtTogether=function(e,t){return s(ds,e,t)},e.useGeoSearch=function(e,t){return s(Ss,e,t)},e.useHierarchicalMenu=function(e,t){return s(Fs,e,t)},e.useHits=function(e,t){return s(Ns,e,t)},e.useHitsPerPage=function(e,t){return s(Qs,e,t)},e.useInfiniteHits=function(e,t){return s(nc,e,t)},e.useInstantSearch=function(){var t,r,n,i,a,o,s,c=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).catchError,u=$r();t=$r(),r=Wr(),e=r.getIndexId(),m=(l=U(b.useState(function(){return t.getUiState()}),2))[0],n=l[1],l=m[e],d=(h=U(b.useState(function(){return t.renderState}),2))[0],i=h[1],h=d[e]||{},e=b.useCallback(function(e){t.setUiState(e)},[t]),f=b.useCallback(function(e){r.setIndexUiState(e)},[r]),b.useEffect(function(){function e(){n(t.getUiState()),i(t.renderState)}return t.addListener("render",e),e(),function(){t.removeListener("render",e)}},[t]);var e=(m={uiState:m,setUiState:e,indexUiState:l,setIndexUiState:f,renderState:d,indexRenderState:h}).uiState,l=m.setUiState,f=m.indexUiState,d=m.setIndexUiState,h=m.renderState,m=m.indexRenderState;a=$r(),o=Wr(),y=U(b.useState(function(){var e=Cr(o);return{results:e.results,scopedResults:e.scopedResults}}),2),p=y[0],s=y[1],b.useEffect(function(){function e(){var e=o.getResults();null!==e?s({results:e,scopedResults:o.getScopedResults()}):0===a.mainIndex.getIndexName().length&&(e=a.mainIndex.getWidgets().find(Ot))&&s({results:Cr(o).results,scopedResults:e.getScopedResults()})}return a.addListener("render",e),e(),function(){a.removeListener("render",e)}},[a,o]);var p=(y=p).results,y=y.scopedResults,g=b.useCallback(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return u.use.apply(u,t),function(){u.unuse.apply(u,t)}},[u]),v=b.useCallback(function(){u.refresh()},[u]);return Jr(function(){var e;return c?(u.addListener("error",e=function(){}),function(){return u.removeListener("error",e)}):function(){}},[u,c]),{results:p,scopedResults:y,uiState:e,setUiState:l,indexUiState:f,setIndexUiState:d,renderState:h,indexRenderState:m,addMiddlewares:g,refresh:v,status:u.status,error:u.error}},e.useInstantSearchContext=$r,e.useLookingSimilar=function(e,t){return s(Xu,e,t)},e.useMenu=function(e,t){return s(fc,e,t)},e.useNumericMenu=function(e,t){return s(Sc,e,t)},e.usePagination=function(e,t){return s(Cc,e,t)},e.usePoweredBy=function(){var e=Pr(function(e){return(null==(e=e.window.location)?void 0:e.hostname)||""},{fallback:function(){return""}});return{url:"https://www.algolia.com/?utm_source=react-instantsearch&utm_medium=website&utm_content=".concat(e,"&utm_campaign=poweredby")}},e.useQueryRules=function(e,t){return s(qc,e,t)},e.useRSCContext=Kr,e.useRange=function(e,t){return s(Zc,e,t)},e.useRefinementList=function(e,t){return s(ou,e,t)},e.useRelatedProducts=function(e,t){return s(du,e,t)},e.useSearchBox=function(e,t){return s(gu,e,t)},e.useSortBy=function(e,t){return s(xu,e,t)},e.useStats=function(e,t){return s(Tu,e,t)},e.useToggleRefinement=function(e,t){return s(Wu,e,t)},e.useTrendingItems=function(e,t){return s(Bu,e,t)},e.version=N,e.wrapPromiseWithState=function(e){var r;return"status"in e||((r=e).status="pending",r.then(function(e){var t;"pending"===r.status&&((t=r).status="fulfilled",t.value=e)},function(e){var t;"pending"===r.status&&((t=r).status="rejected",t.reason=e)})),e},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ReactInstantSearchCore.min.js.map
